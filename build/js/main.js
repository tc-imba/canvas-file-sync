!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="build/",t(t.s=16)}([function(e,t){e.exports=vendor_stable},function(e,t,n){e.exports=n(0)(5)},function(e,t,n){"use strict";var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":r(window))&&(i=window)}e.exports=i},function(e,t,n){e.exports=n(0)(52)},function(e,t,n){"use strict";var i={mp3:"audio",wma:"audio",wav:"audio",aac:"audio",mid:"audio",c:"code",h:"code",cpp:"code",cc:"code",hpp:"code",py:"code",html:"code",htm:"code",js:"code",css:"code",php:"code",jsp:"code",asp:"code",aspx:"code",java:"code",json:"code",yaml:"code",xml:"code",sql:"code",m:"code",mm:"code",lua:"code",rb:"code",as:"code",xls:"excel",xlsx:"excel",csv:"excel",slk:"excel",ods:"excel",bmp:"image",png:"image",jpg:"image",jpeg:"image",gif:"image",tiff:"image",mp4:"movie",mpeg:"movie",avi:"movie",mov:"movie",wmv:"movie",mkv:"movie",flv:"movie",rmvb:"movie","3gp":"movie",pdf:"pdf",ppt:"powerpoint",pps:"powerpoint",pptx:"powerpoint",ppsx:"powerpoint",odp:"powerpoint",txt:"text",md:"text",rst:"text",doc:"word",docx:"word",rtf:"word",odt:"word",rar:"zip",zip:"zip",iso:"zip","7z":"zip",tar:"zip",xz:"zip",gz:"zip",bz2:"zip"};e.exports={getIcon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return i.hasOwnProperty(e)?"fa-file-"+i[e]+"-o":"fa-file-o"},processFile:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=t.match(/\.[\w]+$/);return n&&n.length>0?e.exports.getIcon(n[0].replace(".","")):e.exports.getIcon()},processArray:function(t){for(var n=0;n<t.length;n++)t[n].icon=e.exports.processFile(t[n].name)}}},function(e,t,n){"use strict";(function(t){/**
 * filesize
 *
 * @copyright 2017 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 3.5.9
 */
!function(t){function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],a=0,o=void 0,l=void 0,c=void 0,d=void 0,h=void 0,u=void 0,f=void 0,p=void 0,g=void 0,_=void 0,m=void 0,v=void 0,y=void 0,b=void 0;if(isNaN(e))throw new Error("Invalid arguments");return c=!0===t.bits,m=!0===t.unix,l=t.base||2,_=void 0!==t.round?t.round:m?1:2,v=void 0!==t.spacer?t.spacer:m?"":" ",b=t.symbols||t.suffixes||{},y=2===l?t.standard||"jedec":"jedec",g=t.output||"string",h=!0===t.fullform,u=t.fullforms instanceof Array?t.fullforms:[],o=void 0!==t.exponent?t.exponent:-1,p=Number(e),f=p<0,d=l>2?1e3:1024,f&&(p=-p),(-1===o||isNaN(o))&&(o=Math.floor(Math.log(p)/Math.log(d)))<0&&(o=0),o>8&&(o=8),0===p?(n[0]=0,n[1]=m?"":r[y][c?"bits":"bytes"][o]):(a=p/(2===l?Math.pow(2,10*o):Math.pow(1e3,o)),c&&(a*=8)>=d&&o<8&&(a/=d,o++),n[0]=Number(a.toFixed(o>0?_:0)),n[1]=10===l&&1===o?c?"kb":"kB":r[y][c?"bits":"bytes"][o],m&&(n[1]="jedec"===y?n[1].charAt(0):o>0?n[1].replace(/B$/,""):n[1],i.test(n[1])&&(n[0]=Math.floor(n[0]),n[1]=""))),f&&(n[0]=-n[0]),n[1]=b[n[1]]||n[1],"array"===g?n:"exponent"===g?o:"object"===g?{value:n[0],suffix:n[1],symbol:n[1]}:(h&&(n[1]=u[o]?u[o]:s[y][o]+(c?"bit":"byte")+(1===n[0]?"":"s")),n.join(v))}var i=/^(b|B)$/,r={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},s={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]};n.partial=function(e){return function(t){return n(t,e)}},e.exports=n}("undefined"!=typeof window&&window)}).call(t,n(2))},function(e,t,n){"use strict";var i,r,s,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a){r=[n(1)],i=a,void 0!==(s="function"==typeof i?i.apply(t,r):i)&&(e.exports=s)}(function(e,t){/*!
  * jsTree 3.3.4
  * http://jstree.com/
  *
  * Copyright (c) 2014 Ivan Bozhanov (http://vakata.com)
  *
  * Licensed same as jquery - under the terms of the MIT License
  *   http://www.opensource.org/licenses/mit-license.php
  */
/*!
  * if using jslint please allow for the jQuery global and use following options:
  * jslint: loopfunc: true, browser: true, ass: true, bitwise: true, continue: true, nomen: true, plusplus: true, regexp: true, unparam: true, todo: true, white: true
  */
if(!e.jstree){var n=0,i=!1,r=!1,s=!1,o=[],l=e("script:last").attr("src"),c=window.document;e.jstree={version:"3.3.4",defaults:{plugins:[]},plugins:{},path:l&&-1!==l.indexOf("/")?l.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,root:"#"},e.jstree.create=function(t,i){var r=new e.jstree.core(++n),s=i;return i=e.extend(!0,{},e.jstree.defaults,i),s&&s.plugins&&(i.plugins=s.plugins),e.each(i.plugins,function(e,t){"core"!==e&&(r=r.plugin(t,i[t]))}),e(t).data("jstree",r),r.init(t,i),r},e.jstree.destroy=function(){e(".jstree:jstree").jstree("destroy"),e(c).off(".jstree")},e.jstree.core=function(e){this._id=e,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1,ellipsis:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},e.jstree.reference=function(t){var n=null,i=null;if(!t||!t.id||t.tagName&&t.nodeType||(t=t.id),!i||!i.length)try{i=e(t)}catch(e){}if(!i||!i.length)try{i=e("#"+t.replace(e.jstree.idregex,"\\$&"))}catch(e){}return i&&i.length&&(i=i.closest(".jstree")).length&&(i=i.data("jstree"))?n=i:e(".jstree").each(function(){var i=e(this).data("jstree");if(i&&i._model.data[t])return n=i,!1}),n},e.fn.jstree=function(n){var i="string"==typeof n,r=Array.prototype.slice.call(arguments,1),s=null;return!(!0===n&&!this.length)&&(this.each(function(){var a=e.jstree.reference(this),o=i&&a?a[n]:null;if(s=i&&o?o.apply(a,r):null,a||i||n!==t&&!e.isPlainObject(n)||e.jstree.create(this,n),(a&&!i||!0===n)&&(s=a||!1),null!==s&&s!==t)return!1}),null!==s&&s!==t?s:this)},e.expr.pseudos.jstree=e.expr.createPseudo(function(n){return function(n){return e(n).hasClass("jstree")&&e(n).data("jstree")!==t}}),e.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:e.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,ellipsis:!1,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0},e.jstree.core.prototype={plugin:function(t,n){var i=e.jstree.plugins[t];return i?(this._data[t]={},i.prototype=this,new i(n,this)):this},init:function(t,n){this._model={data:{},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this._model.data[e.jstree.root]={id:e.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this.element=e(t).addClass("jstree jstree-"+this._id),this.settings=n,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().outerHeight()||24,this._data.core.node=this._create_prototype_node(),this.trigger("loading"),this.load_node(e.jstree.root)},destroy:function(e){if(this.trigger("destroy"),this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(e){}e||this.element.empty(),this.teardown()},_create_prototype_node:function(){var e,t,n=c.createElement("LI");return n.setAttribute("role","treeitem"),e=c.createElement("I"),e.className="jstree-icon jstree-ocl",e.setAttribute("role","presentation"),n.appendChild(e),e=c.createElement("A"),e.className="jstree-anchor",e.setAttribute("href","#"),e.setAttribute("tabindex","-1"),t=c.createElement("I"),t.className="jstree-icon jstree-themeicon",t.setAttribute("role","presentation"),e.appendChild(t),n.appendChild(e),e=t=null,n},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var t="",n=null,i=0;this.element.on("dblclick.jstree",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;if(c.selection&&c.selection.empty)c.selection.empty();else if(window.getSelection){var t=window.getSelection();try{t.removeAllRanges(),t.collapse()}catch(e){}}}).on("mousedown.jstree",e.proxy(function(e){e.target===this.element[0]&&(e.preventDefault(),i=+new Date)},this)).on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault()}).on("click.jstree",".jstree-ocl",e.proxy(function(e){this.toggle_node(e.target)},this)).on("dblclick.jstree",".jstree-anchor",e.proxy(function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;this.settings.core.dblclick_toggle&&this.toggle_node(e.target)},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){t.preventDefault(),t.currentTarget!==c.activeElement&&e(t.currentTarget).focus(),this.activate_node(t.currentTarget,t)},this)).on("keydown.jstree",".jstree-anchor",e.proxy(function(t){if(t.target.tagName&&"input"===t.target.tagName.toLowerCase())return!0;if(32!==t.which&&13!==t.which&&(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey))return!0;var n=null;switch(this._data.core.rtl&&(37===t.which?t.which=39:39===t.which&&(t.which=37)),t.which){case 32:t.ctrlKey&&(t.type="click",e(t.currentTarget).trigger(t));break;case 13:t.type="click",e(t.currentTarget).trigger(t);break;case 37:t.preventDefault(),this.is_open(t.currentTarget)?this.close_node(t.currentTarget):(n=this.get_parent(t.currentTarget))&&n.id!==e.jstree.root&&this.get_node(n,!0).children(".jstree-anchor").focus();break;case 38:t.preventDefault(),n=this.get_prev_dom(t.currentTarget),n&&n.length&&n.children(".jstree-anchor").focus();break;case 39:t.preventDefault(),this.is_closed(t.currentTarget)?this.open_node(t.currentTarget,function(e){this.get_node(e,!0).children(".jstree-anchor").focus()}):this.is_open(t.currentTarget)&&(n=this.get_node(t.currentTarget,!0).children(".jstree-children")[0])&&e(this._firstChild(n)).children(".jstree-anchor").focus();break;case 40:t.preventDefault(),n=this.get_next_dom(t.currentTarget),n&&n.length&&n.children(".jstree-anchor").focus();break;case 106:this.open_all();break;case 36:t.preventDefault(),n=this._firstChild(this.get_container_ul()[0]),n&&e(n).children(".jstree-anchor").filter(":visible").focus();break;case 35:t.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus();break;case 113:t.preventDefault(),this.edit(t.currentTarget)}},this)).on("load_node.jstree",e.proxy(function(t,n){n.status&&(n.node.id!==e.jstree.root||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(e.proxy(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var t,n,i=[];for(t=0,n=this._data.core.selected.length;t<n;t++)i=i.concat(this._model.data[this._data.core.selected[t]].parents);for(i=e.vakata.array_unique(i),t=0,n=i.length;t<n;t++)this.open_node(i[t],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",e.proxy(function(i){if(i.target.tagName&&"input"===i.target.tagName.toLowerCase())return!0;n&&clearTimeout(n),n=setTimeout(function(){t=""},500);var r=String.fromCharCode(i.which).toLowerCase(),s=this.element.find(".jstree-anchor").filter(":visible"),a=s.index(c.activeElement)||0,o=!1;if(t+=r,t.length>1){if(s.slice(a).each(e.proxy(function(n,i){if(0===e(i).text().toLowerCase().indexOf(t))return e(i).focus(),o=!0,!1},this)),o)return;if(s.slice(0,a).each(e.proxy(function(n,i){if(0===e(i).text().toLowerCase().indexOf(t))return e(i).focus(),o=!0,!1},this)),o)return}if(new RegExp("^"+r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"+$").test(t)){if(s.slice(a+1).each(e.proxy(function(t,n){if(e(n).text().toLowerCase().charAt(0)===r)return e(n).focus(),o=!0,!1},this)),o)return;if(s.slice(0,a+1).each(e.proxy(function(t,n){if(e(n).text().toLowerCase().charAt(0)===r)return e(n).focus(),o=!0,!1},this)),o)return}},this)).on("init.jstree",e.proxy(function(){var e=this.settings.core.themes;this._data.core.themes.dots=e.dots,this._data.core.themes.stripes=e.stripes,this._data.core.themes.icons=e.icons,this._data.core.themes.ellipsis=e.ellipsis,this.set_theme(e.name||"default",e.url),this.set_theme_variant(e.variant)},this)).on("loading.jstree",e.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"](),this[this._data.core.themes.ellipsis?"show_ellipsis":"hide_ellipsis"]()},this)).on("blur.jstree",".jstree-anchor",e.proxy(function(t){this._data.core.focused=null,e(t.currentTarget).filter(".jstree-hovered").mouseleave(),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",e.proxy(function(t){var n=this.get_node(t.currentTarget);n&&n.id&&(this._data.core.focused=n.id),this.element.find(".jstree-hovered").not(t.currentTarget).mouseleave(),e(t.currentTarget).mouseenter(),this.element.attr("tabindex","-1")},this)).on("focus.jstree",e.proxy(function(){if(+new Date-i>500&&!this._data.core.focused){i=0;var e=this.get_node(this.element.attr("aria-activedescendant"),!0);e&&e.find("> .jstree-anchor").focus()}},this)).on("mouseenter.jstree",".jstree-anchor",e.proxy(function(e){this.hover_node(e.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),e(c).off(".jstree-"+this._id)},trigger:function(e,t){t||(t={}),t.instance=this,this.element.triggerHandler(e.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(t){var n=this.settings.core.strings;return e.isFunction(n)?n.call(this,t):n&&n[t]?n[t]:t},_firstChild:function(e){for(e=e?e.firstChild:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_nextSibling:function(e){for(e=e?e.nextSibling:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_previousSibling:function(e){for(e=e?e.previousSibling:null;null!==e&&1!==e.nodeType;)e=e.previousSibling;return e},get_node:function(t,n){t&&t.id&&(t=t.id);var i;try{if(this._model.data[t])t=this._model.data[t];else if("string"==typeof t&&this._model.data[t.replace(/^#/,"")])t=this._model.data[t.replace(/^#/,"")];else if("string"==typeof t&&(i=e("#"+t.replace(e.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[i.closest(".jstree-node").attr("id")])t=this._model.data[i.closest(".jstree-node").attr("id")];else if((i=e(t,this.element)).length&&this._model.data[i.closest(".jstree-node").attr("id")])t=this._model.data[i.closest(".jstree-node").attr("id")];else{if(!(i=e(t,this.element)).length||!i.hasClass("jstree"))return!1;t=this._model.data[e.jstree.root]}return n&&(t=t.id===e.jstree.root?this.element:e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)),t}catch(e){return!1}},get_path:function(t,n,i){if(!(t=t.parents?t:this.get_node(t))||t.id===e.jstree.root||!t.parents)return!1;var r,s,a=[];for(a.push(i?t.id:t.text),r=0,s=t.parents.length;r<s;r++)a.push(i?t.parents[r]:this.get_text(t.parents[r]));return a=a.reverse().slice(1),n?a.join(n):a},get_next_dom:function(t,n){var i;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(i=this._firstChild(this.get_container_ul()[0]);i&&0===i.offsetHeight;)i=this._nextSibling(i);return!!i&&e(i)}if(!t||!t.length)return!1;if(n){i=t[0];do{i=this._nextSibling(i)}while(i&&0===i.offsetHeight);return!!i&&e(i)}if(t.hasClass("jstree-open")){for(i=this._firstChild(t.children(".jstree-children")[0]);i&&0===i.offsetHeight;)i=this._nextSibling(i);if(null!==i)return e(i)}i=t[0];do{i=this._nextSibling(i)}while(i&&0===i.offsetHeight);return null!==i?e(i):t.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(t,n){var i;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(i=this.get_container_ul()[0].lastChild;i&&0===i.offsetHeight;)i=this._previousSibling(i);return!!i&&e(i)}if(!t||!t.length)return!1;if(n){i=t[0];do{i=this._previousSibling(i)}while(i&&0===i.offsetHeight);return!!i&&e(i)}i=t[0];do{i=this._previousSibling(i)}while(i&&0===i.offsetHeight);if(null!==i){for(t=e(i);t.hasClass("jstree-open");)t=t.children(".jstree-children").first().children(".jstree-node:visible:last");return t}return!(!(i=t[0].parentNode.parentNode)||!i.className||-1===i.className.indexOf("jstree-node"))&&e(i)},get_parent:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.parent},get_children_dom:function(e){return e=this.get_node(e,!0),e[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!(!e||!e.length)&&e.children(".jstree-children").children(".jstree-node")},is_parent:function(e){return(e=this.get_node(e))&&(!1===e.state.loaded||e.children.length>0)},is_loaded:function(e){return(e=this.get_node(e))&&e.state.loaded},is_loading:function(e){return(e=this.get_node(e))&&e.state&&e.state.loading},is_open:function(e){return(e=this.get_node(e))&&e.state.opened},is_closed:function(e){return(e=this.get_node(e))&&this.is_parent(e)&&!e.state.opened},is_leaf:function(e){return!this.is_parent(e)},load_node:function(t,n){var i,r,s,a,o;if(e.isArray(t))return this._load_nodes(t.slice(),n),!0;if(!(t=this.get_node(t)))return n&&n.call(this,t,!1),!1;if(t.state.loaded){for(t.state.loaded=!1,s=0,a=t.parents.length;s<a;s++)this._model.data[t.parents[s]].children_d=e.vakata.array_filter(this._model.data[t.parents[s]].children_d,function(n){return-1===e.inArray(n,t.children_d)});for(i=0,r=t.children_d.length;i<r;i++)this._model.data[t.children_d[i]].state.selected&&(o=!0),delete this._model.data[t.children_d[i]];o&&(this._data.core.selected=e.vakata.array_filter(this._data.core.selected,function(n){return-1===e.inArray(n,t.children_d)})),t.children=[],t.children_d=[],o&&this.trigger("changed",{action:"load_node",node:t,selected:this._data.core.selected})}return t.state.failed=!1,t.state.loading=!0,this.get_node(t,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(t,e.proxy(function(e){t=this._model.data[t.id],t.state.loading=!1,t.state.loaded=e,t.state.failed=!t.state.loaded;var i=this.get_node(t,!0),r=0,s=0,a=this._model.data,o=!1;for(r=0,s=t.children.length;r<s;r++)if(a[t.children[r]]&&!a[t.children[r]].state.hidden){o=!0;break}t.state.loaded&&i&&i.length&&(i.removeClass("jstree-closed jstree-open jstree-leaf"),o?"#"!==t.id&&i.addClass(t.state.opened?"jstree-open":"jstree-closed"):i.addClass("jstree-leaf")),i.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:t,status:e}),n&&n.call(this,t,e)},this)),!0},_load_nodes:function(e,t,n,i){var r,s,a=!0,o=function(){this._load_nodes(e,t,!0)},l=this._model.data,c=[];for(r=0,s=e.length;r<s;r++)l[e[r]]&&(!l[e[r]].state.loaded&&!l[e[r]].state.failed||!n&&i)&&(this.is_loading(e[r])||this.load_node(e[r],o),a=!1);if(a){for(r=0,s=e.length;r<s;r++)l[e[r]]&&l[e[r]].state.loaded&&c.push(e[r]);t&&!t.done&&(t.call(this,c),t.done=!0)}},load_all:function(t,n){if(t||(t=e.jstree.root),!(t=this.get_node(t)))return!1;var i,r,s=[],a=this._model.data,o=a[t.id].children_d;for(t.state&&!t.state.loaded&&s.push(t.id),i=0,r=o.length;i<r;i++)a[o[i]]&&a[o[i]].state&&!a[o[i]].state.loaded&&s.push(o[i]);s.length?this._load_nodes(s,function(){this.load_all(t,n)}):(n&&n.call(this,t),this.trigger("load_all",{node:t}))},_load_node:function(t,n){var i,r=this.settings.core.data,s=function(){return 3!==this.nodeType&&8!==this.nodeType};return r?e.isFunction(r)?r.call(this,t,e.proxy(function(i){!1===i?n.call(this,!1):this["string"==typeof i?"_append_html_data":"_append_json_data"](t,"string"==typeof i?e(e.parseHTML(i)).filter(s):i,function(e){n.call(this,e)})},this)):"object"===(void 0===r?"undefined":a(r))?r.url?(r=e.extend(!0,{},r),e.isFunction(r.url)&&(r.url=r.url.call(this,t)),e.isFunction(r.data)&&(r.data=r.data.call(this,t)),e.ajax(r).done(e.proxy(function(i,r,o){var l=o.getResponseHeader("Content-Type");return l&&-1!==l.indexOf("json")||"object"===(void 0===i?"undefined":a(i))?this._append_json_data(t,i,function(e){n.call(this,e)}):l&&-1!==l.indexOf("html")||"string"==typeof i?this._append_html_data(t,e(e.parseHTML(i)).filter(s),function(e){n.call(this,e)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:o})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1))},this)).fail(e.proxy(function(e){this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:e})},n.call(this,!1),this.settings.core.error.call(this,this._data.core.last_error)},this))):(i=e.isArray(r)?e.extend(!0,[],r):e.isPlainObject(r)?e.extend(!0,{},r):r,t.id===e.jstree.root?this._append_json_data(t,i,function(e){n.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1))):"string"==typeof r?t.id===e.jstree.root?this._append_html_data(t,e(e.parseHTML(r)).filter(s),function(e){n.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1)):n.call(this,!1):t.id===e.jstree.root?this._append_html_data(t,this._data.core.original_container_html.clone(!0),function(e){n.call(this,e)}):n.call(this,!1)},_node_changed:function(e){(e=this.get_node(e))&&this._model.changed.push(e.id)},_append_html_data:function(t,n,i){t=this.get_node(t),t.children=[],t.children_d=[];var r,s,a,o=n.is("ul")?n.children():n,l=t.id,c=[],d=[],h=this._model.data,u=h[l],f=this._data.core.selected.length;for(o.each(e.proxy(function(t,n){(r=this._parse_model_from_html(e(n),l,u.parents.concat()))&&(c.push(r),d.push(r),h[r].children_d.length&&(d=d.concat(h[r].children_d)))},this)),u.children=c,u.children_d=d,s=0,a=u.parents.length;s<a;s++)h[u.parents[s]].children_d=h[u.parents[s]].children_d.concat(d);this.trigger("model",{nodes:d,parent:l}),l!==e.jstree.root?(this._node_changed(l),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==f&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),i.call(this,!0)},_append_json_data:function(t,n,i,r){if(null!==this.element){t=this.get_node(t),t.children=[],t.children_d=[],n.d&&"string"==typeof(n=n.d)&&(n=JSON.parse(n)),e.isArray(n)||(n=[n]);var s=null,o={df:this._model.default_state,dat:n,par:t.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},l=function(e,t){e.data&&(e=e.data);var n,i,r,s,o=e.dat,l=e.par,c=[],d=[],h=[],u=e.df,f=e.t_id,p=e.t_cnt,g=e.m,_=g[l],m=e.sel;if(o.length&&o[0].id!==t&&o[0].parent!==t){for(i=0,r=o.length;i<r;i++)o[i].children||(o[i].children=[]),g[o[i].id.toString()]=o[i];for(i=0,r=o.length;i<r;i++)g[o[i].parent.toString()].children.push(o[i].id.toString()),_.children_d.push(o[i].id.toString());for(i=0,r=_.children.length;i<r;i++)n=function e(n,i,r){r=r?r.concat():[],i&&r.unshift(i);var s,o,l,c,d=n.id.toString(),f={id:d,text:n.text||"",icon:n.icon===t||n.icon,parent:i,parents:r,children:n.children||[],children_d:n.children_d||[],data:n.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in u)u.hasOwnProperty(s)&&(f.state[s]=u[s]);if(n&&n.data&&n.data.jstree&&n.data.jstree.icon&&(f.icon=n.data.jstree.icon),f.icon!==t&&null!==f.icon&&""!==f.icon||(f.icon=!0),n&&n.data&&(f.data=n.data,n.data.jstree))for(s in n.data.jstree)n.data.jstree.hasOwnProperty(s)&&(f.state[s]=n.data.jstree[s]);if(n&&"object"===a(n.state))for(s in n.state)n.state.hasOwnProperty(s)&&(f.state[s]=n.state[s]);if(n&&"object"===a(n.li_attr))for(s in n.li_attr)n.li_attr.hasOwnProperty(s)&&(f.li_attr[s]=n.li_attr[s]);if(f.li_attr.id||(f.li_attr.id=d),n&&"object"===a(n.a_attr))for(s in n.a_attr)n.a_attr.hasOwnProperty(s)&&(f.a_attr[s]=n.a_attr[s]);for(n&&n.children&&!0===n.children&&(f.state.loaded=!1,f.children=[],f.children_d=[]),g[f.id]=f,s=0,o=f.children.length;s<o;s++)l=e(g[f.children[s]],f.id,r),c=g[l],f.children_d.push(l),c.children_d.length&&(f.children_d=f.children_d.concat(c.children_d));return delete n.data,delete n.children,g[f.id].original=n,f.state.selected&&h.push(f.id),f.id}(g[_.children[i]],l,_.parents.concat()),d.push(n),g[n].children_d.length&&(d=d.concat(g[n].children_d));for(i=0,r=_.parents.length;i<r;i++)g[_.parents[i]].children_d=g[_.parents[i]].children_d.concat(d);s={cnt:p,mod:g,sel:m,par:l,dpc:d,add:h}}else{for(i=0,r=o.length;i<r;i++)(n=function e(n,i,r){r=r?r.concat():[],i&&r.unshift(i);var s,o,l,c,d,_=!1;do{_="j"+f+"_"+ ++p}while(g[_]);d={id:!1,text:"string"==typeof n?n:"",icon:"object"!==(void 0===n?"undefined":a(n))||n.icon===t||n.icon,parent:i,parents:r,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in u)u.hasOwnProperty(s)&&(d.state[s]=u[s]);if(n&&n.id&&(d.id=n.id.toString()),n&&n.text&&(d.text=n.text),n&&n.data&&n.data.jstree&&n.data.jstree.icon&&(d.icon=n.data.jstree.icon),d.icon!==t&&null!==d.icon&&""!==d.icon||(d.icon=!0),n&&n.data&&(d.data=n.data,n.data.jstree))for(s in n.data.jstree)n.data.jstree.hasOwnProperty(s)&&(d.state[s]=n.data.jstree[s]);if(n&&"object"===a(n.state))for(s in n.state)n.state.hasOwnProperty(s)&&(d.state[s]=n.state[s]);if(n&&"object"===a(n.li_attr))for(s in n.li_attr)n.li_attr.hasOwnProperty(s)&&(d.li_attr[s]=n.li_attr[s]);if(d.li_attr.id&&!d.id&&(d.id=d.li_attr.id.toString()),d.id||(d.id=_),d.li_attr.id||(d.li_attr.id=d.id),n&&"object"===a(n.a_attr))for(s in n.a_attr)n.a_attr.hasOwnProperty(s)&&(d.a_attr[s]=n.a_attr[s]);if(n&&n.children&&n.children.length){for(s=0,o=n.children.length;s<o;s++)l=e(n.children[s],d.id,r),c=g[l],d.children.push(l),c.children_d.length&&(d.children_d=d.children_d.concat(c.children_d));d.children_d=d.children_d.concat(d.children)}return n&&n.children&&!0===n.children&&(d.state.loaded=!1,d.children=[],d.children_d=[]),delete n.data,delete n.children,d.original=n,g[d.id]=d,d.state.selected&&h.push(d.id),d.id}(o[i],l,_.parents.concat()))&&(c.push(n),d.push(n),g[n].children_d.length&&(d=d.concat(g[n].children_d)));for(_.children=c,_.children_d=d,i=0,r=_.parents.length;i<r;i++)g[_.parents[i]].children_d=g[_.parents[i]].children_d.concat(d);s={cnt:p,mod:g,sel:m,par:l,dpc:d,add:h}}if("undefined"!=typeof window&&void 0!==window.document)return s;postMessage(s)},c=function(t,n){if(null!==this.element){this._cnt=t.cnt;var r,s=this._model.data;for(r in s)s.hasOwnProperty(r)&&s[r].state&&s[r].state.loading&&t.mod[r]&&(t.mod[r].state.loading=!0);if(this._model.data=t.mod,n){var a,o=t.add,l=t.sel,c=this._data.core.selected.slice();if(s=this._model.data,l.length!==c.length||e.vakata.array_unique(l.concat(c)).length!==l.length){for(r=0,a=l.length;r<a;r++)-1===e.inArray(l[r],o)&&-1===e.inArray(l[r],c)&&(s[l[r]].state.selected=!1);for(r=0,a=c.length;r<a;r++)-1===e.inArray(c[r],l)&&(s[c[r]].state.selected=!0)}}t.add.length&&(this._data.core.selected=this._data.core.selected.concat(t.add)),this.trigger("model",{nodes:t.dpc,parent:t.par}),t.par!==e.jstree.root?(this._node_changed(t.par),this.redraw()):this.redraw(!0),t.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),i.call(this,!0)}};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+l.toString()],{type:"text/javascript"}))),!this._data.core.working||r?(this._data.core.working=!0,s=new window.Worker(this._wrk),s.onmessage=e.proxy(function(e){c.call(this,e.data,!0);try{s.terminate(),s=null}catch(e){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),o.par?s.postMessage(o):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([t,n,i,!0])}catch(e){c.call(this,l(o),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else c.call(this,l(o),!1)}},_parse_model_from_html:function(n,i,r){r=r?[].concat(r):[],i&&r.unshift(i);var s,a,o,l,c,d=this._model.data,h={id:!1,text:!1,icon:!0,parent:i,parents:r,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(o in this._model.default_state)this._model.default_state.hasOwnProperty(o)&&(h.state[o]=this._model.default_state[o]);if(l=e.vakata.attributes(n,!0),e.each(l,function(t,n){if(n=e.trim(n),!n.length)return!0;h.li_attr[t]=n,"id"===t&&(h.id=n.toString())}),l=n.children("a").first(),l.length&&(l=e.vakata.attributes(l,!0),e.each(l,function(t,n){n=e.trim(n),n.length&&(h.a_attr[t]=n)})),l=n.children("a").first().length?n.children("a").first().clone():n.clone(),l.children("ins, i, ul").remove(),l=l.html(),l=e("<div />").html(l),h.text=this.settings.core.force_text?l.text():l.html(),l=n.data(),h.data=l?e.extend(!0,{},l):null,h.state.opened=n.hasClass("jstree-open"),h.state.selected=n.children("a").hasClass("jstree-clicked"),h.state.disabled=n.children("a").hasClass("jstree-disabled"),h.data&&h.data.jstree)for(o in h.data.jstree)h.data.jstree.hasOwnProperty(o)&&(h.state[o]=h.data.jstree[o]);l=n.children("a").children(".jstree-themeicon"),l.length&&(h.icon=!l.hasClass("jstree-themeicon-hidden")&&l.attr("rel")),h.state.icon!==t&&(h.icon=h.state.icon),h.icon!==t&&null!==h.icon&&""!==h.icon||(h.icon=!0),l=n.children("ul").children("li");do{c="j"+this._id+"_"+ ++this._cnt}while(d[c]);return h.id=h.li_attr.id?h.li_attr.id.toString():c,l.length?(l.each(e.proxy(function(t,n){s=this._parse_model_from_html(e(n),h.id,r),a=this._model.data[s],h.children.push(s),a.children_d.length&&(h.children_d=h.children_d.concat(a.children_d))},this)),h.children_d=h.children_d.concat(h.children)):n.hasClass("jstree-closed")&&(h.state.loaded=!1),h.li_attr.class&&(h.li_attr.class=h.li_attr.class.replace("jstree-closed","").replace("jstree-open","")),h.a_attr.class&&(h.a_attr.class=h.a_attr.class.replace("jstree-clicked","").replace("jstree-disabled","")),d[h.id]=h,h.state.selected&&this._data.core.selected.push(h.id),h.id},_parse_model_from_flat_json:function(e,n,i){i=i?i.concat():[],n&&i.unshift(n);var r,s,o,l,c=e.id.toString(),d=this._model.data,h=this._model.default_state,u={id:c,text:e.text||"",icon:e.icon===t||e.icon,parent:n,parents:i,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(r in h)h.hasOwnProperty(r)&&(u.state[r]=h[r]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(u.icon=e.data.jstree.icon),u.icon!==t&&null!==u.icon&&""!==u.icon||(u.icon=!0),e&&e.data&&(u.data=e.data,e.data.jstree))for(r in e.data.jstree)e.data.jstree.hasOwnProperty(r)&&(u.state[r]=e.data.jstree[r]);if(e&&"object"===a(e.state))for(r in e.state)e.state.hasOwnProperty(r)&&(u.state[r]=e.state[r]);if(e&&"object"===a(e.li_attr))for(r in e.li_attr)e.li_attr.hasOwnProperty(r)&&(u.li_attr[r]=e.li_attr[r]);if(u.li_attr.id||(u.li_attr.id=c),e&&"object"===a(e.a_attr))for(r in e.a_attr)e.a_attr.hasOwnProperty(r)&&(u.a_attr[r]=e.a_attr[r]);for(e&&e.children&&!0===e.children&&(u.state.loaded=!1,u.children=[],u.children_d=[]),d[u.id]=u,r=0,s=u.children.length;r<s;r++)o=this._parse_model_from_flat_json(d[u.children[r]],u.id,i),l=d[o],u.children_d.push(o),l.children_d.length&&(u.children_d=u.children_d.concat(l.children_d));return delete e.data,delete e.children,d[u.id].original=e,u.state.selected&&this._data.core.selected.push(u.id),u.id},_parse_model_from_json:function(e,n,i){i=i?i.concat():[],n&&i.unshift(n);var r,s,o,l,c,d=!1,h=this._model.data,u=this._model.default_state;do{d="j"+this._id+"_"+ ++this._cnt}while(h[d]);c={id:!1,text:"string"==typeof e?e:"",icon:"object"!==(void 0===e?"undefined":a(e))||e.icon===t||e.icon,parent:n,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(r in u)u.hasOwnProperty(r)&&(c.state[r]=u[r]);if(e&&e.id&&(c.id=e.id.toString()),e&&e.text&&(c.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(c.icon=e.data.jstree.icon),c.icon!==t&&null!==c.icon&&""!==c.icon||(c.icon=!0),e&&e.data&&(c.data=e.data,e.data.jstree))for(r in e.data.jstree)e.data.jstree.hasOwnProperty(r)&&(c.state[r]=e.data.jstree[r]);if(e&&"object"===a(e.state))for(r in e.state)e.state.hasOwnProperty(r)&&(c.state[r]=e.state[r]);if(e&&"object"===a(e.li_attr))for(r in e.li_attr)e.li_attr.hasOwnProperty(r)&&(c.li_attr[r]=e.li_attr[r]);if(c.li_attr.id&&!c.id&&(c.id=c.li_attr.id.toString()),c.id||(c.id=d),c.li_attr.id||(c.li_attr.id=c.id),e&&"object"===a(e.a_attr))for(r in e.a_attr)e.a_attr.hasOwnProperty(r)&&(c.a_attr[r]=e.a_attr[r]);if(e&&e.children&&e.children.length){for(r=0,s=e.children.length;r<s;r++)o=this._parse_model_from_json(e.children[r],c.id,i),l=h[o],c.children.push(o),l.children_d.length&&(c.children_d=c.children_d.concat(l.children_d));c.children_d=c.children_d.concat(c.children)}return e&&e.children&&!0===e.children&&(c.state.loaded=!1,c.children=[],c.children_d=[]),delete e.data,delete e.children,c.original=e,h[c.id]=c,c.state.selected&&this._data.core.selected.push(c.id),c.id},_redraw:function(){var t,n,i,r=this._model.force_full_redraw?this._model.data[e.jstree.root].children.concat([]):this._model.changed.concat([]),s=c.createElement("UL"),a=this._data.core.focused;for(n=0,i=r.length;n<i;n++)(t=this.redraw_node(r[n],!0,this._model.force_full_redraw))&&this._model.force_full_redraw&&s.appendChild(t);this._model.force_full_redraw&&(s.className=this.get_container_ul()[0].className,s.setAttribute("role","group"),this.element.empty().append(s)),null!==a&&(t=this.get_node(a,!0),t&&t.length&&t.children(".jstree-anchor")[0]!==c.activeElement?t.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:r})},redraw:function(e){e&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(t){var n=this.get_node(t),i=!1,r=!1,s=!1,a=c;if(!n)return!1;if(n.id===e.jstree.root)return this.redraw(!0);if(!(t=this.get_node(t,!0))||!t.length)return!1;if(t.children(".jstree-children").remove(),t=t[0],n.children.length&&n.state.loaded){for(s=a.createElement("UL"),s.setAttribute("role","group"),s.className="jstree-children",i=0,r=n.children.length;i<r;i++)s.appendChild(this.redraw_node(n.children[i],!0,!0));t.appendChild(s)}},redraw_node:function(t,n,i,r){var s=this.get_node(t),a=!1,o=!1,l=!1,d=!1,h=!1,u=!1,f="",p=c,g=this._model.data,_=!1,m=null,v=0,y=0,b=!1,j=!1;if(!s)return!1;if(s.id===e.jstree.root)return this.redraw(!0);if(n=n||0===s.children.length,t=c.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(s.id[0])?"\\3"+s.id[0]+" "+s.id.substr(1).replace(e.jstree.idregex,"\\$&"):s.id.replace(e.jstree.idregex,"\\$&"))):c.getElementById(s.id))t=e(t),i||(a=t.parent().parent()[0],a===this.element[0]&&(a=null),o=t.index()),n||!s.children.length||t.children(".jstree-children").length||(n=!0),n||(l=t.children(".jstree-children")[0]),_=t.children(".jstree-anchor")[0]===c.activeElement,t.remove();else if(n=!0,!i){if(!(null===(a=s.parent!==e.jstree.root?e("#"+s.parent.replace(e.jstree.idregex,"\\$&"),this.element)[0]:null)||a&&g[s.parent].state.opened))return!1;o=e.inArray(s.id,null===a?g[e.jstree.root].children:g[s.parent].children)}t=this._data.core.node.cloneNode(!0),f="jstree-node ";for(d in s.li_attr)if(s.li_attr.hasOwnProperty(d)){if("id"===d)continue;"class"!==d?t.setAttribute(d,s.li_attr[d]):f+=s.li_attr[d]}for(s.a_attr.id||(s.a_attr.id=s.id+"_anchor"),t.setAttribute("aria-selected",!!s.state.selected),t.setAttribute("aria-level",s.parents.length),t.setAttribute("aria-labelledby",s.a_attr.id),s.state.disabled&&t.setAttribute("aria-disabled",!0),d=0,h=s.children.length;d<h;d++)if(!g[s.children[d]].state.hidden){b=!0;break}if(null!==s.parent&&g[s.parent]&&!s.state.hidden&&(d=e.inArray(s.id,g[s.parent].children),j=s.id,-1!==d))for(d++,h=g[s.parent].children.length;d<h&&(g[g[s.parent].children[d]].state.hidden||(j=g[s.parent].children[d]),j===s.id);d++);s.state.hidden&&(f+=" jstree-hidden"),s.state.loaded&&!b?f+=" jstree-leaf":(f+=s.state.opened&&s.state.loaded?" jstree-open":" jstree-closed",t.setAttribute("aria-expanded",s.state.opened&&s.state.loaded)),j===s.id&&(f+=" jstree-last"),t.id=s.id,t.className=f,f=(s.state.selected?" jstree-clicked":"")+(s.state.disabled?" jstree-disabled":"");for(h in s.a_attr)if(s.a_attr.hasOwnProperty(h)){if("href"===h&&"#"===s.a_attr[h])continue;"class"!==h?t.childNodes[1].setAttribute(h,s.a_attr[h]):f+=" "+s.a_attr[h]}if(f.length&&(t.childNodes[1].className="jstree-anchor "+f),(s.icon&&!0!==s.icon||!1===s.icon)&&(!1===s.icon?t.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===s.icon.indexOf("/")&&-1===s.icon.indexOf(".")?t.childNodes[1].childNodes[0].className+=" "+s.icon+" jstree-themeicon-custom":(t.childNodes[1].childNodes[0].style.backgroundImage='url("'+s.icon+'")',t.childNodes[1].childNodes[0].style.backgroundPosition="center center",t.childNodes[1].childNodes[0].style.backgroundSize="auto",t.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?t.childNodes[1].appendChild(p.createTextNode(s.text)):t.childNodes[1].innerHTML+=s.text,n&&s.children.length&&(s.state.opened||r)&&s.state.loaded){for(u=p.createElement("UL"),u.setAttribute("role","group"),u.className="jstree-children",d=0,h=s.children.length;d<h;d++)u.appendChild(this.redraw_node(s.children[d],n,!0));t.appendChild(u)}if(l&&t.appendChild(l),!i){for(a||(a=this.element[0]),d=0,h=a.childNodes.length;d<h;d++)if(a.childNodes[d]&&a.childNodes[d].className&&-1!==a.childNodes[d].className.indexOf("jstree-children")){m=a.childNodes[d];break}m||(m=p.createElement("UL"),m.setAttribute("role","group"),m.className="jstree-children",a.appendChild(m)),a=m,o<a.childNodes.length?a.insertBefore(t,a.childNodes[o]):a.appendChild(t),_&&(v=this.element[0].scrollTop,y=this.element[0].scrollLeft,t.childNodes[1].focus(),this.element[0].scrollTop=v,this.element[0].scrollLeft=y)}return s.state.opened&&!s.state.loaded&&(s.state.opened=!1,setTimeout(e.proxy(function(){this.open_node(s.id,!1,0)},this),0)),t},open_node:function(n,i,r){var s,a,o,l;if(e.isArray(n)){for(n=n.slice(),s=0,a=n.length;s<a;s++)this.open_node(n[s],i,r);return!0}return!(!(n=this.get_node(n))||n.id===e.jstree.root)&&(r=r===t?this.settings.core.animation:r,this.is_closed(n)?this.is_loaded(n)?(o=this.get_node(n,!0),l=this,o.length&&(r&&o.children(".jstree-children").length&&o.children(".jstree-children").stop(!0,!0),n.children.length&&!this._firstChild(o.children(".jstree-children")[0])&&this.draw_children(n),r?(this.trigger("before_open",{node:n}),o.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(r,function(){this.style.display="",l.element&&l.trigger("after_open",{node:n})})):(this.trigger("before_open",{node:n}),o[0].className=o[0].className.replace("jstree-closed","jstree-open"),o[0].setAttribute("aria-expanded",!0))),n.state.opened=!0,i&&i.call(this,n,!0),o.length||this.trigger("before_open",{node:n}),this.trigger("open_node",{node:n}),r&&o.length||this.trigger("after_open",{node:n}),!0):this.is_loading(n)?setTimeout(e.proxy(function(){this.open_node(n,i,r)},this),500):void this.load_node(n,function(e,t){return t?this.open_node(e,i,r):!!i&&i.call(this,e,!1)}):(i&&i.call(this,n,!1),!1))},_open_to:function(t){if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;var n,i,r=t.parents;for(n=0,i=r.length;n<i;n+=1)n!==e.jstree.root&&this.open_node(r[n],!1,0);return e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)},close_node:function(n,i){var r,s,a,o;if(e.isArray(n)){for(n=n.slice(),r=0,s=n.length;r<s;r++)this.close_node(n[r],i);return!0}return!(!(n=this.get_node(n))||n.id===e.jstree.root)&&(!this.is_closed(n)&&(i=i===t?this.settings.core.animation:i,a=this,o=this.get_node(n,!0),n.state.opened=!1,this.trigger("close_node",{node:n}),void(o.length?i?o.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(i,function(){this.style.display="",o.children(".jstree-children").remove(),a.element&&a.trigger("after_close",{node:n})}):(o[0].className=o[0].className.replace("jstree-open","jstree-closed"),o.attr("aria-expanded",!1).children(".jstree-children").remove(),this.trigger("after_close",{node:n})):this.trigger("after_close",{node:n}))))},toggle_node:function(t){var n,i;if(e.isArray(t)){for(t=t.slice(),n=0,i=t.length;n<i;n++)this.toggle_node(t[n]);return!0}return this.is_closed(t)?this.open_node(t):this.is_open(t)?this.close_node(t):void 0},open_all:function(t,n,i){if(t||(t=e.jstree.root),!(t=this.get_node(t)))return!1;var r,s,a,o=t.id===e.jstree.root?this.get_container_ul():this.get_node(t,!0);if(!o.length){for(r=0,s=t.children_d.length;r<s;r++)this.is_closed(this._model.data[t.children_d[r]])&&(this._model.data[t.children_d[r]].state.opened=!0);return this.trigger("open_all",{node:t})}i=i||o,a=this,o=this.is_closed(t)?o.find(".jstree-closed").addBack():o.find(".jstree-closed"),o.each(function(){a.open_node(this,function(e,t){t&&this.is_parent(e)&&this.open_all(e,n,i)},n||0)}),0===i.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(i)})},close_all:function(t,n){if(t||(t=e.jstree.root),!(t=this.get_node(t)))return!1;var i,r,s=t.id===e.jstree.root?this.get_container_ul():this.get_node(t,!0),a=this;for(s.length&&(s=this.is_open(t)?s.find(".jstree-open").addBack():s.find(".jstree-open"),e(s.get().reverse()).each(function(){a.close_node(this,n||0)})),i=0,r=t.children_d.length;i<r;i++)this._model.data[t.children_d[i]].state.opened=!1;this.trigger("close_all",{node:t})},is_disabled:function(e){return(e=this.get_node(e))&&e.state&&e.state.disabled},enable_node:function(t){var n,i;if(e.isArray(t)){for(t=t.slice(),n=0,i=t.length;n<i;n++)this.enable_node(t[n]);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;t.state.disabled=!1,this.get_node(t,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),this.trigger("enable_node",{node:t})},disable_node:function(t){var n,i;if(e.isArray(t)){for(t=t.slice(),n=0,i=t.length;n<i;n++)this.disable_node(t[n]);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;t.state.disabled=!0,this.get_node(t,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),this.trigger("disable_node",{node:t})},is_hidden:function(e){return e=this.get_node(e),!0===e.state.hidden},hide_node:function(t,n){var i,r;if(e.isArray(t)){for(t=t.slice(),i=0,r=t.length;i<r;i++)this.hide_node(t[i],!0);return n||this.redraw(),!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;t.state.hidden||(t.state.hidden=!0,this._node_changed(t.parent),n||this.redraw(),this.trigger("hide_node",{node:t}))},show_node:function(t,n){var i,r;if(e.isArray(t)){for(t=t.slice(),i=0,r=t.length;i<r;i++)this.show_node(t[i],!0);return n||this.redraw(),!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;t.state.hidden&&(t.state.hidden=!1,this._node_changed(t.parent),n||this.redraw(),this.trigger("show_node",{node:t}))},hide_all:function(t){var n,i=this._model.data,r=[];for(n in i)i.hasOwnProperty(n)&&n!==e.jstree.root&&!i[n].state.hidden&&(i[n].state.hidden=!0,r.push(n));return this._model.force_full_redraw=!0,t||this.redraw(),this.trigger("hide_all",{nodes:r}),r},show_all:function(t){var n,i=this._model.data,r=[];for(n in i)i.hasOwnProperty(n)&&n!==e.jstree.root&&i[n].state.hidden&&(i[n].state.hidden=!1,r.push(n));return this._model.force_full_redraw=!0,t||this.redraw(),this.trigger("show_all",{nodes:r}),r},activate_node:function(e,n){if(this.is_disabled(e))return!1;if(n&&"object"===(void 0===n?"undefined":a(n))||(n={}),this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==t?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(n.metaKey||n.ctrlKey||n.shiftKey)&&(!n.shiftKey||this._data.core.last_clicked&&this.get_parent(e)&&this.get_parent(e)===this._data.core.last_clicked.parent))if(n.shiftKey){var i,r,s=this.get_node(e).id,o=this._data.core.last_clicked.id,l=this.get_node(this._data.core.last_clicked.parent).children,c=!1;for(i=0,r=l.length;i<r;i+=1)l[i]===s&&(c=!c),l[i]===o&&(c=!c),this.is_disabled(l[i])||!c&&l[i]!==s&&l[i]!==o?this.deselect_node(l[i],!0,n):this.is_hidden(l[i])||this.select_node(l[i],!0,!1,n);this.trigger("changed",{action:"select_node",node:this.get_node(e),selected:this._data.core.selected,event:n})}else this.is_selected(e)?this.deselect_node(e,!1,n):this.select_node(e,!1,!1,n);else!this.settings.core.multiple&&(n.metaKey||n.ctrlKey||n.shiftKey)&&this.is_selected(e)?this.deselect_node(e,!1,n):(this.deselect_all(!0),this.select_node(e,!1,!1,n),this._data.core.last_clicked=this.get_node(e));this.trigger("activate_node",{node:this.get_node(e),event:n})},hover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||e.children(".jstree-hovered").length)return!1;var t=this.element.find(".jstree-hovered"),n=this.element;t&&t.length&&this.dehover_node(t),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout(function(){n.attr("aria-activedescendant",e[0].id)},0)},dehover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||!e.children(".jstree-hovered").length)return!1;e.children(".jstree-anchor").removeClass("jstree-hovered"),this.trigger("dehover_node",{node:this.get_node(e)})},select_node:function(t,n,i,r){var s,a,o;if(e.isArray(t)){for(t=t.slice(),a=0,o=t.length;a<o;a++)this.select_node(t[a],n,i,r);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;s=this.get_node(t,!0),t.state.selected||(t.state.selected=!0,this._data.core.selected.push(t.id),i||(s=this._open_to(t)),s&&s.length&&s.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:t,selected:this._data.core.selected,event:r}),n||this.trigger("changed",{action:"select_node",node:t,selected:this._data.core.selected,event:r}))},deselect_node:function(t,n,i){var r,s,a;if(e.isArray(t)){for(t=t.slice(),r=0,s=t.length;r<s;r++)this.deselect_node(t[r],n,i);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;a=this.get_node(t,!0),t.state.selected&&(t.state.selected=!1,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,t.id),a.length&&a.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:t,selected:this._data.core.selected,event:i}),n||this.trigger("changed",{action:"deselect_node",node:t,selected:this._data.core.selected,event:i}))},select_all:function(t){var n,i,r=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data[e.jstree.root].children_d.concat(),n=0,i=this._data.core.selected.length;n<i;n++)this._model.data[this._data.core.selected[n]]&&(this._model.data[this._data.core.selected[n]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),t||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:r})},deselect_all:function(e){var t,n,i=this._data.core.selected.concat([]);for(t=0,n=this._data.core.selected.length;t<n;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:i}),e||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:i})},is_selected:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.state.selected},get_selected:function(t){return t?e.map(this._data.core.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.core.selected.slice()},get_top_selected:function(t){var n,i,r,s,a=this.get_selected(!0),o={};for(n=0,i=a.length;n<i;n++)o[a[n].id]=a[n];for(n=0,i=a.length;n<i;n++)for(r=0,s=a[n].children_d.length;r<s;r++)o[a[n].children_d[r]]&&delete o[a[n].children_d[r]];a=[];for(n in o)o.hasOwnProperty(n)&&a.push(n);return t?e.map(a,e.proxy(function(e){return this.get_node(e)},this)):a},get_bottom_selected:function(t){var n,i,r=this.get_selected(!0),s=[];for(n=0,i=r.length;n<i;n++)r[n].children.length||s.push(r[n].id);return t?e.map(s,e.proxy(function(e){return this.get_node(e)},this)):s},get_state:function(){var t,n={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},/*!
     'themes' : {
     	'name' : this.get_theme(),
     	'icons' : this._data.core.themes.icons,
     	'dots' : this._data.core.themes.dots
     },
     */
selected:[]}};for(t in this._model.data)this._model.data.hasOwnProperty(t)&&t!==e.jstree.root&&(this._model.data[t].state.opened&&n.core.open.push(t),this._model.data[t].state.selected&&n.core.selected.push(t));return n},set_state:function(n,i){if(n){if(n.core&&n.core.selected&&n.core.initial_selection===t&&(n.core.initial_selection=this._data.core.selected.concat([]).sort().join(",")),n.core){var r,s;if(n.core.open)return e.isArray(n.core.open)&&n.core.open.length?this._load_nodes(n.core.open,function(e){this.open_node(e,!1,0),delete n.core.open,this.set_state(n,i)}):(delete n.core.open,this.set_state(n,i)),!1;if(n.core.scroll)return n.core.scroll&&n.core.scroll.left!==t&&this.element.scrollLeft(n.core.scroll.left),n.core.scroll&&n.core.scroll.top!==t&&this.element.scrollTop(n.core.scroll.top),delete n.core.scroll,this.set_state(n,i),!1;if(n.core.selected)return r=this,n.core.initial_selection!==t&&n.core.initial_selection!==this._data.core.selected.concat([]).sort().join(",")||(this.deselect_all(),e.each(n.core.selected,function(e,t){r.select_node(t,!1,!0)})),delete n.core.initial_selection,delete n.core.selected,this.set_state(n,i),!1;for(s in n)n.hasOwnProperty(s)&&"core"!==s&&-1===e.inArray(s,this.settings.plugins)&&delete n[s];if(e.isEmptyObject(n.core))return delete n.core,this.set_state(n,i),!1}return!e.isEmptyObject(n)||(n=null,i&&i.call(this),this.trigger("set_state"),!1)}return!1},refresh:function(t,n){this._data.core.state=!0===n?{}:this.get_state(),n&&e.isFunction(n)&&(this._data.core.state=n.call(this,this._data.core.state)),this._cnt=0,this._model.data={},this._model.data[e.jstree.root]={id:e.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this._data.core.selected=[],this._data.core.last_clicked=null,this._data.core.focused=null;var i=this.get_container_ul()[0].className;t||(this.element.html("<ul class='"+i+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node(e.jstree.root,function(t,n){n&&(this.get_container_ul()[0].className=i,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(e.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(t){if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;var n=[],i=[],r=this._data.core.selected.concat([]);i.push(t.id),!0===t.state.opened&&n.push(t.id),this.get_node(t,!0).find(".jstree-open").each(function(){i.push(this.id),n.push(this.id)}),this._load_nodes(i,e.proxy(function(e){this.open_node(n,!1,0),this.select_node(r),this.trigger("refresh_node",{node:t,nodes:e})},this),!1,!0)},set_id:function(t,n){if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;var i,r,s=this._model.data,a=t.id;for(n=n.toString(),s[t.parent].children[e.inArray(t.id,s[t.parent].children)]=n,i=0,r=t.parents.length;i<r;i++)s[t.parents[i]].children_d[e.inArray(t.id,s[t.parents[i]].children_d)]=n;for(i=0,r=t.children.length;i<r;i++)s[t.children[i]].parent=n;for(i=0,r=t.children_d.length;i<r;i++)s[t.children_d[i]].parents[e.inArray(t.id,s[t.children_d[i]].parents)]=n;return i=e.inArray(t.id,this._data.core.selected),-1!==i&&(this._data.core.selected[i]=n),i=this.get_node(t.id,!0),i&&(i.attr("id",n),this.element.attr("aria-activedescendant")===t.id&&this.element.attr("aria-activedescendant",n)),delete s[t.id],t.id=n,t.li_attr.id=n,s[n]=t,this.trigger("set_id",{node:t,new:t.id,old:a}),!0},get_text:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.text},set_text:function(t,n){var i,r;if(e.isArray(t)){for(t=t.slice(),i=0,r=t.length;i<r;i++)this.set_text(t[i],n);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(t.text=n,this.get_node(t,!0).length&&this.redraw_node(t.id),this.trigger("set_text",{obj:t,text:n}),!0)},get_json:function(t,n,i){if(!(t=this.get_node(t||e.jstree.root)))return!1;n&&n.flat&&!i&&(i=[]);var r,s,a={id:t.id,text:t.text,icon:this.get_icon(t),li_attr:e.extend(!0,{},t.li_attr),a_attr:e.extend(!0,{},t.a_attr),state:{},data:(!n||!n.no_data)&&e.extend(!0,e.isArray(t.data)?[]:{},t.data)};if(n&&n.flat?a.parent=t.parent:a.children=[],n&&n.no_state)delete a.state;else for(r in t.state)t.state.hasOwnProperty(r)&&(a.state[r]=t.state[r]);if(n&&n.no_li_attr&&delete a.li_attr,n&&n.no_a_attr&&delete a.a_attr,n&&n.no_id&&(delete a.id,a.li_attr&&a.li_attr.id&&delete a.li_attr.id,a.a_attr&&a.a_attr.id&&delete a.a_attr.id),n&&n.flat&&t.id!==e.jstree.root&&i.push(a),!n||!n.no_children)for(r=0,s=t.children.length;r<s;r++)n&&n.flat?this.get_json(t.children[r],n,i):a.children.push(this.get_json(t.children[r],n));return n&&n.flat?i:t.id===e.jstree.root?a.children:a},create_node:function(n,i,r,s,a){if(null===n&&(n=e.jstree.root),!(n=this.get_node(n)))return!1;if(r=r===t?"last":r,!r.toString().match(/^(before|after)$/)&&!a&&!this.is_loaded(n))return this.load_node(n,function(){this.create_node(n,i,r,s,!0)});i||(i={text:this.get_string("New node")}),i="string"==typeof i?{text:i}:e.extend(!0,{},i),i.text===t&&(i.text=this.get_string("New node"));var o,l,c,d;switch(n.id===e.jstree.root&&("before"===r&&(r="first"),"after"===r&&(r="last")),r){case"before":o=this.get_node(n.parent),r=e.inArray(n.id,o.children),n=o;break;case"after":o=this.get_node(n.parent),r=e.inArray(n.id,o.children)+1,n=o;break;case"inside":case"first":r=0;break;case"last":r=n.children.length;break;default:r||(r=0)}if(r>n.children.length&&(r=n.children.length),i.id||(i.id=!0),!this.check("create_node",i,n,r))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!0===i.id&&delete i.id,!(i=this._parse_model_from_json(i,n.id,n.parents.concat())))return!1;for(o=this.get_node(i),l=[],l.push(i),l=l.concat(o.children_d),this.trigger("model",{nodes:l,parent:n.id}),n.children_d=n.children_d.concat(l),c=0,d=n.parents.length;c<d;c++)this._model.data[n.parents[c]].children_d=this._model.data[n.parents[c]].children_d.concat(l);for(i=o,o=[],c=0,d=n.children.length;c<d;c++)o[c>=r?c+1:c]=n.children[c];return o[r]=i.id,n.children=o,this.redraw_node(n,!0),this.trigger("create_node",{node:this.get_node(i),parent:n.id,position:r}),s&&s.call(this,this.get_node(i)),i.id},rename_node:function(t,n){var i,r,s;if(e.isArray(t)){for(t=t.slice(),i=0,r=t.length;i<r;i++)this.rename_node(t[i],n);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(s=t.text,this.check("rename_node",t,this.get_parent(t),n)?(this.set_text(t,n),this.trigger("rename_node",{node:t,text:n,old:s}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1))},delete_node:function(t){var n,i,r,s,a,o,l,c,d,h,u,f;if(e.isArray(t)){for(t=t.slice(),n=0,i=t.length;n<i;n++)this.delete_node(t[n]);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;if(r=this.get_node(t.parent),s=e.inArray(t.id,r.children),h=!1,!this.check("delete_node",t,r,s))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(-1!==s&&(r.children=e.vakata.array_remove(r.children,s)),a=t.children_d.concat([]),a.push(t.id),o=0,l=t.parents.length;o<l;o++)this._model.data[t.parents[o]].children_d=e.vakata.array_filter(this._model.data[t.parents[o]].children_d,function(t){return-1===e.inArray(t,a)});for(c=0,d=a.length;c<d;c++)if(this._model.data[a[c]].state.selected){h=!0;break}for(h&&(this._data.core.selected=e.vakata.array_filter(this._data.core.selected,function(t){return-1===e.inArray(t,a)})),this.trigger("delete_node",{node:t,parent:r.id}),h&&this.trigger("changed",{action:"delete_node",node:t,selected:this._data.core.selected,parent:r.id}),c=0,d=a.length;c<d;c++)delete this._model.data[a[c]];return-1!==e.inArray(this._data.core.focused,a)&&(this._data.core.focused=null,u=this.element[0].scrollTop,f=this.element[0].scrollLeft,r.id===e.jstree.root?this._model.data[e.jstree.root].children[0]&&this.get_node(this._model.data[e.jstree.root].children[0],!0).children(".jstree-anchor").focus():this.get_node(r,!0).children(".jstree-anchor").focus(),this.element[0].scrollTop=u,this.element[0].scrollLeft=f),this.redraw_node(r,!0),!0},check:function(t,n,i,r,s){n=n&&n.id?n:this.get_node(n),i=i&&i.id?i:this.get_node(i);var a=t.match(/^move_node|copy_node|create_node$/i)?i:n,o=this.settings.core.check_callback;return"move_node"!==t&&"copy_node"!==t||s&&s.is_multi||n.id!==i.id&&("move_node"!==t||e.inArray(n.id,i.children)!==r)&&-1===e.inArray(i.id,n.children_d)?(a&&a.data&&(a=a.data),a&&a.functions&&(!1===a.functions[t]||!0===a.functions[t])?(!1===a.functions[t]&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+t,data:JSON.stringify({chk:t,pos:r,obj:!(!n||!n.id)&&n.id,par:!(!i||!i.id)&&i.id})}),a.functions[t]):!(!1===o||e.isFunction(o)&&!1===o.call(this,t,n,i,r,s)||o&&!1===o[t])||(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+t,data:JSON.stringify({chk:t,pos:r,obj:!(!n||!n.id)&&n.id,par:!(!i||!i.id)&&i.id})},!1)):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:t,pos:r,obj:!(!n||!n.id)&&n.id,par:!(!i||!i.id)&&i.id})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(n,i,r,s,a,o,l){var c,d,h,u,f,p,g,_,m,v,y,b,j,x;if(i=this.get_node(i),r=r===t?0:r,!i)return!1;if(!r.toString().match(/^(before|after)$/)&&!a&&!this.is_loaded(i))return this.load_node(i,function(){this.move_node(n,i,r,s,!0,!1,l)});if(e.isArray(n)){if(1!==n.length){for(c=0,d=n.length;c<d;c++)(m=this.move_node(n[c],i,r,s,a,!1,l))&&(i=m,r="after");return this.redraw(),!0}n=n[0]}if(!(n=n&&n.id?n:this.get_node(n))||n.id===e.jstree.root)return!1;if(h=(n.parent||e.jstree.root).toString(),f=r.toString().match(/^(before|after)$/)&&i.id!==e.jstree.root?this.get_node(i.parent):i,p=l||(this._model.data[n.id]?this:e.jstree.reference(n.id)),g=!p||!p._id||this._id!==p._id,u=p&&p._id&&h&&p._model.data[h]&&p._model.data[h].children?e.inArray(n.id,p._model.data[h].children):-1,p&&p._id&&(n=p._model.data[n.id]),g)return!!(m=this.copy_node(n,i,r,s,a,!1,l))&&(p&&p.delete_node(n),m);switch(i.id===e.jstree.root&&("before"===r&&(r="first"),"after"===r&&(r="last")),r){case"before":r=e.inArray(i.id,f.children);break;case"after":r=e.inArray(i.id,f.children)+1;break;case"inside":case"first":r=0;break;case"last":r=f.children.length;break;default:r||(r=0)}if(r>f.children.length&&(r=f.children.length),!this.check("move_node",n,f,r,{core:!0,origin:l,is_multi:p&&p._id&&p._id!==this._id,is_foreign:!p||!p._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(n.parent===f.id){for(_=f.children.concat(),m=e.inArray(n.id,_),-1!==m&&(_=e.vakata.array_remove(_,m),r>m&&r--),m=[],v=0,y=_.length;v<y;v++)m[v>=r?v+1:v]=_[v];m[r]=n.id,f.children=m,this._node_changed(f.id),this.redraw(f.id===e.jstree.root)}else{for(m=n.children_d.concat(),m.push(n.id),v=0,y=n.parents.length;v<y;v++){for(_=[],x=p._model.data[n.parents[v]].children_d,b=0,j=x.length;b<j;b++)-1===e.inArray(x[b],m)&&_.push(x[b]);p._model.data[n.parents[v]].children_d=_}for(p._model.data[h].children=e.vakata.array_remove_item(p._model.data[h].children,n.id),v=0,y=f.parents.length;v<y;v++)this._model.data[f.parents[v]].children_d=this._model.data[f.parents[v]].children_d.concat(m);for(_=[],v=0,y=f.children.length;v<y;v++)_[v>=r?v+1:v]=f.children[v];for(_[r]=n.id,f.children=_,f.children_d.push(n.id),f.children_d=f.children_d.concat(n.children_d),n.parent=f.id,m=f.parents.concat(),m.unshift(f.id),x=n.parents.length,n.parents=m,m=m.concat(),v=0,y=n.children_d.length;v<y;v++)this._model.data[n.children_d[v]].parents=this._model.data[n.children_d[v]].parents.slice(0,-1*x),Array.prototype.push.apply(this._model.data[n.children_d[v]].parents,m);h!==e.jstree.root&&f.id!==e.jstree.root||(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(h),this._node_changed(f.id)),o||this.redraw()}return s&&s.call(this,n,f,r),this.trigger("move_node",{node:n,parent:f.id,position:r,old_parent:h,old_position:u,is_multi:p&&p._id&&p._id!==this._id,is_foreign:!p||!p._id,old_instance:p,new_instance:this}),n.id},copy_node:function(n,i,r,s,a,o,l){var c,d,h,u,f,p,g,_,m,v;if(i=this.get_node(i),r=r===t?0:r,!i)return!1;if(!r.toString().match(/^(before|after)$/)&&!a&&!this.is_loaded(i))return this.load_node(i,function(){this.copy_node(n,i,r,s,!0,!1,l)});if(e.isArray(n)){if(1!==n.length){for(c=0,d=n.length;c<d;c++)(u=this.copy_node(n[c],i,r,s,a,!0,l))&&(i=u,r="after");return this.redraw(),!0}n=n[0]}if(!(n=n&&n.id?n:this.get_node(n))||n.id===e.jstree.root)return!1;switch(_=(n.parent||e.jstree.root).toString(),m=r.toString().match(/^(before|after)$/)&&i.id!==e.jstree.root?this.get_node(i.parent):i,v=l||(this._model.data[n.id]?this:e.jstree.reference(n.id)),!v||!v._id||this._id!==v._id,v&&v._id&&(n=v._model.data[n.id]),i.id===e.jstree.root&&("before"===r&&(r="first"),"after"===r&&(r="last")),r){case"before":r=e.inArray(i.id,m.children);break;case"after":r=e.inArray(i.id,m.children)+1;break;case"inside":case"first":r=0;break;case"last":r=m.children.length;break;default:r||(r=0)}if(r>m.children.length&&(r=m.children.length),!this.check("copy_node",n,m,r,{core:!0,origin:l,is_multi:v&&v._id&&v._id!==this._id,is_foreign:!v||!v._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!(g=v?v.get_json(n,{no_id:!0,no_data:!0,no_state:!0}):n))return!1;if(!0===g.id&&delete g.id,!(g=this._parse_model_from_json(g,m.id,m.parents.concat())))return!1;for(u=this.get_node(g),n&&n.state&&!1===n.state.loaded&&(u.state.loaded=!1),h=[],h.push(g),h=h.concat(u.children_d),this.trigger("model",{nodes:h,parent:m.id}),f=0,p=m.parents.length;f<p;f++)this._model.data[m.parents[f]].children_d=this._model.data[m.parents[f]].children_d.concat(h);for(h=[],f=0,p=m.children.length;f<p;f++)h[f>=r?f+1:f]=m.children[f];return h[r]=u.id,m.children=h,m.children_d.push(u.id),m.children_d=m.children_d.concat(u.children_d),m.id===e.jstree.root&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(m.id),o||this.redraw(m.id===e.jstree.root),s&&s.call(this,u,m,r),this.trigger("copy_node",{node:u,original:n,parent:m.id,position:r,old_parent:_,old_position:v&&v._id&&_&&v._model.data[_]&&v._model.data[_].children?e.inArray(n.id,v._model.data[_].children):-1,is_multi:v&&v._id&&v._id!==this._id,is_foreign:!v||!v._id,old_instance:v,new_instance:this}),u.id},cut:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var n,a,o,l=[];for(a=0,o=t.length;a<o;a++)(n=this.get_node(t[a]))&&n.id&&n.id!==e.jstree.root&&l.push(n);if(!l.length)return!1;i=l,s=this,r="move_node",this.trigger("cut",{node:t})},copy:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var n,a,o,l=[];for(a=0,o=t.length;a<o;a++)(n=this.get_node(t[a]))&&n.id&&n.id!==e.jstree.root&&l.push(n);if(!l.length)return!1;i=l,s=this,r="copy_node",this.trigger("copy",{node:t})},get_buffer:function(){return{mode:r,node:i,inst:s}},can_paste:function(){return!1!==r&&!1!==i},paste:function(e,t){if(!((e=this.get_node(e))&&r&&r.match(/^(copy_node|move_node)$/)&&i))return!1;this[r](i,e,t,!1,!1,!1,s)&&this.trigger("paste",{parent:e.id,node:i,mode:r}),i=!1,r=!1,s=!1},clear_buffer:function(){i=!1,r=!1,s=!1,this.trigger("clear_buffer")},edit:function(t,n,i){var r,s,a,o,l,d,h,u,f,p=!1;/*!
   oi = obj.children("i:visible"),
   ai = a.children("i:visible"),
   w1 = oi.width() * oi.length,
   w2 = ai.width() * ai.length,
   */
return!!(t=this.get_node(t))&&(this.check("edit",t,this.get_parent(t))?(f=t,n="string"==typeof n?n:t.text,this.set_text(t,""),t=this._open_to(t),f.text=n,r=this._data.core.rtl,s=this.element.width(),this._data.core.focused=f.id,a=t.children(".jstree-anchor").focus(),o=e("<span>"),l=n,d=e("<div />",{css:{position:"absolute",top:"-200px",left:r?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),h=e("<input />",{value:l,class:"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:e.proxy(function(n){n.stopImmediatePropagation(),n.preventDefault();var r,s=o.children(".jstree-rename-input"),c=s.val(),u=this.settings.core.force_text;""===c&&(c=l),d.remove(),o.replaceWith(a),o.remove(),l=u?l:e("<div></div>").append(e.parseHTML(l)).html(),this.set_text(t,l),r=!!this.rename_node(t,u?e("<div></div>").text(c).text():e("<div></div>").append(e.parseHTML(c)).html()),r||this.set_text(t,l),this._data.core.focused=f.id,setTimeout(e.proxy(function(){var e=this.get_node(f.id,!0);e.length&&(this._data.core.focused=f.id,e.children(".jstree-anchor").focus())},this),0),i&&i.call(this,f,r,p),h=null},this),keydown:function(e){var t=e.which;27===t&&(p=!0,this.value=l),27!==t&&13!==t&&37!==t&&38!==t&&39!==t&&40!==t&&32!==t||e.stopImmediatePropagation(),27!==t&&13!==t||(e.preventDefault(),this.blur())},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(e){h.width(Math.min(d.text("pW"+this.value).width(),s))},keypress:function(e){if(13===e.which)return!1}}),u={fontFamily:a.css("fontFamily")||"",fontSize:a.css("fontSize")||"",fontWeight:a.css("fontWeight")||"",fontStyle:a.css("fontStyle")||"",fontStretch:a.css("fontStretch")||"",fontVariant:a.css("fontVariant")||"",letterSpacing:a.css("letterSpacing")||"",wordSpacing:a.css("wordSpacing")||""},o.attr("class",a.attr("class")).append(a.contents().clone()).append(h),a.replaceWith(o),d.css(u),h.css(u).width(Math.min(d.text("pW"+h[0].value).width(),s))[0].select(),void e(c).one("mousedown.jstree touchstart.jstree dnd_start.vakata",function(t){h&&t.target!==h&&e(h).blur()})):(this.settings.core.error.call(this,this._data.core.last_error),!1))},set_theme:function(t,n){if(!t)return!1;if(!0===n){var i=this.settings.core.themes.dir;i||(i=e.jstree.path+"/themes"),n=i+"/"+t+"/style.css"}n&&-1===e.inArray(n,o)&&(e("head").append('<link rel="stylesheet" href="'+n+'" type="text/css" />'),o.push(n)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=t,this.element.addClass("jstree-"+t),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+t+"-responsive"),this.trigger("set_theme",{theme:t})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(e){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=e,e&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped"),this.trigger("show_stripes")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped"),this.trigger("hide_stripes")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots"),this.trigger("show_dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots"),this.trigger("hide_dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons"),this.trigger("show_icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons"),this.trigger("hide_icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},show_ellipsis:function(){this._data.core.themes.ellipsis=!0,this.get_container_ul().addClass("jstree-ellipsis"),this.trigger("show_ellipsis")},hide_ellipsis:function(){this._data.core.themes.ellipsis=!1,this.get_container_ul().removeClass("jstree-ellipsis"),this.trigger("hide_ellipsis")},toggle_ellipsis:function(){this._data.core.themes.ellipsis?this.hide_ellipsis():this.show_ellipsis()},set_icon:function(n,i){var r,s,a,o;if(e.isArray(n)){for(n=n.slice(),r=0,s=n.length;r<s;r++)this.set_icon(n[r],i);return!0}return!(!(n=this.get_node(n))||n.id===e.jstree.root)&&(o=n.icon,n.icon=!0===i||null===i||i===t||""===i||i,a=this.get_node(n,!0).children(".jstree-anchor").children(".jstree-themeicon"),!1===i?this.hide_icon(n):!0===i||null===i||i===t||""===i?(a.removeClass("jstree-themeicon-custom "+o).css("background","").removeAttr("rel"),!1===o&&this.show_icon(n)):-1===i.indexOf("/")&&-1===i.indexOf(".")?(a.removeClass(o).css("background",""),a.addClass(i+" jstree-themeicon-custom").attr("rel",i),!1===o&&this.show_icon(n)):(a.removeClass(o).css("background",""),a.addClass("jstree-themeicon-custom").css("background","url('"+i+"') center center no-repeat").attr("rel",i),!1===o&&this.show_icon(n)),!0)},get_icon:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.icon},hide_icon:function(t){var n,i;if(e.isArray(t)){for(t=t.slice(),n=0,i=t.length;n<i;n++)this.hide_icon(t[n]);return!0}return!(!(t=this.get_node(t))||t===e.jstree.root)&&(t.icon=!1,this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0)},show_icon:function(t){var n,i,r;if(e.isArray(t)){for(t=t.slice(),n=0,i=t.length;n<i;n++)this.show_icon(t[n]);return!0}return!(!(t=this.get_node(t))||t===e.jstree.root)&&(r=this.get_node(t,!0),t.icon=!r.length||r.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),t.icon||(t.icon=!0),r.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0)}},e.vakata={},e.vakata.attributes=function(t,n){t=e(t)[0];var i=n?{}:[];return t&&t.attributes&&e.each(t.attributes,function(t,r){-1===e.inArray(r.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==r.value&&""!==e.trim(r.value)&&(n?i[r.name]=r.value:i.push(r.name))}),i},e.vakata.array_unique=function(e){var n,i,r=[],s={};for(n=0,i=e.length;n<i;n++)s[e[n]]===t&&(r.push(e[n]),s[e[n]]=!0);return r},e.vakata.array_remove=function(e,t){return e.splice(t,1),e},e.vakata.array_remove_item=function(t,n){var i=e.inArray(n,t);return-1!==i?e.vakata.array_remove(t,i):t},e.vakata.array_filter=function(e,t,n,i,r){if(e.filter)return e.filter(t,n);i=[];for(r in e)~~r+""==r+""&&r>=0&&t.call(n,e[r],+r,e)&&i.push(e[r]);return i},e.jstree.plugins.changed=function(e,t){var n=[];this.trigger=function(e,i){var r,s;if(i||(i={}),"changed"===e.replace(".jstree","")){i.changed={selected:[],deselected:[]};var a={};for(r=0,s=n.length;r<s;r++)a[n[r]]=1;for(r=0,s=i.selected.length;r<s;r++)a[i.selected[r]]?a[i.selected[r]]=2:i.changed.selected.push(i.selected[r]);for(r=0,s=n.length;r<s;r++)1===a[n[r]]&&i.changed.deselected.push(n[r]);n=i.selected.slice()}t.trigger.call(this,e,i)},this.refresh=function(e,i){return n=[],t.refresh.apply(this,arguments)}};var d=c.createElement("I");d.className="jstree-icon jstree-checkbox",d.setAttribute("role","presentation"),e.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0,cascade_to_disabled:!0,cascade_to_hidden:!0},e.jstree.plugins.checkbox=function(n,i){this.bind=function(){i.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",e.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",e.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",e.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",e.proxy(function(e,t){var n,i,r=this._model.data,s=(r[t.parent],t.nodes);for(n=0,i=s.length;n<i;n++)r[s[n]].state.checked=r[s[n]].state.checked||r[s[n]].original&&r[s[n]].original.state&&r[s[n]].original.state.checked,r[s[n]].state.checked&&this._data.checkbox.selected.push(s[n])},this)),-1===this.settings.checkbox.cascade.indexOf("up")&&-1===this.settings.checkbox.cascade.indexOf("down")||this.element.on("model.jstree",e.proxy(function(t,n){var i,r,s,a,o,l,c=this._model.data,d=c[n.parent],h=n.nodes,u=[],f=this.settings.checkbox.cascade,p=this.settings.checkbox.tie_selection;if(-1!==f.indexOf("down"))if(d.state[p?"selected":"checked"]){for(r=0,s=h.length;r<s;r++)c[h[r]].state[p?"selected":"checked"]=!0;this._data[p?"core":"checkbox"].selected=this._data[p?"core":"checkbox"].selected.concat(h)}else for(r=0,s=h.length;r<s;r++)if(c[h[r]].state[p?"selected":"checked"]){for(a=0,o=c[h[r]].children_d.length;a<o;a++)c[c[h[r]].children_d[a]].state[p?"selected":"checked"]=!0;this._data[p?"core":"checkbox"].selected=this._data[p?"core":"checkbox"].selected.concat(c[h[r]].children_d)}if(-1!==f.indexOf("up")){for(r=0,s=d.children_d.length;r<s;r++)c[d.children_d[r]].children.length||u.push(c[d.children_d[r]].parent);for(u=e.vakata.array_unique(u),a=0,o=u.length;a<o;a++)for(d=c[u[a]];d&&d.id!==e.jstree.root;){for(i=0,r=0,s=d.children.length;r<s;r++)i+=c[d.children[r]].state[p?"selected":"checked"];if(i!==s)break;d.state[p?"selected":"checked"]=!0,this._data[p?"core":"checkbox"].selected.push(d.id),(l=this.get_node(d,!0))&&l.length&&l.attr("aria-selected",!0).children(".jstree-anchor").addClass(p?"jstree-clicked":"jstree-checked"),d=this.get_node(d.parent)}}this._data[p?"core":"checkbox"].selected=e.vakata.array_unique(this._data[p?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",e.proxy(function(t,n){var i,r,s,a,o=n.node,l=this._model.data,c=this.get_node(o.parent),d=this.settings.checkbox.cascade,h=this.settings.checkbox.tie_selection,u={},f=this._data[h?"core":"checkbox"].selected;for(i=0,r=f.length;i<r;i++)u[f[i]]=!0;if(-1!==d.indexOf("down")){var p=this._cascade_new_checked_state(o.id,!0);o.children_d.concat(o.id).forEach(function(e){p.indexOf(e)>-1?u[e]=!0:delete u[e]})}if(-1!==d.indexOf("up"))for(;c&&c.id!==e.jstree.root;){for(s=0,i=0,r=c.children.length;i<r;i++)s+=l[c.children[i]].state[h?"selected":"checked"];if(s!==r)break;c.state[h?"selected":"checked"]=!0,u[c.id]=!0,(a=this.get_node(c,!0))&&a.length&&a.attr("aria-selected",!0).children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"),c=this.get_node(c.parent)}f=[];for(i in u)u.hasOwnProperty(i)&&f.push(i);this._data[h?"core":"checkbox"].selected=f},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",e.proxy(function(t,n){var i,r,s,a=this.get_node(e.jstree.root),o=this._model.data;for(i=0,r=a.children_d.length;i<r;i++)(s=o[a.children_d[i]])&&s.original&&s.original.state&&s.original.state.undetermined&&(s.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",e.proxy(function(e,t){var n,i,r,s=t.node,a=(this.get_node(s,!0),this.settings.checkbox.cascade),o=this.settings.checkbox.tie_selection,l=this._data[o?"core":"checkbox"].selected,c=s.children_d.concat(s.id);if(-1!==a.indexOf("down")){var d=this._cascade_new_checked_state(s.id,!1);l=l.filter(function(e){return-1===c.indexOf(e)||d.indexOf(e)>-1})}if(-1!==a.indexOf("up")&&-1===l.indexOf(s.id)){for(n=0,i=s.parents.length;n<i;n++)r=this._model.data[s.parents[n]],r.state[o?"selected":"checked"]=!1,r&&r.original&&r.original.state&&r.original.state.undetermined&&(r.original.state.undetermined=!1),(r=this.get_node(s.parents[n],!0))&&r.length&&r.attr("aria-selected",!1).children(".jstree-anchor").removeClass(o?"jstree-clicked":"jstree-checked");l=l.filter(function(e){return-1===s.parents.indexOf(e)})}this._data[o?"core":"checkbox"].selected=l},this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",e.proxy(function(t,n){for(var i,r,s,a,o=this.get_node(n.parent),l=this._model.data,c=this.settings.checkbox.tie_selection;o&&o.id!==e.jstree.root&&!o.state[c?"selected":"checked"];){for(s=0,i=0,r=o.children.length;i<r;i++)s+=l[o.children[i]].state[c?"selected":"checked"];if(!(r>0&&s===r))break;o.state[c?"selected":"checked"]=!0,this._data[c?"core":"checkbox"].selected.push(o.id),(a=this.get_node(o,!0))&&a.length&&a.attr("aria-selected",!0).children(".jstree-anchor").addClass(c?"jstree-clicked":"jstree-checked"),o=this.get_node(o.parent)}},this)).on("move_node.jstree",e.proxy(function(t,n){var i,r,s,a,o,l=n.is_multi,c=n.old_parent,d=this.get_node(n.parent),h=this._model.data,u=this.settings.checkbox.tie_selection;if(!l)for(i=this.get_node(c);i&&i.id!==e.jstree.root&&!i.state[u?"selected":"checked"];){for(r=0,s=0,a=i.children.length;s<a;s++)r+=h[i.children[s]].state[u?"selected":"checked"];if(!(a>0&&r===a))break;i.state[u?"selected":"checked"]=!0,this._data[u?"core":"checkbox"].selected.push(i.id),(o=this.get_node(i,!0))&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass(u?"jstree-clicked":"jstree-checked"),i=this.get_node(i.parent)}for(i=d;i&&i.id!==e.jstree.root;){for(r=0,s=0,a=i.children.length;s<a;s++)r+=h[i.children[s]].state[u?"selected":"checked"];if(r===a)i.state[u?"selected":"checked"]||(i.state[u?"selected":"checked"]=!0,this._data[u?"core":"checkbox"].selected.push(i.id),(o=this.get_node(i,!0))&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass(u?"jstree-clicked":"jstree-checked"));else{if(!i.state[u?"selected":"checked"])break;i.state[u?"selected":"checked"]=!1,this._data[u?"core":"checkbox"].selected=e.vakata.array_remove_item(this._data[u?"core":"checkbox"].selected,i.id),(o=this.get_node(i,!0))&&o.length&&o.attr("aria-selected",!1).children(".jstree-anchor").removeClass(u?"jstree-clicked":"jstree-checked")}i=this.get_node(i.parent)}},this))},this._undetermined=function(){if(null!==this.element){var n,i,r,s,a={},o=this._model.data,l=this.settings.checkbox.tie_selection,c=this._data[l?"core":"checkbox"].selected,d=[],h=this;for(n=0,i=c.length;n<i;n++)if(o[c[n]]&&o[c[n]].parents)for(r=0,s=o[c[n]].parents.length;r<s&&a[o[c[n]].parents[r]]===t;r++)o[c[n]].parents[r]!==e.jstree.root&&(a[o[c[n]].parents[r]]=!0,d.push(o[c[n]].parents[r]));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var l,c=h.get_node(this);if(c)if(c.state.loaded){for(n=0,i=c.children_d.length;n<i;n++)if(l=o[c.children_d[n]],!l.state.loaded&&l.original&&l.original.state&&l.original.state.undetermined&&!0===l.original.state.undetermined)for(a[l.id]===t&&l.id!==e.jstree.root&&(a[l.id]=!0,d.push(l.id)),r=0,s=l.parents.length;r<s;r++)a[l.parents[r]]===t&&l.parents[r]!==e.jstree.root&&(a[l.parents[r]]=!0,d.push(l.parents[r]))}else if(c.original&&c.original.state&&c.original.state.undetermined&&!0===c.original.state.undetermined)for(a[c.id]===t&&c.id!==e.jstree.root&&(a[c.id]=!0,d.push(c.id)),r=0,s=c.parents.length;r<s;r++)a[c.parents[r]]===t&&c.parents[r]!==e.jstree.root&&(a[c.parents[r]]=!0,d.push(c.parents[r]))}),this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),n=0,i=d.length;n<i;n++)o[d[n]].state[l?"selected":"checked"]||(c=this.get_node(d[n],!0))&&c.length&&c.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")}},this.redraw_node=function(t,n,r,s){if(t=i.redraw_node.apply(this,arguments)){var a,o,l=null,c=null;for(a=0,o=t.childNodes.length;a<o;a++)if(t.childNodes[a]&&t.childNodes[a].className&&-1!==t.childNodes[a].className.indexOf("jstree-anchor")){l=t.childNodes[a];break}l&&(!this.settings.checkbox.tie_selection&&this._model.data[t.id].state.checked&&(l.className+=" jstree-checked"),c=d.cloneNode(!1),this._model.data[t.id].state.checkbox_disabled&&(c.className+=" jstree-checkbox-disabled"),l.insertBefore(c,l.childNodes[0]))}return r||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)),t},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(t){t=this.get_node(t);var n,i,r=this.settings.checkbox.cascade,s=this.settings.checkbox.tie_selection,a=this._data[s?"core":"checkbox"].selected,o=this._model.data;if(!t||!0===t.state[s?"selected":"checked"]||-1===r.indexOf("undetermined")||-1===r.indexOf("down")&&-1===r.indexOf("up"))return!1;if(!t.state.loaded&&!0===t.original.state.undetermined)return!0;for(n=0,i=t.children_d.length;n<i;n++)if(-1!==e.inArray(t.children_d[n],a)||!o[t.children_d[n]].state.loaded&&o[t.children_d[n]].original.state.undetermined)return!0;return!1},this.disable_checkbox=function(t){var n,i,r;if(e.isArray(t)){for(t=t.slice(),n=0,i=t.length;n<i;n++)this.disable_checkbox(t[n]);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;r=this.get_node(t,!0),t.state.checkbox_disabled||(t.state.checkbox_disabled=!0,r&&r.length&&r.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled"),this.trigger("disable_checkbox",{node:t}))},this.enable_checkbox=function(t){var n,i,r;if(e.isArray(t)){for(t=t.slice(),n=0,i=t.length;n<i;n++)this.enable_checkbox(t[n]);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;r=this.get_node(t,!0),t.state.checkbox_disabled&&(t.state.checkbox_disabled=!1,r&&r.length&&r.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled"),this.trigger("enable_checkbox",{node:t}))},this.activate_node=function(t,n){return!e(n.target).hasClass("jstree-checkbox-disabled")&&(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||e(n.target).hasClass("jstree-checkbox"))&&(n.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!e(n.target).hasClass("jstree-checkbox")?i.activate_node.call(this,t,n):!this.is_disabled(t)&&(this.is_checked(t)?this.uncheck_node(t,n):this.check_node(t,n),void this.trigger("activate_node",{node:this.get_node(t)})))},this._cascade_new_checked_state=function(e,t){var n=this,i=this.settings.checkbox.tie_selection,r=this._model.data[e],s=[],a=[];if(!this.settings.checkbox.cascade_to_disabled&&r.state.disabled||!this.settings.checkbox.cascade_to_hidden&&r.state.hidden){var o=this.get_checked_descendants(e);r.state[i?"selected":"checked"]&&o.push(r.id),s=s.concat(o)}else{r.children&&r.children.forEach(function(e){var i=n._cascade_new_checked_state(e,t);s=s.concat(i),i.indexOf(e)>-1&&a.push(e)});var l=n.get_node(r,!0),c=a.length>0&&a.length<r.children.length;r.original&&r.original.state&&r.original.state.undetermined&&(r.original.state.undetermined=c),c?(r.state[i?"selected":"checked"]=!1,l.attr("aria-selected",!1).children(".jstree-anchor").removeClass(i?"jstree-clicked":"jstree-checked")):t&&a.length===r.children.length?(r.state[i?"selected":"checked"]=t,s.push(r.id),l.attr("aria-selected",!0).children(".jstree-anchor").addClass(i?"jstree-clicked":"jstree-checked")):(r.state[i?"selected":"checked"]=!1,l.attr("aria-selected",!1).children(".jstree-anchor").removeClass(i?"jstree-clicked":"jstree-checked"))}return s},this.get_checked_descendants=function(e){var t=this,n=t.settings.checkbox.tie_selection;return t._model.data[e].children_d.filter(function(e){return t._model.data[e].state[n?"selected":"checked"]})},this.check_node=function(t,n){if(this.settings.checkbox.tie_selection)return this.select_node(t,!1,!0,n);var i,r,s;if(e.isArray(t)){for(t=t.slice(),r=0,s=t.length;r<s;r++)this.check_node(t[r],n);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;i=this.get_node(t,!0),t.state.checked||(t.state.checked=!0,this._data.checkbox.selected.push(t.id),i&&i.length&&i.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:t,selected:this._data.checkbox.selected,event:n}))},this.uncheck_node=function(t,n){if(this.settings.checkbox.tie_selection)return this.deselect_node(t,!1,n);var i,r,s;if(e.isArray(t)){for(t=t.slice(),i=0,r=t.length;i<r;i++)this.uncheck_node(t[i],n);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;s=this.get_node(t,!0),t.state.checked&&(t.state.checked=!1,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,t.id),s.length&&s.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:t,selected:this._data.checkbox.selected,event:n}))},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var t,n;this._data.checkbox.selected.concat([]);for(this._data.checkbox.selected=this._model.data[e.jstree.root].children_d.concat(),t=0,n=this._data.checkbox.selected.length;t<n;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var e,t,n=this._data.checkbox.selected.concat([]);for(e=0,t=this._data.checkbox.selected.length;e<t;e++)this._model.data[this._data.checkbox.selected[e]]&&(this._model.data[this._data.checkbox.selected[e]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:n})},this.is_checked=function(t){return this.settings.checkbox.tie_selection?this.is_selected(t):!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.state.checked},this.get_checked=function(t){return this.settings.checkbox.tie_selection?this.get_selected(t):t?e.map(this._data.checkbox.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.checkbox.selected},this.get_top_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_top_selected(t);var n,i,r,s,a=this.get_checked(!0),o={};for(n=0,i=a.length;n<i;n++)o[a[n].id]=a[n];for(n=0,i=a.length;n<i;n++)for(r=0,s=a[n].children_d.length;r<s;r++)o[a[n].children_d[r]]&&delete o[a[n].children_d[r]];a=[];for(n in o)o.hasOwnProperty(n)&&a.push(n);return t?e.map(a,e.proxy(function(e){return this.get_node(e)},this)):a},this.get_bottom_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(t);var n,i,r=this.get_checked(!0),s=[];for(n=0,i=r.length;n<i;n++)r[n].children.length||s.push(r[n].id);return t?e.map(s,e.proxy(function(e){return this.get_node(e)},this)):s},this.load_node=function(t,n){var r,s,a;if(!e.isArray(t)&&!this.settings.checkbox.tie_selection&&(a=this.get_node(t))&&a.state.loaded)for(r=0,s=a.children_d.length;r<s;r++)this._model.data[a.children_d[r]].state.checked&&(!0,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,a.children_d[r]));return i.load_node.apply(this,arguments)},this.get_state=function(){var e=i.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection?e:(e.checkbox=this._data.checkbox.selected.slice(),e)},this.set_state=function(t,n){var r=i.set_state.apply(this,arguments);if(r&&t.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var s=this;e.each(t.checkbox,function(e,t){s.check_node(t)})}return delete t.checkbox,this.set_state(t,n),!1}return r},this.refresh=function(e,t){return this.settings.checkbox.tie_selection||(this._data.checkbox.selected=[]),i.refresh.apply(this,arguments)}},e.jstree.defaults.conditionalselect=function(){return!0},e.jstree.plugins.conditionalselect=function(e,t){this.activate_node=function(e,n){this.settings.conditionalselect.call(this,this.get_node(e),n)&&t.activate_node.call(this,e,n)}},e.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(t,n){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(t){var n=e.jstree.reference(t.reference),i=n.get_node(t.reference);n.create_node(i,{},"last",function(e){try{n.edit(e)}catch(t){setTimeout(function(){n.edit(e)},0)}})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",/*!
     "shortcut"			: 113,
     "shortcut_label"	: 'F2',
     "icon"				: "glyphicon glyphicon-leaf",
     */
action:function(t){var n=e.jstree.reference(t.reference),i=n.get_node(t.reference);n.edit(i)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(t){var n=e.jstree.reference(t.reference),i=n.get_node(t.reference);n.is_selected(i)?n.delete_node(n.get_selected()):n.delete_node(i)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(t){var n=e.jstree.reference(t.reference),i=n.get_node(t.reference);n.is_selected(i)?n.cut(n.get_top_selected()):n.cut(i)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(t){var n=e.jstree.reference(t.reference),i=n.get_node(t.reference);n.is_selected(i)?n.copy(n.get_top_selected()):n.copy(i)}},paste:{separator_before:!1,icon:!1,_disabled:function(t){return!e.jstree.reference(t.reference).can_paste()},separator_after:!1,label:"Paste",action:function(t){var n=e.jstree.reference(t.reference),i=n.get_node(t.reference);n.paste(i)}}}}}}},e.jstree.plugins.contextmenu=function(n,i){this.bind=function(){i.bind.call(this);var t,n,r=0,s=null;this.element.on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-contextmenu")},this)).on("contextmenu.jstree",".jstree-anchor",e.proxy(function(e,t){"input"!==e.target.tagName.toLowerCase()&&(e.preventDefault(),r=e.ctrlKey?+new Date:0,(t||s)&&(r=+new Date+1e4),s&&clearTimeout(s),this.is_loading(e.currentTarget)||this.show_contextmenu(e.currentTarget,e.pageX,e.pageY,e))},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){this._data.contextmenu.visible&&(!r||+new Date-r>250)&&e.vakata.context.hide(),r=0},this)).on("touchstart.jstree",".jstree-anchor",function(i){i.originalEvent&&i.originalEvent.changedTouches&&i.originalEvent.changedTouches[0]&&(t=i.originalEvent.changedTouches[0].clientX,n=i.originalEvent.changedTouches[0].clientY,s=setTimeout(function(){e(i.currentTarget).trigger("contextmenu",!0)},750))}).on("touchmove.vakata.jstree",function(e){s&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(Math.abs(t-e.originalEvent.changedTouches[0].clientX)>50||Math.abs(n-e.originalEvent.changedTouches[0].clientY)>50)&&clearTimeout(s)}).on("touchend.vakata.jstree",function(e){s&&clearTimeout(s)}),/*!
   if(!('oncontextmenu' in document.body) && ('ontouchstart' in document.body)) {
   	var el = null, tm = null;
   	this.element
   		.on("touchstart", ".jstree-anchor", function (e) {
   			el = e.currentTarget;
   			tm = +new Date();
   			$(document).one("touchend", function (e) {
   				e.target = document.elementFromPoint(e.originalEvent.targetTouches[0].pageX - window.pageXOffset, e.originalEvent.targetTouches[0].pageY - window.pageYOffset);
   				e.currentTarget = e.target;
   				tm = ((+(new Date())) - tm);
   				if(e.target === el && tm > 600 && tm < 1000) {
   					e.preventDefault();
   					$(el).trigger('contextmenu', e);
   				}
   				el = null;
   				tm = null;
   			});
   		});
   }
   */
e(c).on("context_hide.vakata.jstree",e.proxy(function(t,n){this._data.contextmenu.visible=!1,e(n.reference).removeClass("jstree-context")},this))},this.teardown=function(){this._data.contextmenu.visible&&e.vakata.context.hide(),i.teardown.call(this)},this.show_contextmenu=function(n,i,r,s){if(!(n=this.get_node(n))||n.id===e.jstree.root)return!1;var a=this.settings.contextmenu,o=this.get_node(n,!0),l=o.children(".jstree-anchor"),c=!1,d=!1;(a.show_at_node||i===t||r===t)&&(c=l.offset(),i=c.left,r=c.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(n)&&this.activate_node(n,s),d=a.items,e.isFunction(d)&&(d=d.call(this,n,e.proxy(function(e){this._show_contextmenu(n,i,r,e)},this))),e.isPlainObject(d)&&this._show_contextmenu(n,i,r,d)},this._show_contextmenu=function(t,n,i,r){var s=this.get_node(t,!0),a=s.children(".jstree-anchor");e(c).one("context_show.vakata.jstree",e.proxy(function(t,n){var i="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";e(n.element).addClass(i),a.addClass("jstree-context")},this)),this._data.contextmenu.visible=!0,e.vakata.context.show(a,{x:n,y:i},r),this.trigger("show_contextmenu",{node:t,x:n,y:i})}},function(e){var t=!1,n={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};e.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(t){e(c).triggerHandler("context_"+t+".vakata",{reference:n.reference,element:n.element,position:{x:n.position_x,y:n.position_y}})},_execute:function(t){return!(!(t=n.items[t])||t._disabled&&(!e.isFunction(t._disabled)||t._disabled({item:t,reference:n.reference,element:n.element}))||!t.action)&&t.action.call(null,{item:t,reference:n.reference,element:n.element,position:{x:n.position_x,y:n.position_y}})},_parse:function(t,i){if(!t)return!1;i||(n.html="",n.items=[]);var r,s="",a=!1;return i&&(s+="<ul>"),e.each(t,function(t,i){if(!i)return!0;n.items.push(i),!a&&i.separator_before&&(s+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),a=!1,s+="<li class='"+(i._class||"")+(!0===i._disabled||e.isFunction(i._disabled)&&i._disabled({item:i,reference:n.reference,element:n.element})?" vakata-contextmenu-disabled ":"")+"' "+(i.shortcut?" data-shortcut='"+i.shortcut+"' ":"")+">",s+="<a href='#' rel='"+(n.items.length-1)+"' "+(i.title?"title='"+i.title+"'":"")+">",e.vakata.context.settings.icons&&(s+="<i ",i.icon&&(-1!==i.icon.indexOf("/")||-1!==i.icon.indexOf(".")?s+=" style='background:url(\""+i.icon+"\") center center no-repeat' ":s+=" class='"+i.icon+"' "),s+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),s+=(e.isFunction(i.label)?i.label({item:t,reference:n.reference,element:n.element}):i.label)+(i.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+i.shortcut+'">'+(i.shortcut_label||"")+"</span>":"")+"</a>",i.submenu&&(r=e.vakata.context._parse(i.submenu,!0))&&(s+=r),s+="</li>",i.separator_after&&(s+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",a=!0)}),s=s.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),i&&(s+="</ul>"),i||(n.html=s,e.vakata.context._trigger("parse")),s.length>10&&s},_show_submenu:function(n){if(n=e(n),n.length&&n.children("ul").length){var i=n.children("ul"),r=n.offset().left,s=r+n.outerWidth(),a=n.offset().top,o=i.width(),l=i.height(),c=e(window).width()+e(window).scrollLeft(),d=e(window).height()+e(window).scrollTop();t?n[s-(o+10+n.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):n[s+o>c&&r>c-s?"addClass":"removeClass"]("vakata-context-right"),a+l+10>d&&i.css("bottom","-1px"),n.hasClass("vakata-context-right")?r<o&&i.css("margin-right",r-o):c-s<o&&i.css("margin-left",c-s-o),i.show()}},show:function(i,r,s){var a,o,l,c,d,h,u,f;switch(n.element&&n.element.length&&n.element.width(""),!0){case!r&&!i:return!1;case!!r&&!!i:n.reference=i,n.position_x=r.x,n.position_y=r.y;break;case!r&&!!i:n.reference=i,a=i.offset(),n.position_x=a.left+i.outerHeight(),n.position_y=a.top;break;case!!r&&!i:n.position_x=r.x,n.position_y=r.y}i&&!s&&e(i).data("vakata_contextmenu")&&(s=e(i).data("vakata_contextmenu")),e.vakata.context._parse(s)&&n.element.html(n.html),n.items.length&&(n.element.appendTo("body"),o=n.element,l=n.position_x,c=n.position_y,d=o.width(),h=o.height(),u=e(window).width()+e(window).scrollLeft(),f=e(window).height()+e(window).scrollTop(),t&&(l-=o.outerWidth()-e(i).outerWidth())<e(window).scrollLeft()+20&&(l=e(window).scrollLeft()+20),l+d+20>u&&(l=u-(d+20)),c+h+20>f&&(c=f-(h+20)),n.element.css({left:l,top:c}).show().find("a").first().focus().parent().addClass("vakata-context-hover"),n.is_visible=!0,e.vakata.context._trigger("show"))},hide:function(){n.is_visible&&(n.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),n.is_visible=!1,e.vakata.context._trigger("hide"))}},e(function(){t="rtl"===e("body").css("direction");var i=!1;n.element=e("<ul class='vakata-context'></ul>"),n.element.on("mouseenter","li",function(t){t.stopImmediatePropagation(),e.contains(this,t.relatedTarget)||(i&&clearTimeout(i),n.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),e(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),e.vakata.context._show_submenu(this))}).on("mouseleave","li",function(t){e.contains(this,t.relatedTarget)||e(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(t){e(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),e.vakata.context.settings.hide_onmouseleave&&(i=setTimeout(function(t){return function(){e.vakata.context.hide()}}(),e.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(t){t.preventDefault(),e(this).blur().parent().hasClass("vakata-context-disabled")||!1===e.vakata.context._execute(e(this).attr("rel"))||e.vakata.context.hide()}).on("keydown","a",function(t){var i=null;switch(t.which){case 13:case 32:t.type="click",t.preventDefault(),e(t.currentTarget).trigger(t);break;case 37:n.is_visible&&(n.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 38:n.is_visible&&(i=n.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first(),i.length||(i=n.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),i.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 39:n.is_visible&&(n.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 40:n.is_visible&&(i=n.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first(),i.length||(i=n.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),i.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 27:e.vakata.context.hide(),t.preventDefault()}}).on("keydown",function(e){e.preventDefault();var t=n.element.find(".vakata-contextmenu-shortcut-"+e.which).parent();t.parent().not(".vakata-context-disabled")&&t.click()}),e(c).on("mousedown.vakata.jstree",function(t){n.is_visible&&n.element[0]!==t.target&&!e.contains(n.element[0],t.target)&&e.vakata.context.hide()}).on("context_show.vakata.jstree",function(e,i){n.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),t&&n.element.addClass("vakata-context-rtl").css("direction","rtl"),n.element.find("ul").hide().end()})})}(e),e.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0,drag_selection:!0,touch:!0,large_drop_target:!1,large_drag_target:!1,use_html5:!1};var h,u;e.jstree.plugins.dnd=function(t,n){this.init=function(e,t){n.init.call(this,e,t),this.settings.dnd.use_html5=this.settings.dnd.use_html5&&"draggable"in c.createElement("span")},this.bind=function(){n.bind.call(this),this.element.on(this.settings.dnd.use_html5?"dragstart.jstree":"mousedown.jstree touchstart.jstree",this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",e.proxy(function(t){if(this.settings.dnd.large_drag_target&&e(t.target).closest(".jstree-node")[0]!==t.currentTarget)return!0;if("touchstart"===t.type&&(!this.settings.dnd.touch||"selected"===this.settings.dnd.touch&&!e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))return!0;var n=this.get_node(t.target),i=this.is_selected(n)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,r=i>1?i+" "+this.get_string("nodes"):this.get_text(t.currentTarget);if(this.settings.core.force_text&&(r=e.vakata.html.escape(r)),n&&n.id&&n.id!==e.jstree.root&&(1===t.which||"touchstart"===t.type||"dragstart"===t.type)&&(!0===this.settings.dnd.is_draggable||e.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,i>1?this.get_top_selected(!0):[n],t))){if(h={jstree:!0,origin:this,obj:this.get_node(n,!0),nodes:i>1?this.get_top_selected():[n.id]},u=t.currentTarget,!this.settings.dnd.use_html5)return this.element.trigger("mousedown.jstree"),e.vakata.dnd.start(t,h,'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+r+'<ins class="jstree-copy" style="display:none;">+</ins></div>');e.vakata.dnd._trigger("start",t,{helper:e(),element:u,data:h})}},this)),this.settings.dnd.use_html5&&this.element.on("dragover.jstree",function(t){return t.preventDefault(),e.vakata.dnd._trigger("move",t,{helper:e(),element:u,data:h}),!1}).on("drop.jstree",e.proxy(function(t){return t.preventDefault(),e.vakata.dnd._trigger("stop",t,{helper:e(),element:u,data:h}),!1},this))},this.redraw_node=function(e,t,i,r){if((e=n.redraw_node.apply(this,arguments))&&this.settings.dnd.use_html5)if(this.settings.dnd.large_drag_target)e.setAttribute("draggable",!0);else{var s,a,o=null;for(s=0,a=e.childNodes.length;s<a;s++)if(e.childNodes[s]&&e.childNodes[s].className&&-1!==e.childNodes[s].className.indexOf("jstree-anchor")){o=e.childNodes[s];break}o&&o.setAttribute("draggable",!0)}return e}},e(function(){var n=!1,i=!1,r=!1,s=!1,a=e('<div id="jstree-marker">&#160;</div>').hide();e(c).on("dnd_start.vakata.jstree",function(e,t){n=!1,r=!1,t&&t.data&&t.data.jstree&&a.appendTo("body")}).on("dnd_move.vakata.jstree",function(o,l){var c=l.event.target!==r.target;if(s&&(l.event&&"dragover"===l.event.type&&!c||clearTimeout(s)),l&&l.data&&l.data.jstree&&(!l.event.target.id||"jstree-marker"!==l.event.target.id)){r=l.event;var d,h,u,f,p,g,_,m,v,y,b,j,x,k,w,C,A=e.jstree.reference(l.event.target),T=!1,E=!1,$=!1;if(A&&A._data&&A._data.dnd)if(a.attr("class","jstree-"+A.get_theme()+(A.settings.core.themes.responsive?" jstree-dnd-responsive":"")),w=l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey)),l.helper.children().attr("class","jstree-"+A.get_theme()+" jstree-"+A.get_theme()+"-"+A.get_theme_variant()+" "+(A.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[w?"show":"hide"](),l.event.target!==A.element[0]&&l.event.target!==A.get_container_ul()[0]||0!==A.get_container_ul().children().length){if((T=A.settings.dnd.large_drop_target?e(l.event.target).closest(".jstree-node").children(".jstree-anchor"):e(l.event.target).closest(".jstree-anchor"))&&T.length&&T.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(E=T.offset(),$=(l.event.pageY!==t?l.event.pageY:l.event.originalEvent.pageY)-E.top,u=T.outerHeight(),g=$<u/3?["b","i","a"]:$>u-u/3?["a","i","b"]:$>u/2?["i","a","b"]:["i","b","a"],e.each(g,function(t,r){switch(r){case"b":d=E.left-6,h=E.top,f=A.get_parent(T),p=T.parent().index();break;case"i":x=A.settings.dnd.inside_pos,k=A.get_node(T.parent()),d=E.left-2,h=E.top+u/2+1,f=k.id,p="first"===x?0:"last"===x?k.children.length:Math.min(x,k.children.length);break;case"a":d=E.left-6,h=E.top+u,f=A.get_parent(T),p=T.parent().index()+1}for(_=!0,m=0,v=l.data.nodes.length;m<v;m++)if(y=l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey))?"copy_node":"move_node",b=p,"move_node"===y&&"a"===r&&l.data.origin&&l.data.origin===A&&f===A.get_parent(l.data.nodes[m])&&(j=A.get_node(f),b>e.inArray(l.data.nodes[m],j.children)&&(b-=1)),!(_=_&&(A&&A.settings&&A.settings.dnd&&!1===A.settings.dnd.check_while_dragging||A.check(y,l.data.origin&&l.data.origin!==A?l.data.origin.get_node(l.data.nodes[m]):l.data.nodes[m],f,b,{dnd:!0,ref:A.get_node(T.parent()),pos:r,origin:l.data.origin,is_multi:l.data.origin&&l.data.origin!==A,is_foreign:!l.data.origin})))){A&&A.last_error&&(i=A.last_error());break}if("i"===r&&T.parent().is(".jstree-closed")&&A.settings.dnd.open_timeout&&(l.event&&"dragover"===l.event.type&&!c||(s&&clearTimeout(s),s=setTimeout(function(e,t){return function(){e.open_node(t)}}(A,T),A.settings.dnd.open_timeout))),_)return C=A.get_node(f,!0),C.hasClass(".jstree-dnd-parent")||(e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),C.addClass("jstree-dnd-parent")),n={ins:A,par:f,pos:"i"!==r||"last"!==x||0!==p||A.is_loaded(k)?p:"last"},a.css({left:d+"px",top:h+"px"}).show(),l.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),l.event.originalEvent&&l.event.originalEvent.dataTransfer&&(l.event.originalEvent.dataTransfer.dropEffect=w?"copy":"move"),i={},g=!0,!1}),!0===g))return}else{for(_=!0,m=0,v=l.data.nodes.length;m<v&&(_=_&&A.check(l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey))?"copy_node":"move_node",l.data.origin&&l.data.origin!==A?l.data.origin.get_node(l.data.nodes[m]):l.data.nodes[m],e.jstree.root,"last",{dnd:!0,ref:A.get_node(e.jstree.root),pos:"i",origin:l.data.origin,is_multi:l.data.origin&&l.data.origin!==A,is_foreign:!l.data.origin}));m++);if(_)return n={ins:A,par:e.jstree.root,pos:"last"},a.hide(),l.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),void(l.event.originalEvent&&l.event.originalEvent.dataTransfer&&(l.event.originalEvent.dataTransfer.dropEffect=w?"copy":"move"))}e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),n=!1,l.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),l.event.originalEvent&&l.event.originalEvent.dataTransfer&&(l.event.originalEvent.dataTransfer.dropEffect="none"),a.hide()}}).on("dnd_scroll.vakata.jstree",function(e,t){t&&t.data&&t.data.jstree&&(a.hide(),n=!1,r=!1,t.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(t,o){if(e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),s&&clearTimeout(s),o&&o.data&&o.data.jstree){a.hide().detach();var l,c,d=[];if(n){for(l=0,c=o.data.nodes.length;l<c;l++)d[l]=o.data.origin?o.data.origin.get_node(o.data.nodes[l]):o.data.nodes[l];n.ins[o.data.origin&&(o.data.origin.settings.dnd.always_copy||o.data.origin.settings.dnd.copy&&(o.event.metaKey||o.event.ctrlKey))?"copy_node":"move_node"](d,n.par,n.pos,!1,!1,!1,o.data.origin)}else l=e(o.event.target).closest(".jstree"),l.length&&i&&i.error&&"check"===i.error&&(l=l.jstree(!0))&&l.settings.core.error.call(this,i);r=!1,n=!1}}).on("keyup.jstree keydown.jstree",function(t,o){(o=e.vakata.dnd._get())&&o.data&&o.data.jstree&&("keyup"===t.type&&27===t.which?(s&&clearTimeout(s),n=!1,i=!1,r=!1,s=!1,a.hide().detach(),e.vakata.dnd._clean()):(o.helper.find(".jstree-copy").first()[o.data.origin&&(o.data.origin.settings.dnd.always_copy||o.data.origin.settings.dnd.copy&&(t.metaKey||t.ctrlKey))?"show":"hide"](),r&&(r.metaKey=t.metaKey,r.ctrlKey=t.ctrlKey,e.vakata.dnd._trigger("move",r))))})}),function(e){e.vakata.html={div:e("<div />"),escape:function(t){return e.vakata.html.div.text(t).html()},strip:function(t){return e.vakata.html.div.empty().append(e.parseHTML(t)).text()}};var n={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1};e.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:50},_trigger:function(n,i,r){r===t&&(r=e.vakata.dnd._get()),r.event=i,e(c).triggerHandler("dnd_"+n+".vakata",r)},_get:function(){return{data:n.data,element:n.element,helper:n.helper}},_clean:function(){n.helper&&n.helper.remove(),n.scroll_i&&(clearInterval(n.scroll_i),n.scroll_i=!1),n={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},e(c).off("mousemove.vakata.jstree touchmove.vakata.jstree",e.vakata.dnd.drag),e(c).off("mouseup.vakata.jstree touchend.vakata.jstree",e.vakata.dnd.stop)},_scroll:function(t){if(!n.scroll_e||!n.scroll_l&&!n.scroll_t)return n.scroll_i&&(clearInterval(n.scroll_i),n.scroll_i=!1),!1;if(!n.scroll_i)return n.scroll_i=setInterval(e.vakata.dnd._scroll,100),!1;if(!0===t)return!1;var i=n.scroll_e.scrollTop(),r=n.scroll_e.scrollLeft();n.scroll_e.scrollTop(i+n.scroll_t*e.vakata.dnd.settings.scroll_speed),n.scroll_e.scrollLeft(r+n.scroll_l*e.vakata.dnd.settings.scroll_speed),i===n.scroll_e.scrollTop()&&r===n.scroll_e.scrollLeft()||e.vakata.dnd._trigger("scroll",n.scroll_e)},start:function(t,i,r){"touchstart"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=c.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),n.is_drag&&e.vakata.dnd.stop({});try{t.currentTarget.unselectable="on",t.currentTarget.onselectstart=function(){return!1},t.currentTarget.style&&(t.currentTarget.style.touchAction="none",t.currentTarget.style.msTouchAction="none",t.currentTarget.style.MozUserSelect="none")}catch(e){}return n.init_x=t.pageX,n.init_y=t.pageY,n.data=i,n.is_down=!0,n.element=t.currentTarget,n.target=t.target,n.is_touch="touchstart"===t.type,!1!==r&&(n.helper=e("<div id='vakata-dnd'></div>").html(r).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),e(c).on("mousemove.vakata.jstree touchmove.vakata.jstree",e.vakata.dnd.drag),e(c).on("mouseup.vakata.jstree touchend.vakata.jstree",e.vakata.dnd.stop),!1},drag:function(t){if("touchmove"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=c.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),n.is_down){if(!n.is_drag){if(!(Math.abs(t.pageX-n.init_x)>(n.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)||Math.abs(t.pageY-n.init_y)>(n.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)))return;n.helper&&(n.helper.appendTo("body"),n.helper_w=n.helper.outerWidth()),n.is_drag=!0,e(n.target).one("click.vakata",!1),e.vakata.dnd._trigger("start",t)}var i=!1,r=!1,s=!1,a=!1,o=!1,l=!1,d=!1,h=!1,u=!1,f=!1;return n.scroll_t=0,n.scroll_l=0,n.scroll_e=!1,e(e(t.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test(e(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var i=e(this),r=i.offset();if(this.scrollHeight>this.offsetHeight&&(r.top+i.height()-t.pageY<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=1),t.pageY-r.top<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(r.left+i.width()-t.pageX<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=1),t.pageX-r.left<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=-1)),n.scroll_t||n.scroll_l)return n.scroll_e=e(this),!1}),n.scroll_e||(i=e(c),r=e(window),s=i.height(),a=r.height(),o=i.width(),l=r.width(),d=i.scrollTop(),h=i.scrollLeft(),s>a&&t.pageY-d<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=-1),s>a&&a-(t.pageY-d)<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=1),o>l&&t.pageX-h<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=-1),o>l&&l-(t.pageX-h)<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=1),(n.scroll_t||n.scroll_l)&&(n.scroll_e=i)),n.scroll_e&&e.vakata.dnd._scroll(!0),n.helper&&(u=parseInt(t.pageY+e.vakata.dnd.settings.helper_top,10),f=parseInt(t.pageX+e.vakata.dnd.settings.helper_left,10),s&&u+25>s&&(u=s-50),o&&f+n.helper_w>o&&(f=o-(n.helper_w+2)),n.helper.css({left:f+"px",top:u+"px"})),e.vakata.dnd._trigger("move",t),!1}},stop:function(t){if("touchend"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=c.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),n.is_drag)t.target!==n.target&&e(n.target).off("click.vakata"),e.vakata.dnd._trigger("stop",t);else if("touchend"===t.type&&t.target===n.target){var i=setTimeout(function(){e(t.target).click()},100);e(t.target).one("click",function(){i&&clearTimeout(i)})}return e.vakata.dnd._clean(),!1}}}(e),e.jstree.defaults.massload=null,e.jstree.plugins.massload=function(t,n){this.init=function(e,t){this._data.massload={},n.init.call(this,e,t)},this._load_nodes=function(t,i,r,s){var o,l,c,d=this.settings.massload,h=(JSON.stringify(t),[]),u=this._model.data;if(!r){for(o=0,l=t.length;o<l;o++)u[t[o]]&&(u[t[o]].state.loaded||u[t[o]].state.failed)&&!s||(h.push(t[o]),(c=this.get_node(t[o],!0))&&c.length&&c.addClass("jstree-loading").attr("aria-busy",!0));if(this._data.massload={},h.length){if(e.isFunction(d))return d.call(this,h,e.proxy(function(e){var a,o;if(e)for(a in e)e.hasOwnProperty(a)&&(this._data.massload[a]=e[a]);for(a=0,o=t.length;a<o;a++)(c=this.get_node(t[a],!0))&&c.length&&c.removeClass("jstree-loading").attr("aria-busy",!1);n._load_nodes.call(this,t,i,r,s)},this));if("object"===(void 0===d?"undefined":a(d))&&d&&d.url)return d=e.extend(!0,{},d),e.isFunction(d.url)&&(d.url=d.url.call(this,h)),e.isFunction(d.data)&&(d.data=d.data.call(this,h)),e.ajax(d).done(e.proxy(function(e,a,o){var l,d;if(e)for(l in e)e.hasOwnProperty(l)&&(this._data.massload[l]=e[l]);for(l=0,d=t.length;l<d;l++)(c=this.get_node(t[l],!0))&&c.length&&c.removeClass("jstree-loading").attr("aria-busy",!1);n._load_nodes.call(this,t,i,r,s)},this)).fail(e.proxy(function(e){n._load_nodes.call(this,t,i,r,s)},this))}}return n._load_nodes.call(this,t,i,r,s)},this._load_node=function(t,i){var r,s=this._data.massload[t.id],a=null;return s?(a=this["string"==typeof s?"_append_html_data":"_append_json_data"](t,"string"==typeof s?e(e.parseHTML(s)).filter(function(){return 3!==this.nodeType}):s,function(e){i.call(this,e)}),r=this.get_node(t.id,!0),r&&r.length&&r.removeClass("jstree-loading").attr("aria-busy",!1),delete this._data.massload[t.id],a):n._load_node.call(this,t,i)}},e.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,show_only_matches_children:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},e.jstree.plugins.search=function(n,i){this.bind=function(){i.bind.call(this),this._data.search.str="",this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=!1,this._data.search.smc=!1,this._data.search.hdn=[],this.element.on("search.jstree",e.proxy(function(t,n){if(this._data.search.som&&n.res.length){var i,r,s,a,o=this._model.data,l=[];for(i=0,r=n.res.length;i<r;i++)if(o[n.res[i]]&&!o[n.res[i]].state.hidden&&(l.push(n.res[i]),l=l.concat(o[n.res[i]].parents),this._data.search.smc))for(s=0,a=o[n.res[i]].children_d.length;s<a;s++)o[o[n.res[i]].children_d[s]]&&!o[o[n.res[i]].children_d[s]].state.hidden&&l.push(o[n.res[i]].children_d[s]);l=e.vakata.array_remove_item(e.vakata.array_unique(l),e.jstree.root),this._data.search.hdn=this.hide_all(!0),this.show_node(l,!0),this.redraw(!0)}},this)).on("clear_search.jstree",e.proxy(function(e,t){this._data.search.som&&t.res.length&&(this.show_node(this._data.search.hdn,!0),this.redraw(!0))},this))},this.search=function(n,i,r,s,a,o){if(!1===n||""===e.trim(n.toString()))return this.clear_search();s=this.get_node(s),s=s&&s.id?s.id:null,n=n.toString();var l,c,d=this.settings.search,h=!!d.ajax&&d.ajax,u=this._model.data,f=null,p=[],g=[];if(this._data.search.res.length&&!a&&this.clear_search(),r===t&&(r=d.show_only_matches),o===t&&(o=d.show_only_matches_children),!i&&!1!==h)return e.isFunction(h)?h.call(this,n,e.proxy(function(t){t&&t.d&&(t=t.d),this._load_nodes(e.isArray(t)?e.vakata.array_unique(t):[],function(){this.search(n,!0,r,s,a,o)})},this),s):(h=e.extend({},h),h.data||(h.data={}),h.data.str=n,s&&(h.data.inside=s),this._data.search.lastRequest&&this._data.search.lastRequest.abort(),this._data.search.lastRequest=e.ajax(h).fail(e.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(h)},this.settings.core.error.call(this,this._data.core.last_error)},this)).done(e.proxy(function(t){t&&t.d&&(t=t.d),this._load_nodes(e.isArray(t)?e.vakata.array_unique(t):[],function(){this.search(n,!0,r,s,a,o)})},this)),this._data.search.lastRequest);if(a||(this._data.search.str=n,this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=r,this._data.search.smc=o),f=new e.vakata.search(n,!0,{caseSensitive:d.case_sensitive,fuzzy:d.fuzzy}),e.each(u[s||e.jstree.root].children_d,function(e,t){var i=u[t];i.text&&!i.state.hidden&&(!d.search_leaves_only||i.state.loaded&&0===i.children.length)&&(d.search_callback&&d.search_callback.call(this,n,i)||!d.search_callback&&f.search(i.text).isMatch)&&(p.push(t),g=g.concat(i.parents))}),p.length){for(g=e.vakata.array_unique(g),l=0,c=g.length;l<c;l++)g[l]!==e.jstree.root&&u[g[l]]&&!0===this.open_node(g[l],null,0)&&this._data.search.opn.push(g[l]);a?(this._data.search.dom=this._data.search.dom.add(e(this.element[0].querySelectorAll("#"+e.map(p,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #")))),this._data.search.res=e.vakata.array_unique(this._data.search.res.concat(p))):(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(p,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=p),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:n,res:this._data.search.res,show_only_matches:r})},this.clear_search=function(){this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.res.length&&(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(this._data.search.res,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search")),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=e()},this.redraw_node=function(t,n,r,s){if((t=i.redraw_node.apply(this,arguments))&&-1!==e.inArray(t.id,this._data.search.res)){var a,o,l=null;for(a=0,o=t.childNodes.length;a<o;a++)if(t.childNodes[a]&&t.childNodes[a].className&&-1!==t.childNodes[a].className.indexOf("jstree-anchor")){l=t.childNodes[a];break}l&&(l.className+=" jstree-search")}return t}},function(e){e.vakata.search=function(t,n,i){i=i||{},i=e.extend({},e.vakata.search.defaults,i),!1!==i.fuzzy&&(i.fuzzy=!0),t=i.caseSensitive?t:t.toLowerCase();var r,s,a,o,l=i.location,c=i.distance,d=i.threshold,h=t.length;return h>32&&(i.fuzzy=!1),i.fuzzy&&(r=1<<h-1,s=function(){var e={},n=0;for(n=0;n<h;n++)e[t.charAt(n)]=0;for(n=0;n<h;n++)e[t.charAt(n)]|=1<<h-n-1;return e}(),a=function(e,t){var n=e/h,i=Math.abs(l-t);return c?n+i/c:i?1:n}),o=function(e){if(e=i.caseSensitive?e:e.toLowerCase(),t===e||-1!==e.indexOf(t))return{isMatch:!0,score:0};if(!i.fuzzy)return{isMatch:!1,score:1};var n,o,c,u,f,p,g,_,m,v=e.length,y=d,b=e.indexOf(t,l),j=h+v,x=1,k=[];for(-1!==b&&(y=Math.min(a(0,b),y),-1!==(b=e.lastIndexOf(t,l+h))&&(y=Math.min(a(0,b),y))),b=-1,n=0;n<h;n++){for(c=0,u=j;c<u;)a(n,l+u)<=y?c=u:j=u,u=Math.floor((j-c)/2+c);for(j=u,p=Math.max(1,l-u+1),g=Math.min(l+u,v)+h,_=new Array(g+2),_[g+1]=(1<<n)-1,o=g;o>=p;o--)if(m=s[e.charAt(o-1)],_[o]=0===n?(_[o+1]<<1|1)&m:(_[o+1]<<1|1)&m|(f[o+1]|f[o])<<1|1|f[o+1],_[o]&r&&(x=a(n,o-1))<=y){if(y=x,b=o-1,k.push(b),!(b>l))break;p=Math.max(1,2*l-b)}if(a(n+1,l)>y)break;f=_}return{isMatch:b>=0,score:x}},!0===n?{search:o}:o(n)},e.vakata.search.defaults={location:0,distance:100,threshold:.6,fuzzy:!1,caseSensitive:!1}}(e),e.jstree.defaults.sort=function(e,t){return this.get_text(e)>this.get_text(t)?1:-1},e.jstree.plugins.sort=function(t,n){this.bind=function(){n.bind.call(this),this.element.on("model.jstree",e.proxy(function(e,t){this.sort(t.parent,!0)},this)).on("rename_node.jstree create_node.jstree",e.proxy(function(e,t){this.sort(t.parent||t.node.parent,!1),this.redraw_node(t.parent||t.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",e.proxy(function(e,t){this.sort(t.parent,!1),this.redraw_node(t.parent,!0)},this))},this.sort=function(t,n){var i,r;if((t=this.get_node(t))&&t.children&&t.children.length&&(t.children.sort(e.proxy(this.settings.sort,this)),n))for(i=0,r=t.children_d.length;i<r;i++)this.sort(t.children_d[i],!1)}};var f=!1;e.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1},e.jstree.plugins.state=function(t,n){this.bind=function(){n.bind.call(this);var t=e.proxy(function(){this.element.on(this.settings.state.events,e.proxy(function(){f&&clearTimeout(f),f=setTimeout(e.proxy(function(){this.save_state()},this),100)},this)),this.trigger("state_ready")},this);this.element.on("ready.jstree",e.proxy(function(e,n){this.element.one("restore_state.jstree",t),this.restore_state()||t()},this))},this.save_state=function(){var t={state:this.get_state(),ttl:this.settings.state.ttl,sec:+new Date};e.vakata.storage.set(this.settings.state.key,JSON.stringify(t))},this.restore_state=function(){var t=e.vakata.storage.get(this.settings.state.key);if(t)try{t=JSON.parse(t)}catch(e){return!1}return!(t&&t.ttl&&t.sec&&+new Date-t.sec>t.ttl)&&(t&&t.state&&(t=t.state),t&&e.isFunction(this.settings.state.filter)&&(t=this.settings.state.filter.call(this,t)),!!t&&(this.element.one("set_state.jstree",function(n,i){i.instance.trigger("restore_state",{state:e.extend(!0,{},t)})}),this.set_state(t),!0))},this.clear_state=function(){return e.vakata.storage.del(this.settings.state.key)}},function(e,t){e.vakata.storage={set:function(e,t){return window.localStorage.setItem(e,t)},get:function(e){return window.localStorage.getItem(e)},del:function(e){return window.localStorage.removeItem(e)}}}(e),e.jstree.defaults.types={default:{}},e.jstree.defaults.types[e.jstree.root]={},e.jstree.plugins.types=function(n,i){this.init=function(n,r){var s,a;if(r&&r.types&&r.types.default)for(s in r.types)if("default"!==s&&s!==e.jstree.root&&r.types.hasOwnProperty(s))for(a in r.types.default)r.types.default.hasOwnProperty(a)&&r.types[s][a]===t&&(r.types[s][a]=r.types.default[a]);i.init.call(this,n,r),this._model.data[e.jstree.root].type=e.jstree.root},this.refresh=function(t,n){i.refresh.call(this,t,n),this._model.data[e.jstree.root].type=e.jstree.root},this.bind=function(){this.element.on("model.jstree",e.proxy(function(n,i){var r,s,o,l=this._model.data,c=i.nodes,d=this.settings.types,h="default";for(r=0,s=c.length;r<s;r++){if(h="default",l[c[r]].original&&l[c[r]].original.type&&d[l[c[r]].original.type]&&(h=l[c[r]].original.type),l[c[r]].data&&l[c[r]].data.jstree&&l[c[r]].data.jstree.type&&d[l[c[r]].data.jstree.type]&&(h=l[c[r]].data.jstree.type),l[c[r]].type=h,!0===l[c[r]].icon&&d[h].icon!==t&&(l[c[r]].icon=d[h].icon),d[h].li_attr!==t&&"object"===a(d[h].li_attr))for(o in d[h].li_attr)if(d[h].li_attr.hasOwnProperty(o)){if("id"===o)continue;l[c[r]].li_attr[o]===t?l[c[r]].li_attr[o]=d[h].li_attr[o]:"class"===o&&(l[c[r]].li_attr.class=d[h].li_attr.class+" "+l[c[r]].li_attr.class)}if(d[h].a_attr!==t&&"object"===a(d[h].a_attr))for(o in d[h].a_attr)if(d[h].a_attr.hasOwnProperty(o)){if("id"===o)continue;l[c[r]].a_attr[o]===t?l[c[r]].a_attr[o]=d[h].a_attr[o]:"href"===o&&"#"===l[c[r]].a_attr[o]?l[c[r]].a_attr.href=d[h].a_attr.href:"class"===o&&(l[c[r]].a_attr.class=d[h].a_attr.class+" "+l[c[r]].a_attr.class)}}l[e.jstree.root].type=e.jstree.root},this)),i.bind.call(this)},this.get_json=function(t,n,r){var s,a,o=this._model.data,l=n?e.extend(!0,{},n,{no_id:!1}):{},c=i.get_json.call(this,t,l,r);if(!1===c)return!1;if(e.isArray(c))for(s=0,a=c.length;s<a;s++)c[s].type=c[s].id&&o[c[s].id]&&o[c[s].id].type?o[c[s].id].type:"default",n&&n.no_id&&(delete c[s].id,c[s].li_attr&&c[s].li_attr.id&&delete c[s].li_attr.id,c[s].a_attr&&c[s].a_attr.id&&delete c[s].a_attr.id);else c.type=c.id&&o[c.id]&&o[c.id].type?o[c.id].type:"default",n&&n.no_id&&(c=this._delete_ids(c));return c},this._delete_ids=function(t){if(e.isArray(t)){for(var n=0,i=t.length;n<i;n++)t[n]=this._delete_ids(t[n]);return t}return delete t.id,t.li_attr&&t.li_attr.id&&delete t.li_attr.id,t.a_attr&&t.a_attr.id&&delete t.a_attr.id,t.children&&e.isArray(t.children)&&(t.children=this._delete_ids(t.children)),t},this.check=function(n,r,s,a,o){if(!1===i.check.call(this,n,r,s,a,o))return!1;r=r&&r.id?r:this.get_node(r),s=s&&s.id?s:this.get_node(s);var l,c,d,h,u=r&&r.id?o&&o.origin?o.origin:e.jstree.reference(r.id):null;switch(u=u&&u._model&&u._model.data?u._model.data:null,n){case"create_node":case"move_node":case"copy_node":if("move_node"!==n||-1===e.inArray(r.id,s.children)){if(l=this.get_rules(s),l.max_children!==t&&-1!==l.max_children&&l.max_children===s.children.length)return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+n,data:JSON.stringify({chk:n,pos:a,obj:!(!r||!r.id)&&r.id,par:!(!s||!s.id)&&s.id})},!1;if(l.valid_children!==t&&-1!==l.valid_children&&-1===e.inArray(r.type||"default",l.valid_children))return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+n,data:JSON.stringify({chk:n,pos:a,obj:!(!r||!r.id)&&r.id,par:!(!s||!s.id)&&s.id})},!1;if(u&&r.children_d&&r.parents){for(c=0,d=0,h=r.children_d.length;d<h;d++)c=Math.max(c,u[r.children_d[d]].parents.length);c=c-r.parents.length+1}(c<=0||c===t)&&(c=1);do{if(l.max_depth!==t&&-1!==l.max_depth&&l.max_depth<c)return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+n,data:JSON.stringify({chk:n,pos:a,obj:!(!r||!r.id)&&r.id,par:!(!s||!s.id)&&s.id})},!1;s=this.get_node(s.parent),l=this.get_rules(s),c++}while(s)}}return!0},this.get_rules=function(e){if(!(e=this.get_node(e)))return!1;var n=this.get_type(e,!0);return n.max_depth===t&&(n.max_depth=-1),n.max_children===t&&(n.max_children=-1),n.valid_children===t&&(n.valid_children=-1),n},this.get_type=function(t,n){return!!(t=this.get_node(t))&&(n?e.extend({type:t.type},this.settings.types[t.type]):t.type)},this.set_type=function(n,i){var r,s,o,l,c,d,h,u,f=this._model.data;if(e.isArray(n)){for(n=n.slice(),s=0,o=n.length;s<o;s++)this.set_type(n[s],i);return!0}if(r=this.settings.types,n=this.get_node(n),!r[i]||!n)return!1;if(h=this.get_node(n,!0),h&&h.length&&(u=h.children(".jstree-anchor")),l=n.type,c=this.get_icon(n),n.type=i,(!0===c||!r[l]||r[l].icon!==t&&c===r[l].icon)&&this.set_icon(n,r[i].icon===t||r[i].icon),r[l]&&r[l].li_attr!==t&&"object"===a(r[l].li_attr))for(d in r[l].li_attr)if(r[l].li_attr.hasOwnProperty(d)){if("id"===d)continue;"class"===d?(f[n.id].li_attr.class=(f[n.id].li_attr.class||"").replace(r[l].li_attr[d],""),h&&h.removeClass(r[l].li_attr[d])):f[n.id].li_attr[d]===r[l].li_attr[d]&&(f[n.id].li_attr[d]=null,h&&h.removeAttr(d))}if(r[l]&&r[l].a_attr!==t&&"object"===a(r[l].a_attr))for(d in r[l].a_attr)if(r[l].a_attr.hasOwnProperty(d)){if("id"===d)continue;"class"===d?(f[n.id].a_attr.class=(f[n.id].a_attr.class||"").replace(r[l].a_attr[d],""),u&&u.removeClass(r[l].a_attr[d])):f[n.id].a_attr[d]===r[l].a_attr[d]&&("href"===d?(f[n.id].a_attr[d]="#",u&&u.attr("href","#")):(delete f[n.id].a_attr[d],u&&u.removeAttr(d)))}if(r[i].li_attr!==t&&"object"===a(r[i].li_attr))for(d in r[i].li_attr)if(r[i].li_attr.hasOwnProperty(d)){if("id"===d)continue;f[n.id].li_attr[d]===t?(f[n.id].li_attr[d]=r[i].li_attr[d],h&&("class"===d?h.addClass(r[i].li_attr[d]):h.attr(d,r[i].li_attr[d]))):"class"===d&&(f[n.id].li_attr.class=r[i].li_attr[d]+" "+f[n.id].li_attr.class,h&&h.addClass(r[i].li_attr[d]))}if(r[i].a_attr!==t&&"object"===a(r[i].a_attr))for(d in r[i].a_attr)if(r[i].a_attr.hasOwnProperty(d)){if("id"===d)continue;f[n.id].a_attr[d]===t?(f[n.id].a_attr[d]=r[i].a_attr[d],u&&("class"===d?u.addClass(r[i].a_attr[d]):u.attr(d,r[i].a_attr[d]))):"href"===d&&"#"===f[n.id].a_attr[d]?(f[n.id].a_attr.href=r[i].a_attr.href,u&&u.attr("href",r[i].a_attr.href)):"class"===d&&(f[n.id].a_attr.class=r[i].a_attr.class+" "+f[n.id].a_attr.class,u&&u.addClass(r[i].a_attr[d]))}return!0}},e.jstree.defaults.unique={case_sensitive:!1,duplicate:function(e,t){return e+" ("+t+")"}},e.jstree.plugins.unique=function(n,i){this.check=function(t,n,r,s,a){if(!1===i.check.call(this,t,n,r,s,a))return!1;if(n=n&&n.id?n:this.get_node(n),!(r=r&&r.id?r:this.get_node(r))||!r.children)return!0;var o,l,c="rename_node"===t?s:n.text,d=[],h=this.settings.unique.case_sensitive,u=this._model.data;for(o=0,l=r.children.length;o<l;o++)d.push(h?u[r.children[o]].text:u[r.children[o]].text.toLowerCase());switch(h||(c=c.toLowerCase()),t){case"delete_node":return!0;case"rename_node":return o=-1===e.inArray(c,d)||n.text&&n.text[h?"toString":"toLowerCase"]()===c,o||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+c+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:s,obj:!(!n||!n.id)&&n.id,par:!(!r||!r.id)&&r.id})}),o;case"create_node":return o=-1===e.inArray(c,d),o||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+c+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:s,obj:!(!n||!n.id)&&n.id,par:!(!r||!r.id)&&r.id})}),o;case"copy_node":return o=-1===e.inArray(c,d),o||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+c+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:s,obj:!(!n||!n.id)&&n.id,par:!(!r||!r.id)&&r.id})}),o;case"move_node":return o=n.parent===r.id&&(!a||!a.is_multi)||-1===e.inArray(c,d),o||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+c+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:s,obj:!(!n||!n.id)&&n.id,par:!(!r||!r.id)&&r.id})}),o}return!0},this.create_node=function(n,r,s,a,o){if(!r||r.text===t){if(null===n&&(n=e.jstree.root),!(n=this.get_node(n)))return i.create_node.call(this,n,r,s,a,o);if(s=s===t?"last":s,!s.toString().match(/^(before|after)$/)&&!o&&!this.is_loaded(n))return i.create_node.call(this,n,r,s,a,o);r||(r={});var l,c,d,h,u,f=this._model.data,p=this.settings.unique.case_sensitive,g=this.settings.unique.duplicate;for(c=l=this.get_string("New node"),d=[],h=0,u=n.children.length;h<u;h++)d.push(p?f[n.children[h]].text:f[n.children[h]].text.toLowerCase());for(h=1;-1!==e.inArray(p?c:c.toLowerCase(),d);)c=g.call(this,l,++h).toString();r.text=c}return i.create_node.call(this,n,r,s,a,o)}};var p=c.createElement("DIV");if(p.setAttribute("unselectable","on"),p.setAttribute("role","presentation"),p.className="jstree-wholerow",p.innerHTML="&#160;",e.jstree.plugins.wholerow=function(t,n){this.bind=function(){n.bind.call(this),this.element.on("ready.jstree set_state.jstree",e.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var n,i,r=!1;for(n=0,i=t.selected.length;n<i;n++)(r=this.get_node(t.selected[n],!0))&&r.length&&r.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",e.proxy(function(e,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",e.proxy(function(e,t){"hover_node"===e.type&&this.is_disabled(t.node)||this.get_node(t.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",e.proxy(function(t){if(this._data.contextmenu){t.preventDefault();var n=e.Event("contextmenu",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,pageX:t.pageX,pageY:t.pageY});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n)}},this)).on("click.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var n=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()}).on("dblclick.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var n=e.Event("dblclick",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",e.proxy(function(t){t.stopImmediatePropagation();var n=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",e.proxy(function(e){return e.stopImmediatePropagation(),this.is_disabled(e.currentTarget)||this.hover_node(e.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),n.teardown.call(this)},this.redraw_node=function(t,i,r,s){if(t=n.redraw_node.apply(this,arguments)){var a=p.cloneNode(!0);-1!==e.inArray(t.id,this._data.core.selected)&&(a.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===t.id&&(a.className+=" jstree-wholerow-hovered"),t.insertBefore(a,t.childNodes[0])}return t}},c.registerElement&&Object&&Object.create){var g=Object.create(HTMLElement.prototype);g.createdCallback=function(){var t,n={core:{},plugins:[]};for(t in e.jstree.plugins)e.jstree.plugins.hasOwnProperty(t)&&this.attributes[t]&&(n.plugins.push(t),this.getAttribute(t)&&JSON.parse(this.getAttribute(t))&&(n[t]=JSON.parse(this.getAttribute(t))));for(t in e.jstree.defaults.core)e.jstree.defaults.core.hasOwnProperty(t)&&this.attributes[t]&&(n.core[t]=JSON.parse(this.getAttribute(t))||this.getAttribute(t));e(this).jstree(n)};try{c.registerElement("vakata-jstree",{prototype:g})}catch(e){}}}})},function(e,t,n){"use strict";e.exports=n(17)},function(e,t,n){"use strict";(function(i){var r,s,a,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*!
 * Select2 4.0.3
 * https://select2.github.io
 *
 * Released under the MIT license
 * https://github.com/select2/select2/blob/master/LICENSE.md
 */
!function(i){s=[n(1)],r=i,void 0!==(a="function"==typeof r?r.apply(t,s):r)&&(e.exports=a)}(function(e){var t=function(){if(e&&e.fn&&e.fn.select2&&e.fn.select2.amd)var t=e.fn.select2.amd;var t;return function(){if(!t||!t.requirejs){t?n=t:t={};/**
         * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
         * Available via the MIT or new BSD license.
         * see: http://github.com/jrburke/almond for details
         */
var e,n,i;!function(t){function r(e,t){return j.call(e,t)}function s(e,t){var n,i,r,s,a,o,l,c,d,h,u,f=t&&t.split("/"),p=y.map,g=p&&p["*"]||{};if(e&&"."===e.charAt(0))if(t){for(e=e.split("/"),a=e.length-1,y.nodeIdCompat&&k.test(e[a])&&(e[a]=e[a].replace(k,"")),e=f.slice(0,f.length-1).concat(e),d=0;d<e.length;d+=1)if("."===(u=e[d]))e.splice(d,1),d-=1;else if(".."===u){if(1===d&&(".."===e[2]||".."===e[0]))break;d>0&&(e.splice(d-1,2),d-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((f||g)&&p){for(n=e.split("/"),d=n.length;d>0;d-=1){if(i=n.slice(0,d).join("/"),f)for(h=f.length;h>0;h-=1)if((r=p[f.slice(0,h).join("/")])&&(r=r[i])){s=r,o=d;break}if(s)break;!l&&g&&g[i]&&(l=g[i],c=d)}!s&&l&&(s=l,o=c),s&&(n.splice(0,o,s),e=n.join("/"))}return e}function a(e,n){return function(){var i=x.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),p.apply(t,i.concat([e,n]))}}function l(e){return function(t){return s(t,e)}}function c(e){return function(t){m[e]=t}}function d(e){if(r(v,e)){var n=v[e];delete v[e],b[e]=!0,f.apply(t,n)}if(!r(m,e)&&!r(b,e))throw new Error("No "+e);return m[e]}function h(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function u(e){return function(){return y&&y.config&&y.config[e]||{}}}var f,p,g,_,m={},v={},y={},b={},j=Object.prototype.hasOwnProperty,x=[].slice,k=/\.js$/;g=function(e,t){var n,i=h(e),r=i[0];return e=i[1],r&&(r=s(r,t),n=d(r)),r?e=n&&n.normalize?n.normalize(e,l(t)):s(e,t):(e=s(e,t),i=h(e),r=i[0],e=i[1],r&&(n=d(r))),{f:r?r+"!"+e:e,n:e,pr:r,p:n}},_={require:function(e){return a(e)},exports:function(e){var t=m[e];return void 0!==t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:u(e)}}},f=function(e,n,i,s){var l,h,u,f,p,y,j=[],x=void 0===i?"undefined":o(i);if(s=s||e,"undefined"===x||"function"===x){for(n=!n.length&&i.length?["require","exports","module"]:n,p=0;p<n.length;p+=1)if(f=g(n[p],s),"require"===(h=f.f))j[p]=_.require(e);else if("exports"===h)j[p]=_.exports(e),y=!0;else if("module"===h)l=j[p]=_.module(e);else if(r(m,h)||r(v,h)||r(b,h))j[p]=d(h);else{if(!f.p)throw new Error(e+" missing "+h);f.p.load(f.n,a(s,!0),c(h),{}),j[p]=m[h]}u=i?i.apply(m[e],j):void 0,e&&(l&&l.exports!==t&&l.exports!==m[e]?m[e]=l.exports:u===t&&y||(m[e]=u))}else e&&(m[e]=i)},e=n=p=function(e,n,i,r,s){if("string"==typeof e)return _[e]?_[e](n):d(g(e,n).f);if(!e.splice){if(y=e,y.deps&&p(y.deps,y.callback),!n)return;n.splice?(e=n,n=i,i=null):e=t}return n=n||function(){},"function"==typeof i&&(i=r,r=s),r?f(t,e,n,i):setTimeout(function(){f(t,e,n,i)},4),p},p.config=function(e){return p(e)},e._defined=m,i=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),r(m,e)||r(v,e)||(v[e]=[e,t,n])},i.amd={jQuery:!0}}(),t.requirejs=e,t.require=n,t.define=i}}(),t.define("almond",function(){}),t.define("jquery",[],function(){var t=e||i;return null==t&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),t}),t.define("select2/utils",["jquery"],function(e){function t(e){var t=e.prototype,n=[];for(var i in t){"function"==typeof t[i]&&("constructor"!==i&&n.push(i))}return n}var n={};n.Extend=function(e,t){function n(){this.constructor=e}var i={}.hasOwnProperty;for(var r in t)i.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},n.Decorate=function(e,n){function i(){var t=Array.prototype.unshift,i=n.prototype.constructor.length,r=e.prototype.constructor;i>0&&(t.call(arguments,e.prototype.constructor),r=n.prototype.constructor),r.apply(this,arguments)}function r(){this.constructor=i}var s=t(n),a=t(e);n.displayName=e.displayName,i.prototype=new r;for(var o=0;o<a.length;o++){var l=a[o];i.prototype[l]=e.prototype[l]}for(var c=0;c<s.length;c++){var d=s[c];i.prototype[d]=function(e){var t=function(){};e in i.prototype&&(t=i.prototype[e]);var r=n.prototype[e];return function(){return Array.prototype.unshift.call(arguments,t),r.apply(this,arguments)}}(d)}return i};var i=function(){this.listeners={}};return i.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},i.prototype.trigger=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);this.listeners=this.listeners||{},null==n&&(n=[]),0===n.length&&n.push({}),n[0]._type=e,e in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},i.prototype.invoke=function(e,t){for(var n=0,i=e.length;n<i;n++)e[n].apply(this,t)},n.Observable=i,n.generateChars=function(e){for(var t="",n=0;n<e;n++){t+=Math.floor(36*Math.random()).toString(36)}return t},n.bind=function(e,t){return function(){e.apply(t,arguments)}},n._convertData=function(e){for(var t in e){var n=t.split("-"),i=e;if(1!==n.length){for(var r=0;r<n.length;r++){var s=n[r];s=s.substring(0,1).toLowerCase()+s.substring(1),s in i||(i[s]={}),r==n.length-1&&(i[s]=e[t]),i=i[s]}delete e[t]}}return e},n.hasScroll=function(t,n){var i=e(n),r=n.style.overflowX,s=n.style.overflowY;return(r!==s||"hidden"!==s&&"visible"!==s)&&("scroll"===r||"scroll"===s||(i.innerHeight()<n.scrollHeight||i.innerWidth()<n.scrollWidth))},n.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},n.appendMany=function(t,n){if("1.7"===e.fn.jquery.substr(0,3)){var i=e();e.map(n,function(e){i=i.add(e)}),n=i}t.append(n)},n}),t.define("select2/results",["jquery","./utils"],function(e,t){function n(e,t,i){this.$element=e,this.data=i,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t,t},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(t){var n=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var i=e('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),r=this.options.get("translations").get(t.message);i.append(n(r(t.args))),i[0].className+=" select2-results__message",this.$results.append(i)},n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},n.prototype.append=function(e){this.hideLoading();var t=[];if(null==e.results||0===e.results.length)return void(0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"}));e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var i=e.results[n],r=this.option(i);t.push(r)}this.$results.append(t)},n.prototype.position=function(e,t){t.find(".select2-results").append(e)},n.prototype.sort=function(e){return this.options.get("sorter")(e)},n.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option[aria-selected]"),t=e.filter("[aria-selected=true]");t.length>0?t.first().trigger("mouseenter"):e.first().trigger("mouseenter"),this.ensureHighlightVisible()},n.prototype.setClasses=function(){var t=this;this.data.current(function(n){var i=e.map(n,function(e){return e.id.toString()});t.$results.find(".select2-results__option[aria-selected]").each(function(){var t=e(this),n=e.data(this,"data"),r=""+n.id;null!=n.element&&n.element.selected||null==n.element&&e.inArray(r,i)>-1?t.attr("aria-selected","true"):t.attr("aria-selected","false")})})},n.prototype.showLoading=function(e){this.hideLoading();var t=this.options.get("translations").get("searching"),n={disabled:!0,loading:!0,text:t(e)},i=this.option(n);i.className+=" loading-results",this.$results.prepend(i)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(t){var n=document.createElement("li");n.className="select2-results__option";var i={role:"treeitem","aria-selected":"false"};t.disabled&&(delete i["aria-selected"],i["aria-disabled"]="true"),null==t.id&&delete i["aria-selected"],null!=t._resultId&&(n.id=t._resultId),t.title&&(n.title=t.title),t.children&&(i.role="group",i["aria-label"]=t.text,delete i["aria-selected"]);for(var r in i){var s=i[r];n.setAttribute(r,s)}if(t.children){var a=e(n),o=document.createElement("strong");o.className="select2-results__group";e(o);this.template(t,o);for(var l=[],c=0;c<t.children.length;c++){var d=t.children[c],h=this.option(d);l.push(h)}var u=e("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});u.append(l),a.append(o),a.append(u)}else this.template(t,n);return e.data(n,"data",t),n},n.prototype.bind=function(t,n){var i=this,r=t.id+"-results";this.$results.attr("id",r),t.on("results:all",function(e){i.clear(),i.append(e.data),t.isOpen()&&(i.setClasses(),i.highlightFirstItem())}),t.on("results:append",function(e){i.append(e.data),t.isOpen()&&i.setClasses()}),t.on("query",function(e){i.hideMessages(),i.showLoading(e)}),t.on("select",function(){t.isOpen()&&(i.setClasses(),i.highlightFirstItem())}),t.on("unselect",function(){t.isOpen()&&(i.setClasses(),i.highlightFirstItem())}),t.on("open",function(){i.$results.attr("aria-expanded","true"),i.$results.attr("aria-hidden","false"),i.setClasses(),i.ensureHighlightVisible()}),t.on("close",function(){i.$results.attr("aria-expanded","false"),i.$results.attr("aria-hidden","true"),i.$results.removeAttr("aria-activedescendant")}),t.on("results:toggle",function(){var e=i.getHighlightedResults();0!==e.length&&e.trigger("mouseup")}),t.on("results:select",function(){var e=i.getHighlightedResults();if(0!==e.length){var t=e.data("data");"true"==e.attr("aria-selected")?i.trigger("close",{}):i.trigger("select",{data:t})}}),t.on("results:previous",function(){var e=i.getHighlightedResults(),t=i.$results.find("[aria-selected]"),n=t.index(e);if(0!==n){var r=n-1;0===e.length&&(r=0);var s=t.eq(r);s.trigger("mouseenter");var a=i.$results.offset().top,o=s.offset().top,l=i.$results.scrollTop()+(o-a);0===r?i.$results.scrollTop(0):o-a<0&&i.$results.scrollTop(l)}}),t.on("results:next",function(){var e=i.getHighlightedResults(),t=i.$results.find("[aria-selected]"),n=t.index(e),r=n+1;if(!(r>=t.length)){var s=t.eq(r);s.trigger("mouseenter");var a=i.$results.offset().top+i.$results.outerHeight(!1),o=s.offset().top+s.outerHeight(!1),l=i.$results.scrollTop()+o-a;0===r?i.$results.scrollTop(0):o>a&&i.$results.scrollTop(l)}}),t.on("results:focus",function(e){e.element.addClass("select2-results__option--highlighted")}),t.on("results:message",function(e){i.displayMessage(e)}),e.fn.mousewheel&&this.$results.on("mousewheel",function(e){var t=i.$results.scrollTop(),n=i.$results.get(0).scrollHeight-t+e.deltaY,r=e.deltaY>0&&t-e.deltaY<=0,s=e.deltaY<0&&n<=i.$results.height();r?(i.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):s&&(i.$results.scrollTop(i.$results.get(0).scrollHeight-i.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(t){var n=e(this),r=n.data("data");if("true"===n.attr("aria-selected"))return void(i.options.get("multiple")?i.trigger("unselect",{originalEvent:t,data:r}):i.trigger("close",{}));i.trigger("select",{originalEvent:t,data:r})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(t){var n=e(this).data("data");i.getHighlightedResults().removeClass("select2-results__option--highlighted"),i.trigger("results:focus",{data:n,element:e(this)})})},n.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(0!==e.length){var t=this.$results.find("[aria-selected]"),n=t.index(e),i=this.$results.offset().top,r=e.offset().top,s=this.$results.scrollTop()+(r-i),a=r-i;s-=2*e.outerHeight(!1),n<=2?this.$results.scrollTop(0):(a>this.$results.outerHeight()||a<0)&&this.$results.scrollTop(s)}},n.prototype.template=function(t,n){var i=this.options.get("templateResult"),r=this.options.get("escapeMarkup"),s=i(t,n);null==s?n.style.display="none":"string"==typeof s?n.innerHTML=r(s):e(n).append(s)},n}),t.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),t.define("select2/selection/base",["jquery","../utils","../keys"],function(e,t,n){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=e('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),t.attr("title",this.$element.attr("title")),t.attr("tabindex",this._tabindex),this.$selection=t,t},i.prototype.bind=function(e,t){var i=this,r=(e.id,e.id+"-results");this.container=e,this.$selection.on("focus",function(e){i.trigger("focus",e)}),this.$selection.on("blur",function(e){i._handleBlur(e)}),this.$selection.on("keydown",function(e){i.trigger("keypress",e),e.which===n.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){i.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){i.update(e.data)}),e.on("open",function(){i.$selection.attr("aria-expanded","true"),i.$selection.attr("aria-owns",r),i._attachCloseHandler(e)}),e.on("close",function(){i.$selection.attr("aria-expanded","false"),i.$selection.removeAttr("aria-activedescendant"),i.$selection.removeAttr("aria-owns"),i.$selection.focus(),i._detachCloseHandler(e)}),e.on("enable",function(){i.$selection.attr("tabindex",i._tabindex)}),e.on("disable",function(){i.$selection.attr("tabindex","-1")})},i.prototype._handleBlur=function(t){var n=this;window.setTimeout(function(){document.activeElement==n.$selection[0]||e.contains(n.$selection[0],document.activeElement)||n.trigger("blur",t)},1)},i.prototype._attachCloseHandler=function(t){e(document.body).on("mousedown.select2."+t.id,function(t){var n=e(t.target),i=n.closest(".select2");e(".select2.select2-container--open").each(function(){var t=e(this);this!=i[0]&&t.data("element").select2("close")})})},i.prototype._detachCloseHandler=function(t){e(document.body).off("mousedown.select2."+t.id)},i.prototype.position=function(e,t){t.find(".selection").append(e)},i.prototype.destroy=function(){this._detachCloseHandler(this.container)},i.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},i}),t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,n,i){function r(){r.__super__.constructor.apply(this,arguments)}return n.Extend(r,t),r.prototype.render=function(){var e=r.__super__.render.call(this);return e.addClass("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},r.prototype.bind=function(e,t){var n=this;r.__super__.bind.apply(this,arguments);var i=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i),this.$selection.attr("aria-labelledby",i),this.$selection.on("mousedown",function(e){1===e.which&&n.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(e){}),this.$selection.on("blur",function(e){}),e.on("focus",function(t){e.isOpen()||n.$selection.focus()}),e.on("selection:update",function(e){n.update(e.data)})},r.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},r.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},r.prototype.selectionContainer=function(){return e("<span></span>")},r.prototype.update=function(e){if(0===e.length)return void this.clear();var t=e[0],n=this.$selection.find(".select2-selection__rendered"),i=this.display(t,n);n.empty().append(i),n.prop("title",t.title||t.text)},r}),t.define("select2/selection/multiple",["jquery","./base","../utils"],function(e,t,n){function i(e,t){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,t),i.prototype.render=function(){var e=i.__super__.render.call(this);return e.addClass("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},i.prototype.bind=function(t,n){var r=this;i.__super__.bind.apply(this,arguments),this.$selection.on("click",function(e){r.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(t){if(!r.options.get("disabled")){var n=e(this),i=n.parent(),s=i.data("data");r.trigger("unselect",{originalEvent:t,data:s})}})},i.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},i.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},i.prototype.selectionContainer=function(){return e('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},i.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],i=0;i<e.length;i++){var r=e[i],s=this.selectionContainer(),a=this.display(r,s);s.append(a),s.prop("title",r.title||r.text),s.data("data",r),t.push(s)}var o=this.$selection.find(".select2-selection__rendered");n.appendMany(o,t)}},i}),t.define("select2/selection/placeholder",["../utils"],function(e){function t(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return t.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},t.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();return n.html(this.display(t)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},t.prototype.update=function(e,t){var n=1==t.length&&t[0].id!=this.placeholder.id;if(t.length>1||n)return e.call(this,t);this.clear();var i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},t}),t.define("select2/selection/allowClear",["jquery","../keys"],function(e,t){function n(){}return n.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(e){i._handleClear(e)}),t.on("keypress",function(e){i._handleKeyboardClear(e,t)})},n.prototype._handleClear=function(e,t){if(!this.options.get("disabled")){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){t.stopPropagation();for(var i=n.data("data"),r=0;r<i.length;r++){var s={data:i[r]};if(this.trigger("unselect",s),s.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},n.prototype._handleKeyboardClear=function(e,n,i){i.isOpen()||n.which!=t.DELETE&&n.which!=t.BACKSPACE||this._handleClear(n)},n.prototype.update=function(t,n){if(t.call(this,n),!(this.$selection.find(".select2-selection__placeholder").length>0||0===n.length)){var i=e('<span class="select2-selection__clear">&times;</span>');i.data("data",n),this.$selection.find(".select2-selection__rendered").prepend(i)}},n}),t.define("select2/selection/search",["jquery","../utils","../keys"],function(e,t,n){function i(e,t,n){e.call(this,t,n)}return i.prototype.render=function(t){var n=e('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=n,this.$search=n.find("input");var i=t.call(this);return this._transferTabIndex(),i},i.prototype.bind=function(e,t,i){var r=this;e.call(this,t,i),t.on("open",function(){r.$search.trigger("focus")}),t.on("close",function(){r.$search.val(""),r.$search.removeAttr("aria-activedescendant"),r.$search.trigger("focus")}),t.on("enable",function(){r.$search.prop("disabled",!1),r._transferTabIndex()}),t.on("disable",function(){r.$search.prop("disabled",!0)}),t.on("focus",function(e){r.$search.trigger("focus")}),t.on("results:focus",function(e){r.$search.attr("aria-activedescendant",e.id)}),this.$selection.on("focusin",".select2-search--inline",function(e){r.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){r._handleBlur(e)}),this.$selection.on("keydown",".select2-search--inline",function(e){if(e.stopPropagation(),r.trigger("keypress",e),r._keyUpPrevented=e.isDefaultPrevented(),e.which===n.BACKSPACE&&""===r.$search.val()){var t=r.$searchContainer.prev(".select2-selection__choice");if(t.length>0){var i=t.data("data");r.searchRemoveChoice(i),e.preventDefault()}}});var s=document.documentMode,a=s&&s<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){if(a)return void r.$selection.off("input.search input.searchcheck");r.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){if(a&&"input"===e.type)return void r.$selection.off("input.search input.searchcheck");var t=e.which;t!=n.SHIFT&&t!=n.CTRL&&t!=n.ALT&&t!=n.TAB&&r.handleSearch(e)})},i.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},i.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},i.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),n&&this.$search.focus()},i.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},i.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},i.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";if(""!==this.$search.attr("placeholder"))e=this.$selection.find(".select2-selection__rendered").innerWidth();else{e=.75*(this.$search.val().length+1)+"em"}this.$search.css("width",e)},i}),t.define("select2/selection/eventRelay",["jquery"],function(e){function t(){}return t.prototype.bind=function(t,n,i){var r=this,s=["open","opening","close","closing","select","selecting","unselect","unselecting"],a=["opening","closing","selecting","unselecting"];t.call(this,n,i),n.on("*",function(t,n){if(-1!==e.inArray(t,s)){n=n||{};var i=e.Event("select2:"+t,{params:n});r.$element.trigger(i),-1!==e.inArray(t,a)&&(n.prevented=i.isDefaultPrevented())}})},t}),t.define("select2/translation",["jquery","require"],function(e,t){function n(e){this.dict=e||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(e){return this.dict[e]},n.prototype.extend=function(t){this.dict=e.extend({},t.all(),this.dict)},n._cache={},n.loadPath=function(e){if(!(e in n._cache)){var i=t(e);n._cache[e]=i}return new n(n._cache[e])},n}),t.define("select2/diacritics",[],function(){return{"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""}}),t.define("select2/data/base",["../utils"],function(e){function t(e,n){t.__super__.constructor.call(this)}return e.Extend(t,e.Observable),t.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},t.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},t.prototype.bind=function(e,t){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,n){var i=t.id+"-result-";return i+=e.generateChars(4),null!=n.id?i+="-"+n.id.toString():i+="-"+e.generateChars(4),i},t}),t.define("select2/data/select",["./base","../utils","jquery"],function(e,t,n){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,e),i.prototype.current=function(e){var t=[],i=this;this.$element.find(":selected").each(function(){var e=n(this),r=i.item(e);t.push(r)}),e(t)},i.prototype.select=function(e){var t=this;if(e.selected=!0,n(e.element).is("option"))return e.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(i){var r=[];e=[e],e.push.apply(e,i);for(var s=0;s<e.length;s++){var a=e[s].id;-1===n.inArray(a,r)&&r.push(a)}t.$element.val(r),t.$element.trigger("change")});else{var i=e.id;this.$element.val(i),this.$element.trigger("change")}},i.prototype.unselect=function(e){var t=this;if(this.$element.prop("multiple")){if(e.selected=!1,n(e.element).is("option"))return e.element.selected=!1,void this.$element.trigger("change");this.current(function(i){for(var r=[],s=0;s<i.length;s++){var a=i[s].id;a!==e.id&&-1===n.inArray(a,r)&&r.push(a)}t.$element.val(r),t.$element.trigger("change")})}},i.prototype.bind=function(e,t){var n=this;this.container=e,e.on("select",function(e){n.select(e.data)}),e.on("unselect",function(e){n.unselect(e.data)})},i.prototype.destroy=function(){this.$element.find("*").each(function(){n.removeData(this,"data")})},i.prototype.query=function(e,t){var i=[],r=this;this.$element.children().each(function(){var t=n(this);if(t.is("option")||t.is("optgroup")){var s=r.item(t),a=r.matches(e,s);null!==a&&i.push(a)}}),t({results:i})},i.prototype.addOptions=function(e){t.appendMany(this.$element,e)},i.prototype.option=function(e){var t;e.children?(t=document.createElement("optgroup"),t.label=e.text):(t=document.createElement("option"),void 0!==t.textContent?t.textContent=e.text:t.innerText=e.text),e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);var i=n(t),r=this._normalizeItem(e);return r.element=t,n.data(t,"data",r),i},i.prototype.item=function(e){var t={};if(null!=(t=n.data(e[0],"data")))return t;if(e.is("option"))t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if(e.is("optgroup")){t={text:e.prop("label"),children:[],title:e.prop("title")};for(var i=e.children("option"),r=[],s=0;s<i.length;s++){var a=n(i[s]),o=this.item(a);r.push(o)}t.children=r}return t=this._normalizeItem(t),t.element=e[0],n.data(e[0],"data",t),t},i.prototype._normalizeItem=function(e){n.isPlainObject(e)||(e={id:e,text:e}),e=n.extend({},{text:""},e);var t={selected:!1,disabled:!1};return null!=e.id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),n.extend({},t,e)},i.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},i}),t.define("select2/data/array",["./select","../utils","jquery"],function(e,t,n){function i(e,t){var n=t.get("data")||[];i.__super__.constructor.call(this,e,t),this.addOptions(this.convertToOptions(n))}return t.Extend(i,e),i.prototype.select=function(e){var t=this.$element.find("option").filter(function(t,n){return n.value==e.id.toString()});0===t.length&&(t=this.option(e),this.addOptions(t)),i.__super__.select.call(this,e)},i.prototype.convertToOptions=function(e){for(var i=this,r=this.$element.find("option"),s=r.map(function(){return i.item(n(this)).id}).get(),a=[],o=0;o<e.length;o++){var l=this._normalizeItem(e[o]);if(n.inArray(l.id,s)>=0){var c=r.filter(function(e){return function(){return n(this).val()==e.id}}(l)),d=this.item(c),h=n.extend(!0,{},l,d),u=this.option(h);c.replaceWith(u)}else{var f=this.option(l);if(l.children){var p=this.convertToOptions(l.children);t.appendMany(f,p)}a.push(f)}}return a},i}),t.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,n){function i(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),i.__super__.constructor.call(this,e,t)}return t.Extend(i,e),i.prototype._applyDefaults=function(e){var t={data:function(e){return n.extend({},e,{q:e.term})},transport:function(e,t,i){var r=n.ajax(e);return r.then(t),r.fail(i),r}};return n.extend({},t,e,!0)},i.prototype.processResults=function(e){return e},i.prototype.query=function(e,t){function i(){var i=s.transport(s,function(i){var s=r.processResults(i,e);r.options.get("debug")&&window.console&&console.error&&(s&&s.results&&n.isArray(s.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),t(s)},function(){i.status&&"0"===i.status||r.trigger("results:message",{message:"errorLoading"})});r._request=i}var r=this;null!=this._request&&(n.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var s=n.extend({type:"GET"},this.ajaxOptions);"function"==typeof s.url&&(s.url=s.url.call(this.$element,e)),"function"==typeof s.data&&(s.data=s.data.call(this.$element,e)),this.ajaxOptions.delay&&null!=e.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(i,this.ajaxOptions.delay)):i()},i}),t.define("select2/data/tags",["jquery"],function(e){function t(t,n,i){var r=i.get("tags"),s=i.get("createTag");void 0!==s&&(this.createTag=s);var a=i.get("insertTag");if(void 0!==a&&(this.insertTag=a),t.call(this,n,i),e.isArray(r))for(var o=0;o<r.length;o++){var l=r[o],c=this._normalizeItem(l),d=this.option(c);this.$element.append(d)}}return t.prototype.query=function(e,t,n){function i(e,s){for(var a=e.results,o=0;o<a.length;o++){var l=a[o],c=null!=l.children&&!i({results:l.children},!0);if(l.text===t.term||c)return!s&&(e.data=a,void n(e))}if(s)return!0;var d=r.createTag(t);if(null!=d){var h=r.option(d);h.attr("data-select2-tag",!0),r.addOptions([h]),r.insertTag(a,d)}e.results=a,n(e)}var r=this;if(this._removeOldTags(),null==t.term||null!=t.page)return void e.call(this,t,n);e.call(this,t,i)},t.prototype.createTag=function(t,n){var i=e.trim(n.term);return""===i?null:{id:i,text:i}},t.prototype.insertTag=function(e,t,n){t.unshift(n)},t.prototype._removeOldTags=function(t){this._lastTag;this.$element.find("option[data-select2-tag]").each(function(){this.selected||e(this).remove()})},t}),t.define("select2/data/tokenizer",["jquery"],function(e){function t(e,t,n){var i=n.get("tokenizer");void 0!==i&&(this.tokenizer=i),e.call(this,t,n)}return t.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},t.prototype.query=function(t,n,i){function r(t){var n=a._normalizeItem(t);if(!a.$element.find("option").filter(function(){return e(this).val()===n.id}).length){var i=a.option(n);i.attr("data-select2-tag",!0),a._removeOldTags(),a.addOptions([i])}s(n)}function s(e){a.trigger("select",{data:e})}var a=this;n.term=n.term||"";var o=this.tokenizer(n,this.options,r);o.term!==n.term&&(this.$search.length&&(this.$search.val(o.term),this.$search.focus()),n.term=o.term),t.call(this,n,i)},t.prototype.tokenizer=function(t,n,i,r){for(var s=i.get("tokenSeparators")||[],a=n.term,o=0,l=this.createTag||function(e){return{id:e.term,text:e.term}};o<a.length;){var c=a[o];if(-1!==e.inArray(c,s)){var d=a.substr(0,o),h=e.extend({},n,{term:d}),u=l(h);null!=u?(r(u),a=a.substr(o+1)||"",o=0):o++}else o++}return{term:a}},t}),t.define("select2/data/minimumInputLength",[],function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){if(t.term=t.term||"",t.term.length<this.minimumInputLength)return void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}});e.call(this,t,n)},e}),t.define("select2/data/maximumInputLength",[],function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){if(t.term=t.term||"",this.maximumInputLength>0&&t.term.length>this.maximumInputLength)return void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}});e.call(this,t,n)},e}),t.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){var i=this;this.current(function(r){var s=null!=r?r.length:0;if(i.maximumSelectionLength>0&&s>=i.maximumSelectionLength)return void i.trigger("results:message",{message:"maximumSelected",args:{maximum:i.maximumSelectionLength}});e.call(i,t,n)})},e}),t.define("select2/dropdown",["jquery","./utils"],function(e,t){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<span class="select2-dropdown"><span class="select2-results"></span></span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t,t},n.prototype.bind=function(){},n.prototype.position=function(e,t){},n.prototype.destroy=function(){this.$dropdown.remove()},n}),t.define("select2/dropdown/search",["jquery","../utils"],function(e,t){function n(){}return n.prototype.render=function(t){var n=t.call(this),i=e('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=i,this.$search=i.find("input"),n.prepend(i),n},n.prototype.bind=function(t,n,i){var r=this;t.call(this,n,i),this.$search.on("keydown",function(e){r.trigger("keypress",e),r._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(t){e(this).off("keyup")}),this.$search.on("keyup input",function(e){r.handleSearch(e)}),n.on("open",function(){r.$search.attr("tabindex",0),r.$search.focus(),window.setTimeout(function(){r.$search.focus()},0)}),n.on("close",function(){r.$search.attr("tabindex",-1),r.$search.val("")}),n.on("focus",function(){n.isOpen()&&r.$search.focus()}),n.on("results:all",function(e){if(null==e.query.term||""===e.query.term){r.showSearch(e)?r.$searchContainer.removeClass("select2-search--hide"):r.$searchContainer.addClass("select2-search--hide")}})},n.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},n.prototype.showSearch=function(e,t){return!0},n}),t.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,n,i){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,i)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),i=t.length-1;i>=0;i--){var r=t[i];this.placeholder.id===r.id&&n.splice(i,1)}return n},e}),t.define("select2/dropdown/infiniteScroll",["jquery"],function(e){function t(e,t,n,i){this.lastParams={},e.call(this,t,n,i),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return t.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&this.$results.append(this.$loadingMore)},t.prototype.bind=function(t,n,i){var r=this;t.call(this,n,i),n.on("query",function(e){r.lastParams=e,r.loading=!0}),n.on("query:append",function(e){r.lastParams=e,r.loading=!0}),this.$results.on("scroll",function(){var t=e.contains(document.documentElement,r.$loadingMore[0]);if(!r.loading&&t){r.$results.offset().top+r.$results.outerHeight(!1)+50>=r.$loadingMore.offset().top+r.$loadingMore.outerHeight(!1)&&r.loadMore()}})},t.prototype.loadMore=function(){this.loading=!0;var t=e.extend({},{page:1},this.lastParams);t.page++,this.trigger("query:append",t)},t.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},t.prototype.createLoadingMore=function(){var t=e('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),n=this.options.get("translations").get("loadingMore");return t.html(n(this.lastParams)),t},t}),t.define("select2/dropdown/attachBody",["jquery","../utils"],function(e,t){function n(t,n,i){this.$dropdownParent=i.get("dropdownParent")||e(document.body),t.call(this,n,i)}return n.prototype.bind=function(e,t,n){var i=this,r=!1;e.call(this,t,n),t.on("open",function(){i._showDropdown(),i._attachPositioningHandler(t),r||(r=!0,t.on("results:all",function(){i._positionDropdown(),i._resizeDropdown()}),t.on("results:append",function(){i._positionDropdown(),i._resizeDropdown()}))}),t.on("close",function(){i._hideDropdown(),i._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},n.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},n.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t.removeClass("select2"),t.addClass("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},n.prototype.render=function(t){var n=e("<span></span>"),i=t.call(this);return n.append(i),this.$dropdownContainer=n,n},n.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},n.prototype._attachPositioningHandler=function(n,i){var r=this,s="scroll.select2."+i.id,a="resize.select2."+i.id,o="orientationchange.select2."+i.id,l=this.$container.parents().filter(t.hasScroll);l.each(function(){e(this).data("select2-scroll-position",{x:e(this).scrollLeft(),y:e(this).scrollTop()})}),l.on(s,function(t){var n=e(this).data("select2-scroll-position");e(this).scrollTop(n.y)}),e(window).on(s+" "+a+" "+o,function(e){r._positionDropdown(),r._resizeDropdown()})},n.prototype._detachPositioningHandler=function(n,i){var r="scroll.select2."+i.id,s="resize.select2."+i.id,a="orientationchange.select2."+i.id;this.$container.parents().filter(t.hasScroll).off(r),e(window).off(r+" "+s+" "+a)},n.prototype._positionDropdown=function(){var t=e(window),n=this.$dropdown.hasClass("select2-dropdown--above"),i=this.$dropdown.hasClass("select2-dropdown--below"),r=null,s=this.$container.offset();s.bottom=s.top+this.$container.outerHeight(!1);var a={height:this.$container.outerHeight(!1)};a.top=s.top,a.bottom=s.top+a.height;var o={height:this.$dropdown.outerHeight(!1)},l={top:t.scrollTop(),bottom:t.scrollTop()+t.height()},c=l.top<s.top-o.height,d=l.bottom>s.bottom+o.height,h={left:s.left,top:a.bottom},u=this.$dropdownParent;"static"===u.css("position")&&(u=u.offsetParent());var f=u.offset();h.top-=f.top,h.left-=f.left,n||i||(r="below"),d||!c||n?!c&&d&&n&&(r="below"):r="above",("above"==r||n&&"below"!==r)&&(h.top=a.top-f.top-o.height),null!=r&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+r),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+r)),this.$dropdownContainer.css(h)},n.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},n.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},n}),t.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(t){for(var n=0,i=0;i<t.length;i++){var r=t[i];r.children?n+=e(r.children):n++}return n}function t(e,t,n,i){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,n,i)}return t.prototype.showSearch=function(t,n){return!(e(n.data.results)<this.minimumResultsForSearch)&&t.call(this,n)},t}),t.define("select2/dropdown/selectOnClose",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("close",function(e){i._handleSelectOnClose(e)})},e.prototype._handleSelectOnClose=function(e,t){if(t&&null!=t.originalSelect2Event){var n=t.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}var i=this.getHighlightedResults();if(!(i.length<1)){var r=i.data("data");null!=r.element&&r.element.selected||null==r.element&&r.selected||this.trigger("select",{data:r})}},e}),t.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("select",function(e){i._selectTriggered(e)}),t.on("unselect",function(e){i._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&n.ctrlKey||this.trigger("close",{originalEvent:n,originalSelect2Event:t})},e}),t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,n="Please delete "+t+" character";return 1!=t&&(n+="s"),n},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more results"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching"}}}),t.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(e,t,n,i,r,s,a,o,l,c,d,h,u,f,p,g,_,m,v,y,b,j,x,k,w,C,A,T,E){function $(){this.reset()}return $.prototype.apply=function(h){if(h=e.extend(!0,{},this.defaults,h),null==h.dataAdapter){if(null!=h.ajax?h.dataAdapter=p:null!=h.data?h.dataAdapter=f:h.dataAdapter=u,h.minimumInputLength>0&&(h.dataAdapter=c.Decorate(h.dataAdapter,m)),h.maximumInputLength>0&&(h.dataAdapter=c.Decorate(h.dataAdapter,v)),h.maximumSelectionLength>0&&(h.dataAdapter=c.Decorate(h.dataAdapter,y)),h.tags&&(h.dataAdapter=c.Decorate(h.dataAdapter,g)),null==h.tokenSeparators&&null==h.tokenizer||(h.dataAdapter=c.Decorate(h.dataAdapter,_)),null!=h.query){var E=t(h.amdBase+"compat/query");h.dataAdapter=c.Decorate(h.dataAdapter,E)}if(null!=h.initSelection){var $=t(h.amdBase+"compat/initSelection");h.dataAdapter=c.Decorate(h.dataAdapter,$)}}if(null==h.resultsAdapter&&(h.resultsAdapter=n,null!=h.ajax&&(h.resultsAdapter=c.Decorate(h.resultsAdapter,k)),null!=h.placeholder&&(h.resultsAdapter=c.Decorate(h.resultsAdapter,x)),h.selectOnClose&&(h.resultsAdapter=c.Decorate(h.resultsAdapter,A))),null==h.dropdownAdapter){if(h.multiple)h.dropdownAdapter=b;else{var S=c.Decorate(b,j);h.dropdownAdapter=S}if(0!==h.minimumResultsForSearch&&(h.dropdownAdapter=c.Decorate(h.dropdownAdapter,C)),h.closeOnSelect&&(h.dropdownAdapter=c.Decorate(h.dropdownAdapter,T)),null!=h.dropdownCssClass||null!=h.dropdownCss||null!=h.adaptDropdownCssClass){var O=t(h.amdBase+"compat/dropdownCss");h.dropdownAdapter=c.Decorate(h.dropdownAdapter,O)}h.dropdownAdapter=c.Decorate(h.dropdownAdapter,w)}if(null==h.selectionAdapter){if(h.multiple?h.selectionAdapter=r:h.selectionAdapter=i,null!=h.placeholder&&(h.selectionAdapter=c.Decorate(h.selectionAdapter,s)),h.allowClear&&(h.selectionAdapter=c.Decorate(h.selectionAdapter,a)),h.multiple&&(h.selectionAdapter=c.Decorate(h.selectionAdapter,o)),null!=h.containerCssClass||null!=h.containerCss||null!=h.adaptContainerCssClass){var N=t(h.amdBase+"compat/containerCss");h.selectionAdapter=c.Decorate(h.selectionAdapter,N)}h.selectionAdapter=c.Decorate(h.selectionAdapter,l)}if("string"==typeof h.language)if(h.language.indexOf("-")>0){var L=h.language.split("-"),P=L[0];h.language=[h.language,P]}else h.language=[h.language];if(e.isArray(h.language)){var D=new d;h.language.push("en");for(var I=h.language,M=0;M<I.length;M++){var q=I[M],z={};try{z=d.loadPath(q)}catch(e){try{q=this.defaults.amdLanguageBase+q,z=d.loadPath(q)}catch(e){h.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+q+'" could not be automatically loaded. A fallback will be used instead.');continue}}D.extend(z)}h.translations=D}else{var H=d.loadPath(this.defaults.amdLanguageBase+"en"),K=new d(h.language);K.extend(H),h.translations=K}return h},$.prototype.reset=function(){function t(e){function t(e){return h[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function n(i,r){if(""===e.trim(i.term))return r;if(r.children&&r.children.length>0){for(var s=e.extend(!0,{},r),a=r.children.length-1;a>=0;a--){null==n(i,r.children[a])&&s.children.splice(a,1)}return s.children.length>0?s:n(i,s)}var o=t(r.text).toUpperCase(),l=t(i.term).toUpperCase();return o.indexOf(l)>-1?r:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:c.escapeMarkup,language:E,matcher:n,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},$.prototype.set=function(t,n){var i=e.camelCase(t),r={};r[i]=n;var s=c._convertData(r);e.extend(this.defaults,s)},new $}),t.define("select2/options",["require","jquery","./defaults","./utils"],function(e,t,n,i){function r(t,r){if(this.options=t,null!=r&&this.fromElement(r),this.options=n.apply(this.options),r&&r.is("input")){var s=e(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=i.Decorate(this.options.dataAdapter,s)}}return r.prototype.fromElement=function(e){var n=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.language&&(e.prop("lang")?this.options.language=e.prop("lang").toLowerCase():e.closest("[lang]").prop("lang")&&(this.options.language=e.closest("[lang]").prop("lang"))),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),e.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),e.data("data",e.data("select2Tags")),e.data("tags",!0)),e.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",e.data("ajaxUrl")),e.data("ajax--url",e.data("ajaxUrl")));var r={};r=t.fn.jquery&&"1."==t.fn.jquery.substr(0,2)&&e[0].dataset?t.extend(!0,{},e[0].dataset,e.data()):e.data();var s=t.extend(!0,{},r);s=i._convertData(s);for(var a in s)t.inArray(a,n)>-1||(t.isPlainObject(this.options[a])?t.extend(this.options[a],s[a]):this.options[a]=s[a]);return this},r.prototype.get=function(e){return this.options[e]},r.prototype.set=function(e,t){this.options[e]=t},r}),t.define("select2/core",["jquery","./options","./utils","./keys"],function(e,t,n,i){var r=function e(n,i){null!=n.data("select2")&&n.data("select2").destroy(),this.$element=n,this.id=this._generateId(n),i=i||{},this.options=new t(i,n),e.__super__.constructor.call(this);var r=n.attr("tabindex")||0;n.data("old-tabindex",r),n.attr("tabindex","-1");var s=this.options.get("dataAdapter");this.dataAdapter=new s(n,this.options);var a=this.render();this._placeContainer(a);var o=this.options.get("selectionAdapter");this.selection=new o(n,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,a);var l=this.options.get("dropdownAdapter");this.dropdown=new l(n,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,a);var c=this.options.get("resultsAdapter");this.results=new c(n,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var d=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){d.trigger("selection:update",{data:e})}),n.addClass("select2-hidden-accessible"),n.attr("aria-hidden","true"),this._syncAttributes(),n.data("select2",this)};return n.Extend(r,n.Observable),r.prototype._generateId=function(e){var t="";return t=null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+n.generateChars(2):n.generateChars(4),t=t.replace(/(:|\.|\[|\]|,)/g,""),t="select2-"+t},r.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},r.prototype._resolveWidth=function(e,t){if("resolve"==t){var n=this._resolveWidth(e,"style");return null!=n?n:this._resolveWidth(e,"element")}if("element"==t){var i=e.outerWidth(!1);return i<=0?"auto":i+"px"}if("style"==t){var r=e.attr("style");if("string"!=typeof r)return null;for(var s=r.split(";"),a=0,o=s.length;a<o;a+=1){var l=s[a].replace(/\s/g,""),c=l.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i);if(null!==c&&c.length>=1)return c[1]}return null}return t},r.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},r.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})}),this.$element.on("focus.select2",function(e){t.trigger("focus",e)}),this._syncA=n.bind(this._syncAttributes,this),this._syncS=n.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=i?(this._observer=new i(function(n){e.each(n,t._syncA),e.each(n,t._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},r.prototype._registerDataEvents=function(){var e=this;this.dataAdapter.on("*",function(t,n){e.trigger(t,n)})},r.prototype._registerSelectionEvents=function(){var t=this,n=["toggle","focus"];this.selection.on("toggle",function(){t.toggleDropdown()}),this.selection.on("focus",function(e){t.focus(e)}),this.selection.on("*",function(i,r){-1===e.inArray(i,n)&&t.trigger(i,r)})},r.prototype._registerDropdownEvents=function(){var e=this;this.dropdown.on("*",function(t,n){e.trigger(t,n)})},r.prototype._registerResultsEvents=function(){var e=this;this.results.on("*",function(t,n){e.trigger(t,n)})},r.prototype._registerEvents=function(){var e=this;this.on("open",function(){e.$container.addClass("select2-container--open")}),this.on("close",function(){e.$container.removeClass("select2-container--open")}),this.on("enable",function(){e.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){e.$container.addClass("select2-container--disabled")}),this.on("blur",function(){e.$container.removeClass("select2-container--focus")}),this.on("query",function(t){e.isOpen()||e.trigger("open",{}),this.dataAdapter.query(t,function(n){e.trigger("results:all",{data:n,query:t})})}),this.on("query:append",function(t){this.dataAdapter.query(t,function(n){e.trigger("results:append",{data:n,query:t})})}),this.on("keypress",function(t){var n=t.which;e.isOpen()?n===i.ESC||n===i.TAB||n===i.UP&&t.altKey?(e.close(),t.preventDefault()):n===i.ENTER?(e.trigger("results:select",{}),t.preventDefault()):n===i.SPACE&&t.ctrlKey?(e.trigger("results:toggle",{}),t.preventDefault()):n===i.UP?(e.trigger("results:previous",{}),t.preventDefault()):n===i.DOWN&&(e.trigger("results:next",{}),t.preventDefault()):(n===i.ENTER||n===i.SPACE||n===i.DOWN&&t.altKey)&&(e.open(),t.preventDefault())})},r.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},r.prototype._syncSubtree=function(e,t){var n=!1,i=this;if(!e||!e.target||"OPTION"===e.target.nodeName||"OPTGROUP"===e.target.nodeName){if(t)if(t.addedNodes&&t.addedNodes.length>0)for(var r=0;r<t.addedNodes.length;r++){var s=t.addedNodes[r];s.selected&&(n=!0)}else t.removedNodes&&t.removedNodes.length>0&&(n=!0);else n=!0;n&&this.dataAdapter.current(function(e){i.trigger("selection:update",{data:e})})}},r.prototype.trigger=function(e,t){var n=r.__super__.trigger,i={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(void 0===t&&(t={}),e in i){var s=i[e],a={prevented:!1,name:e,args:t};if(n.call(this,s,a),a.prevented)return void(t.prevented=!0)}n.call(this,e,t)},r.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},r.prototype.open=function(){this.isOpen()||this.trigger("query",{})},r.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},r.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},r.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},r.prototype.focus=function(e){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},r.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=e&&0!==e.length||(e=[!0]);var t=!e[0];this.$element.prop("disabled",t)},r.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var e=[];return this.dataAdapter.current(function(t){e=t}),e},r.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==t||0===t.length)return this.$element.val();var n=t[0];e.isArray(n)&&(n=e.map(n,function(e){return e.toString()})),this.$element.val(n).trigger("change")},r.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},r.prototype.render=function(){var t=e('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container.addClass("select2-container--"+this.options.get("theme")),t.data("element",this.$element),t},r}),t.define("jquery-mousewheel",["jquery"],function(e){return e}),t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(e,t,n,i){if(null==e.fn.select2){var r=["open","close","destroy"];e.fn.select2=function(t){if(t=t||{},"object"===(void 0===t?"undefined":o(t)))return this.each(function(){var i=e.extend(!0,{},t);new n(e(this),i)}),this;if("string"==typeof t){var i,s=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=e(this).data("select2");null==n&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),i=n[t].apply(n,s)}),e.inArray(t,r)>-1?this:i}throw new Error("Invalid arguments for Select2: "+t)}}return null==e.fn.select2.defaults&&(e.fn.select2.defaults=i),n}),{define:t.define,require:t.require}}(),n=t.require("jquery.select2");return e.fn.select2.amd=t,n})}).call(t,n(1))},function(e,t,n){"use strict";function i(e){var t=e instanceof Date?e:new Date(e);return t.getDate()||(t=new Date),t}function r(e,t){var n=i(e),r=void 0,s=void 0,a=0;for(t=t||"YYYY-MM-DD HH:mm:ss",r=n.getHours(),s=[["M+",n.getMonth()+1],["D+",n.getDate()],["H+",r],["h+",r>12?r-12:r],["m+",n.getMinutes()],["s+",n.getSeconds()]],/(Y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));a<s.length;a++)new RegExp("("+s[a][0]+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?s[a][1]:("00"+s[a][1]).substr((""+s[a][1]).length)));return t.replace(/a/gi,r>11?"pm":"am")}function s(e){var t=void 0,n=void 0;t="string"==typeof e?"zh-cn"===e?l:o:e,c||(c={});for(n in t)t.hasOwnProperty(n)&&"string"==typeof t[n]&&(c[n]=t[n])}function a(e){c||s("");var t=+new Date-+i(e),n=void 0,r=void 0,a=0,o=void 0,l=void 0;for(t<0?(n=c.future,t=-t):n=c.past;a<d.length;a++)if(o=d[a],l=o[1],t>=l){r=c[o[0]].replace("%s",parseInt(t/l,0)||1);break}return n.replace("%s",r)}var o={future:"in %s",past:"%s ago",s:"a few seconds",mm:"%s minutes",hh:"%s hours",dd:"%s days",MM:"%s months",yy:"%s years"},l={future:"%s",past:"%s",s:"",mm:"%s",hh:"%s",dd:"%s",MM:"%s",yy:"%s"},c=void 0,d=[["yy",31536e6],["MM",2592e6],["dd",864e5],["hh",36e5],["mm",6e4],["s",0]];t.format=r,t.locate=s,t.fromNow=a},function(e,t){},function(e,t){},function(e,t,n){e.exports=n(0)(78)},function(e,t,n){e.exports=n(0)(79)},function(e,t,n){e.exports=n(0)(80)},function(e,t,n){e.exports=n(0)(81)},function(e,t,n){"use strict";var i=n(15),r=n(14),s=n(1),a=n(5),o=n(4),l=n(9);n(7);n(12),n(13),n(6),n(10),n(8),n(11);var c=i.createClass({displayName:"Header",render:function(){return i.createElement("div",{className:"container mb-3"},i.createElement("nav",{className:"navbar navbar-toggleable-md navbar-light bg-faded"},i.createElement("a",{className:"navbar-brand",href:"/"},"Canvas File Sync"),i.createElement("div",{className:"collapse navbar-collapse"},i.createElement("ul",{className:"navbar-nav mr-auto"}),i.createElement("ul",{className:"navbar-nav"},i.createElement("li",{className:"nav-item"},i.createElement("a",{className:"nav-link",href:"/auth"},"Grant Privilege"))))))}}),d=i.createClass({displayName:"CourseSelect",render:function(){return i.createElement("div",{className:"form-group"},i.createElement("select",{className:"form-control",ref:"select"},i.createElement("option",null)))},componentDidMount:function(){var e=this;s(this.refs.select).select2({data:this.props.courses,placeholder:"Please select a course",allowClear:!0}).on("select2:select",function(t){e.props.callbackChangeCourse(t.params.data.id)})},componentDidUpdate:function(){var e=[];this.props.courses.map(function(t){e.push({id:t.id,text:t.course_code+" "+t.name})}),s(this.refs.select).select2({data:e,placeholder:"Please select a course",allowClear:!0})}}),h=i.createClass({displayName:"FileTree",getDefaultProps:function(){return{fileTree:{}}},shouldComponentUpdate:function(e,t){return this.props.fileTree.id!==e.fileTree.id},render:function(){return i.createElement("div",{ref:"fileTree"})},componentDidMount:function(){var e=this;s(this.refs.fileTree).jstree({core:{data:function(t,n){n(e.props.fileTree)},worker:!1}}).on("select_node.jstree",function(t,n){e.props.callbackChangeFolder(n.node.id)}),console.log("Tree init")},componentDidUpdate:function(){s(this.refs.fileTree).jstree(!0).refresh(),s(this.refs.fileTree).jstree(!0).select_node(2),console.log("Tree update")}}),u=i.createClass({displayName:"File",render:function(){return i.createElement("tr",null,i.createElement("td",null,i.createElement("i",{className:"fa fa-fw "+this.props.file.icon,"aria-hidden":"true"}),"",i.createElement("a",{href:this.props.file.url},this.props.file.display_name)),i.createElement("td",null,this.props.file.created_at),i.createElement("td",null,this.props.file.updated_at),i.createElement("td",{className:"text-right"},this.props.file.size))}}),f=i.createClass({displayName:"Folder",onClick:function(){this.props.callbackChangeFolder(this.props.folder.id)},render:function(){return this.props.parent?i.createElement("tr",null,i.createElement("td",null,i.createElement("i",{className:"fa fa-fw fa-folder-open-o","aria-hidden":"true"}),"",i.createElement("a",{href:"javascript:void(0);",onClick:this.onClick},".."))):i.createElement("tr",null,i.createElement("td",null,i.createElement("i",{className:"fa fa-fw fa-folder-o","aria-hidden":"true"}),"",i.createElement("a",{href:"javascript:void(0);",onClick:this.onClick},this.props.folder.name)),i.createElement("td",null,this.props.folder.created_at),i.createElement("td",null,this.props.folder.updated_at))}}),p=i.createClass({displayName:"FileList",render:function(){var e=this;return i.createElement("table",{className:"table"},i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",null,"Name"),i.createElement("th",null,"Time Created"),i.createElement("th",null,"Time Updated"),i.createElement("th",{className:"text-right"},"Size"))),i.createElement("tbody",null,this.props.parentFolder.id?i.createElement(f,{callbackChangeFolder:this.props.callbackChangeFolder,folder:this.props.parentFolder,parent:!0}):"",this.props.folder.children?this.props.folder.children.map(function(t){return i.createElement(f,{callbackChangeFolder:e.props.callbackChangeFolder,folder:t})}):"",this.props.folder.files?this.props.folder.files.map(function(e){return i.createElement(u,{file:e})}):""))}}),g=i.createClass({displayName:"FileView",getDefaultProps:function(){return{courses:["Course 1","Course 2"],fileTree:{text:"",children:[],files:[]}}},getInitialState:function(){return{files:[],folders:[],course:{sync_time:null},processing:!1,error:!1,first:!0}},processData:function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm";return l.format(new Date(e),t)},n=this.props.fileTree,i={};return e.folders.map(function(e){i.hasOwnProperty(e.id)||(i[e.id]={children:[]}),e.created_at=t(e.created_at),e.updated_at=t(e.updated_at),s.extend(i[e.id],e),i[e.id].text=e.name,i[e.id].files=[],i[e.id].__children=i[e.id].children,e.parent_folder_id?(i.hasOwnProperty(e.parent_folder_id)||(i[e.parent_folder_id]={children:[]}),i[e.parent_folder_id].children.push(i[e.id])):n=i[e.id]}),e.files.map(function(n){n.url=e.download_host+n.filename+"?attname="+n.display_name,n.size=a(n.size),n.icon=o.processFile(n.filename),n.created_at=t(n.created_at),n.updated_at=t(n.updated_at),i.hasOwnProperty(n.folder_id)&&i[n.folder_id].files.push(n)}),n.text=e.course.name,n.state={opened:!0},e.course.last_sync_time=e.course.sync_time,e.course.sync_time=t(e.course.sync_time,"YYYY-MM-DD HH:mm:ss"),console.log(n),s.extend({fileTree:n,folderMap:i,currentFolderId:n.id,sync:!1,sync_timeout:!1,error:!1,first:!1},e)},callbackChangeFolder:function(e){if(!this.processing&&(e=parseInt(e))&&this.state.currentFolderId!==e&&this.state.folderMap.hasOwnProperty(e)){this.processing=!0;var t=this.refs.fileTree,n=s(t.refs.fileTree).jstree(!0);n.deselect_all(),n.select_node(e),n.open_node(e),this.setState({currentFolderId:e}),this.processing=!1}},callbackChangeCourse:function(e){e!==this.state.course.id&&(this.processing=!1,this.refreshTree(e))},onSyncClick:function(){var e=this;this.setState({sync:!0});var t=this.timestamp=new Date,n=0,i=setInterval(function(){return t!==e.timestamp?void window.clearInterval(i):30==++n?(window.clearInterval(i),void e.setState({sync:!1,sync_timeout:!0})):void s.ajax({url:"/data/sync",data:{id:e.state.course.id,time:Date.parse(e.state.course.last_sync_time)},type:"GET",dataType:"json",success:function(n){if(t!==e.timestamp)return void window.clearInterval(i);(0!=n.state||e.state.sync)&&1==n.state&&(e.refreshTree(e.state.course.id,!0),window.clearInterval(i))}})},2e3)},componentWillUpdate:function(){for(var e in this.state.folderMap)this.state.folderMap[e].children=this.state.folderMap[e].__children},render:function(){var e=void 0,t={};this.state.currentFolderId?(e=this.state.folderMap[this.state.currentFolderId],e.parent_folder_id&&(t=this.state.folderMap[e.parent_folder_id])):e=this.props.fileTree;var n=[i.createElement("div",{className:"jumbotron"},i.createElement("h1",{className:"display-3"},"Canvas File Sync"),i.createElement("p",{className:"lead"},"Canvas File Sync is created by tc-imba, in order to sync all files on Canvas LMS with the help of access token providers."),i.createElement("hr",{className:"my-4"}),i.createElement("p",null,"If you'd like to contribute, grant privilege to us in the button below."),i.createElement("p",{className:"lead"},i.createElement("a",{className:"btn btn-primary btn-lg",href:"/auth",role:"button"},"Grant Privilege")))],r=[i.createElement("div",{className:"mb-3"},i.createElement("span",null,"Last Sync Time: ",this.state.course.sync_time||"Unknown",""),"(Thanks to the data provided by ",this.state.course.sync_user_name,")",i.createElement("span",{className:"float-right"},i.createElement("a",{onClick:this.onSyncClick},i.createElement("i",{className:"fa fa-refresh "+(this.state.sync?"fa-spin":"")})),"",this.state.sync?"Syncing":this.state.sync_timeout?"Sync timeout":this.state.sync_success?"Synced":"Sync now")),i.createElement(p,{callbackChangeFolder:this.callbackChangeFolder,folder:e,parentFolder:t})],s=[i.createElement("h4",null,"Sorry, we currently haven't data for the course"),i.createElement("div",null,"Error: ",this.state.error)];return i.createElement("div",{className:"row"},i.createElement("div",{className:"col-sm-3"},i.createElement(d,{courses:this.props.courses,callbackChangeCourse:this.callbackChangeCourse}),this.state.error||this.state.first?"":i.createElement(h,{callbackChangeFolder:this.callbackChangeFolder,fileTree:this.state.fileTree,ref:"fileTree"})),i.createElement("div",{className:"col-sm-9"},this.state.error?s:this.state.first?n:r))},refreshTree:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=function(e){t.setState({error:JSON.stringify(e,null,"    ")})};s.ajax({url:"/data/course",data:{id:e},type:"GET",dataType:"json",success:function(e){e.course?(e=t.processData(e),n&&(e.sync_success=!0),t.setState(e),e.sync&&t.onSyncClick()):i(e),console.log(e)},error:i})},componentDidMount:function(){},componentDidUpdate:function(){}}),_=i.createClass({displayName:"App",getInitialState:function(){return{courses:[]}},render:function(){return i.createElement("div",{className:"app"},i.createElement(c,null),",",i.createElement("div",{className:"app-body container"},i.createElement(g,{courses:this.state.courses})))},componentDidMount:function(){var e=this;s.ajax({url:"/public/courses.json",type:"GET",dataType:"json",success:function(t){console.log(t),e.setState({courses:t})}})}});r.render(i.createElement(_,null),document.getElementById("body"))},function(e,t,n){"use strict";(function(n,i){var r,s,a,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n,i){"object"===o(t)&&void 0!==e?i(t):(s=[t],r=i,void 0!==(a="function"==typeof r?r.apply(t,s):r)&&(e.exports=a))}(0,function(e){function t(e){var t=function(e){var t=s(arguments,1);setTimeout(function(){e.apply(null,t)})};st=(void 0===n?"undefined":o(n))===ht?n:t,(void 0===i?"undefined":o(i))===dt&&o(i.nextTick)===ht?(it=/^v0.10/.test(i.version)?st:i.nextTick,rt=/^v0/.test(i.version)?st:i.nextTick):rt=it=st,!1===e&&(it=function(e){e()})}function r(e){for(var t=-1,n=e.length,i=Array(n);++t<n;)i[t]=e[t];return i}function s(e,t){var n=e.length,i=-1,r=n-t;if(r<=0)return[];for(var s=Array(r);++i<r;)s[i]=e[i+t];return s}function a(e){for(var t=ft(e),n=t.length,i=-1,r={};++i<n;){var s=t[i];r[s]=e[s]}return r}function l(e){for(var t=-1,n=e.length,i=[];++t<n;){var r=e[t];r&&(i[i.length]=r)}return i}function c(e){for(var t=-1,n=e.length,i=Array(n),r=n;++t<n;)i[--r]=e[t];return i}function d(e,t){return e.hasOwnProperty(t)}function h(e,t){for(var n=-1,i=e.length;++n<i;)if(e[n]===t)return!1;return!0}function u(e,t){for(var n=-1,i=e.length;++n<i;)t(e[n],n);return e}function f(e,t,n){for(var i=-1,r=n.length;++i<r;){var s=n[i];t(e[s],s)}return e}function p(e,t){for(var n=-1;++n<e;)t(n)}function g(e,t){for(var n=-1,i=e.length,r=Array(i);++n<i;){var s=e[n]||{};r[n]=s[t]}return r}function _(e,t){return e.criteria-t.criteria}function m(e,t,n){var i=-1,r=e.length;if(3===t.length)for(;++i<r;)t(e[i],i,q(n));else for(;++i<r;)t(e[i],q(n))}function v(e,t,n,i){var r,s=-1,a=i.length;if(3===t.length)for(;++s<a;)r=i[s],t(e[r],r,q(n));else for(;++s<a;)t(e[i[s]],q(n))}function y(e,t,n){var i,r=e[pt](),s=-1;if(3===t.length)for(;!1===(i=r.next()).done;)t(i.value,++s,n);else for(;!1===(i=r.next()).done;)t(i.value,n)}function b(e,t,n,i){var r=-1,s=e.length;if(4===n.length)for(;++r<s;)n(t,e[r],r,q(i));else for(;++r<s;)n(t,e[r],q(i))}function j(e,t,n,i,r){var s,a=-1,o=r.length;if(4===n.length)for(;++a<o;)s=r[a],n(t,e[s],s,q(i));else for(;++a<o;)n(t,e[r[a]],q(i))}function x(e,t,n,i){var r,s=-1,a=e[pt]();if(4===n.length)for(;!1===(r=a.next()).done;)n(t,r.value,++s,q(i));else for(;!1===(r=a.next()).done;)n(t,r.value,q(i))}function k(e,t){for(var n=-1,i=e.length;++n<i;)e[n](t(n))}function w(e,t,n){for(var i,r=-1,s=n.length;++r<s;)i=n[r],e[i](t(i))}function C(e,t,n){var i=-1,r=e.length;if(3===t.length)for(;++i<r;)t(e[i],i,n(i));else for(;++i<r;)t(e[i],n(i))}function A(e,t,n,i){var r,s=-1,a=i.length;if(3===t.length)for(;++s<a;)r=i[s],t(e[r],r,n(s));else for(;++s<a;)t(e[i[s]],n(s))}function T(e,t,n){var i,r=-1,s=e.size,a=e[pt]();if(3===t.length)for(;++r<s;)i=a.next().value,t(i,r,n(r));else for(;++r<s;)t(a.next().value,n(r))}function E(e,t,n,i){var r,s=-1,a=i.length;if(3===t.length)for(;++s<a;)r=i[s],t(e[r],r,n(r));else for(;++s<a;)r=i[s],t(e[r],n(r))}function $(e,t,n){var i,r=-1,s=e[pt]();if(3===t.length)for(;!1===(i=s.next()).done;)t(i.value,++r,n(r));else for(;!1===(i=s.next()).done;)t(i.value,n(++r))}function S(e,t,n){var i,r=-1,s=e.length;if(3===t.length)for(;++r<s;)i=e[r],t(i,r,n(i));else for(;++r<s;)i=e[r],t(i,n(i))}function O(e,t,n,i){var r,s,a=-1,o=i.length;if(3===t.length)for(;++a<o;)r=i[a],s=e[r],t(s,r,n(s));else for(;++a<o;)s=e[i[a]],t(s,n(s))}function N(e,t,n){var i,r,s=-1,a=e[pt]();if(3===t.length)for(;!1===(r=a.next()).done;)i=r.value,t(i,++s,n(i));else for(;!1===(r=a.next()).done;)i=r.value,t(i,n(i))}function L(e,t,n){var i,r=-1,s=e.length;if(3===t.length)for(;++r<s;)i=e[r],t(i,r,n(r,i));else for(;++r<s;)i=e[r],t(i,n(r,i))}function P(e,t,n,i){var r,s,a=-1,o=i.length;if(3===t.length)for(;++a<o;)r=i[a],s=e[r],t(s,r,n(a,s));else for(;++a<o;)s=e[i[a]],t(s,n(a,s))}function D(e,t,n){var i,r,s=-1,a=e[pt]();if(3===t.length)for(;!1===(r=a.next()).done;)i=r.value,t(i,++s,n(s,i));else for(;!1===(r=a.next()).done;)i=r.value,t(i,n(++s,i))}function I(e,t,n,i){var r,s,a=-1,o=i.length;if(3===t.length)for(;++a<o;)r=i[a],s=e[r],t(s,r,n(r,s));else for(;++a<o;)r=i[a],s=e[r],t(s,n(r,s))}function M(e,t,n){var i,r,s=-1,a=e[pt]();if(3===t.length)for(;!1===(r=a.next()).done;)i=r.value,t(i,++s,n(s,i));else for(;!1===(r=a.next()).done;)i=r.value,t(i,n(++s,i))}function q(e){return function(t,n){var i=e;e=ot,i(t,n)}}function z(e){return function(t,n){var i=e;e=at,i(t,n)}}function H(e,t,n,i){var s,l;return i?(s=Array,l=r):(s=function(){return{}},l=a),function(i,r,a){function c(e){return function(t,n){if(null===e&&ot(),t)return e=null,void(a=z(a))(t,l(u));u[e]=n,e=null,++f===d&&a(null,u)}}a=a||at;var d,h,u,f=0;ut(i)?(d=i.length,u=s(d),e(i,r,c)):i&&(pt&&i[pt]?(d=i.size,u=s(d),n(i,r,c)):(void 0===i?"undefined":o(i))===dt&&(h=ft(i),d=h.length,u=s(d),t(i,r,c,h))),d||a(null,s())}}function K(e,t,n,i){return function(r,s,a){function c(e,t){return function(n,r){if(null===e&&ot(),n)return e=null,void(a=z(a))(n);!!r===i&&(u[e]=t),e=null,++f===d&&a(null,l(u))}}a=a||at;var d,h,u,f=0;if(ut(r)?(d=r.length,u=Array(d),e(r,s,c)):r&&(pt&&r[pt]?(d=r.size,u=Array(d),n(r,s,c)):(void 0===r?"undefined":o(r))===dt&&(h=ft(r),d=h.length,u=Array(d),t(r,s,c,h))),!d)return a(null,[])}}function F(e){return function(t,n,i){function r(){p=t[y],n(p,h)}function s(){p=t[y],n(p,y,h)}function a(){p=_.next().value,n(p,h)}function l(){p=_.next().value,n(p,y,h)}function c(){f=g[y],p=t[f],n(p,h)}function d(){f=g[y],p=t[f],n(p,f,h)}function h(t,n){if(t)return void i(t);!!n===e&&(b[b.length]=p),++y===u?(m=ot,i(null,b)):v?it(m):(v=!0,m()),v=!1}i=q(i||at);var u,f,p,g,_,m,v=!1,y=0,b=[];if(ut(t)?(u=t.length,m=3===n.length?s:r):t&&(pt&&t[pt]?(u=t.size,_=t[pt](),m=3===n.length?l:a):(void 0===t?"undefined":o(t))===dt&&(g=ft(t),u=g.length,m=3===n.length?d:c)),!u)return i(null,[]);m()}}function R(e){return function(t,n,i,r){function s(){(_=C++)<g&&(v=t[_],i(v,f(v,_)))}function a(){(_=C++)<g&&(v=t[_],i(v,_,f(v,_)))}function c(){!1===(j=b.next()).done&&(v=j.value,i(v,f(v,C++)))}function d(){!1===(j=b.next()).done&&(v=j.value,i(v,C,f(v,C++)))}function h(){(_=C++)<g&&(v=t[y[_]],i(v,f(v,_)))}function u(){(_=C++)<g&&(m=y[_],v=t[m],i(v,m,f(v,_)))}function f(t,n){return function(i,s){if(null===n&&ot(),i)return n=null,x=at,void(r=z(r))(i);!!s===e&&(k[n]=t),n=null,++A===g?(r=q(r))(null,l(k)):w?it(x):(w=!0,x()),w=!1}}r=r||at;var g,_,m,v,y,b,j,x,k,w=!1,C=0,A=0;if(ut(t)?(g=t.length,x=3===i.length?a:s):t&&(pt&&t[pt]?(g=t.size,b=t[pt](),x=3===i.length?d:c):(void 0===t?"undefined":o(t))===dt&&(y=ft(t),g=y.length,x=3===i.length?u:h)),!g||isNaN(n)||n<1)return r(null,[]);k=Array(g),p(n>g?g:n,x)}}function U(e,t,n){function i(){t(e[v],d)}function r(){t(e[v],v,d)}function s(){t(p.next().value,d)}function a(){g=p.next().value,t(g,v,d)}function l(){t(e[f[v]],d)}function c(){u=f[v],t(e[u],u,d)}function d(e,t){e?n(e):++v===h?(_=ot,n(null)):!1===t?(_=ot,n(null)):m?it(_):(m=!0,_()),m=!1}n=q(n||at);var h,u,f,p,g,_,m=!1,v=0;if(ut(e)?(h=e.length,_=3===t.length?r:i):e&&(pt&&e[pt]?(h=e.size,p=e[pt](),_=3===t.length?a:s):(void 0===e?"undefined":o(e))===dt&&(f=ft(e),h=f.length,_=3===t.length?c:l)),!h)return n(null);_()}function B(e,t,n,i){function r(){j<u&&n(e[j++],h)}function s(){(f=j++)<u&&n(e[f],f,h)}function a(){!1===(v=m.next()).done&&n(v.value,h)}function l(){!1===(v=m.next()).done&&n(v.value,j++,h)}function c(){j<u&&n(e[_[j++]],h)}function d(){(f=j++)<u&&(g=_[f],n(e[g],g,h))}function h(e,t){e?(y=at,(i=z(i))(e)):++x===u?(y=ot,(i=q(i))(null)):!1===t?(y=at,(i=z(i))(null)):b?it(y):(b=!0,y()),b=!1}i=i||at;var u,f,g,_,m,v,y,b=!1,j=0,x=0;if(ut(e))u=e.length,y=3===n.length?s:r;else if(e)if(pt&&e[pt])u=e.size,m=e[pt](),y=3===n.length?l:a;else{if((void 0===e?"undefined":o(e))!==dt)return i(null);_=ft(e),u=_.length,y=3===n.length?d:c}else;if(!u||isNaN(t)||t<1)return i(null);p(t>u?u:t,y)}function Y(e,t,n){function i(){t(e[b],h)}function s(){t(e[b],b,h)}function a(){t(g.next().value,h)}function l(){_=g.next().value,t(_,b,h)}function c(){t(e[p[b]],h)}function d(){f=p[b],t(e[f],f,h)}function h(e,t){if(e)return v=ot,void(n=q(n))(e,r(m));m[b]=t,++b===u?(v=ot,n(null,m),n=ot):y?it(v):(y=!0,v()),y=!1}n=n||at;var u,f,p,g,_,m,v,y=!1,b=0;if(ut(e)?(u=e.length,v=3===t.length?s:i):e&&(pt&&e[pt]?(u=e.size,g=e[pt](),v=3===t.length?l:a):(void 0===e?"undefined":o(e))===dt&&(p=ft(e),u=p.length,v=3===t.length?d:c)),!u)return n(null,[]);m=Array(u),v()}function W(e,t,n,i){function s(){(g=k++)<f&&n(e[g],u(g))}function a(){(g=k++)<f&&n(e[g],g,u(g))}function l(){!1===(y=v.next()).done&&n(y.value,u(k++))}function c(){!1===(y=v.next()).done&&n(y.value,k,u(k++))}function d(){(g=k++)<f&&n(e[m[g]],u(g))}function h(){(g=k++)<f&&(_=m[g],n(e[_],_,u(g)))}function u(e){return function(t,n){if(null===e&&ot(),t)return e=null,j=at,void(i=z(i))(t,r(b));b[e]=n,e=null,++w===f?(j=ot,i(null,b),i=ot):x?it(j):(x=!0,j()),x=!1}}i=i||at;var f,g,_,m,v,y,b,j,x=!1,k=0,w=0;if(ut(e)?(f=e.length,j=3===n.length?a:s):e&&(pt&&e[pt]?(f=e.size,v=e[pt](),j=3===n.length?c:l):(void 0===e?"undefined":o(e))===dt&&(m=ft(e),f=m.length,j=3===n.length?h:d)),!f||isNaN(t)||t<1)return i(null,[]);b=Array(f),p(t>f?f:t,j)}function J(e,t,n){function i(){f=b,t(e[b],h)}function r(){f=b,t(e[b],b,h)}function s(){f=b,_=g.next().value,t(_,h)}function l(){f=b,_=g.next().value,t(_,b,h)}function c(){f=p[b],t(e[f],h)}function d(){f=p[b],t(e[f],f,h)}function h(e,t){if(e)return m=ot,void(n=q(n))(e,a(y));y[f]=t,++b===u?(m=ot,n(null,y),n=ot):v?it(m):(v=!0,m()),v=!1}n=n||at;var u,f,p,g,_,m,v=!1,y={},b=0;if(ut(e)?(u=e.length,m=3===t.length?r:i):e&&(pt&&e[pt]?(u=e.size,g=e[pt](),m=3===t.length?l:s):(void 0===e?"undefined":o(e))===dt&&(p=ft(e),u=p.length,m=3===t.length?d:c)),!u)return n(null,y);m()}function X(e,t,n,i){function r(){(g=k++)<f&&n(e[g],u(g))}function s(){(g=k++)<f&&n(e[g],g,u(g))}function l(){!1===(y=v.next()).done&&n(y.value,u(k++))}function c(){!1===(y=v.next()).done&&n(y.value,k,u(k++))}function d(){(g=k++)<f&&(_=m[g],n(e[_],u(_)))}function h(){(g=k++)<f&&(_=m[g],n(e[_],_,u(_)))}function u(e){return function(t,n){if(null===e&&ot(),t)return e=null,b=at,void(i=z(i))(t,a(x));x[e]=n,e=null,++w===f?i(null,x):j?it(b):(j=!0,b()),j=!1}}i=i||at;var f,g,_,m,v,y,b,j=!1,x={},k=0,w=0;if(ut(e)?(f=e.length,b=3===n.length?s:r):e&&(pt&&e[pt]?(f=e.size,v=e[pt](),b=3===n.length?c:l):(void 0===e?"undefined":o(e))===dt&&(m=ft(e),f=m.length,b=3===n.length?h:d)),!f||isNaN(t)||t<1)return i(null,x);p(t>f?f:t,b)}function G(e,t,n,i){return function(r,s,a){function l(e){var t=!1;return function(n,r){t&&ot(),t=!0,n?(a=z(a))(n):!!r===i?(a=z(a))(null,e):++h===c&&a(null)}}a=a||at;var c,d,h=0;ut(r)?(c=r.length,e(r,s,l)):r&&(pt&&r[pt]?(c=r.size,n(r,s,l)):(void 0===r?"undefined":o(r))===dt&&(d=ft(r),c=d.length,t(r,s,l,d))),c||a(null)}}function V(e){return function(t,n,i){function r(){p=t[y],n(p,h)}function s(){p=t[y],n(p,y,h)}function a(){p=_.next().value,n(p,h)}function l(){p=_.next().value,n(p,y,h)}function c(){p=t[g[y]],n(p,h)}function d(){f=g[y],p=t[f],n(p,f,h)}function h(t,n){t?i(t):!!n===e?(m=ot,i(null,p)):++y===u?(m=ot,i(null)):v?it(m):(v=!0,m()),v=!1}i=q(i||at);var u,f,p,g,_,m,v=!1,y=0;if(ut(t)?(u=t.length,m=3===n.length?s:r):t&&(pt&&t[pt]?(u=t.size,_=t[pt](),m=3===n.length?l:a):(void 0===t?"undefined":o(t))===dt&&(g=ft(t),u=g.length,m=3===n.length?d:c)),!u)return i(null);m()}}function Z(e){return function(t,n,i,r){function s(){(g=k++)<f&&(m=t[g],i(m,u(m)))}function a(){(g=k++)<f&&(m=t[g],i(m,g,u(m)))}function l(){!1===(b=y.next()).done&&(m=b.value,i(m,u(m)))}function c(){!1===(b=y.next()).done&&(m=b.value,i(m,k++,u(m)))}function d(){(g=k++)<f&&(m=t[v[g]],i(m,u(m)))}function h(){k<f&&(_=v[k++],m=t[_],i(m,_,u(m)))}function u(t){var n=!1;return function(i,s){n&&ot(),n=!0,i?(j=at,(r=z(r))(i)):!!s===e?(j=at,(r=z(r))(null,t)):++w===f?r(null):x?it(j):(x=!0,j()),x=!1}}r=r||at;var f,g,_,m,v,y,b,j,x=!1,k=0,w=0;if(ut(t)?(f=t.length,j=3===i.length?a:s):t&&(pt&&t[pt]?(f=t.size,y=t[pt](),j=3===i.length?c:l):(void 0===t?"undefined":o(t))===dt&&(v=ft(t),f=v.length,j=3===i.length?h:d)),!f||isNaN(n)||n<1)return r(null);p(n>f?f:n,j)}}function Q(e,t,n,i){return function(r,s,l){function c(e,t){return function(n,r){if(null===e&&ot(),n)return e=null,void(l=z(l))(n,a(f));!!r===i&&(f[e]=t),e=null,++u===d&&l(null,f)}}l=l||at;var d,h,u=0,f={};if(ut(r)?(d=r.length,e(r,s,c)):r&&(pt&&r[pt]?(d=r.size,n(r,s,c)):(void 0===r?"undefined":o(r))===dt&&(h=ft(r),d=h.length,t(r,s,c,h))),!d)return l(null,{})}}function ee(e){return function(t,n,i){function r(){f=b,p=t[b],n(p,h)}function s(){f=b,p=t[b],n(p,b,h)}function a(){f=b,p=_.next().value,n(p,h)}function l(){f=b,p=_.next().value,n(p,f,h)}function c(){f=g[b],p=t[f],n(p,h)}function d(){f=g[b],p=t[f],n(p,f,h)}function h(t,n){if(t)return void i(t,y);!!n===e&&(y[f]=p),++b===u?(m=ot,i(null,y)):v?it(m):(v=!0,m()),v=!1}i=q(i||at);var u,f,p,g,_,m,v=!1,y={},b=0;if(ut(t)?(u=t.length,m=3===n.length?s:r):t&&(pt&&t[pt]?(u=t.size,_=t[pt](),m=3===n.length?l:a):(void 0===t?"undefined":o(t))===dt&&(g=ft(t),u=g.length,m=3===n.length?d:c)),!u)return i(null,{});m()}}function te(e){return function(t,n,i,r){function s(){(_=C++)<g&&(v=t[_],i(v,f(v,_)))}function l(){(_=C++)<g&&(v=t[_],i(v,_,f(v,_)))}function c(){!1===(j=b.next()).done&&(v=j.value,i(v,f(v,C++)))}function d(){!1===(j=b.next()).done&&(v=j.value,i(v,C,f(v,C++)))}function h(){C<g&&(m=y[C++],v=t[m],i(v,f(v,m)))}function u(){C<g&&(m=y[C++],v=t[m],i(v,m,f(v,m)))}function f(t,n){return function(i,s){if(null===n&&ot(),i)return n=null,x=at,void(r=z(r))(i,a(w));!!s===e&&(w[n]=t),n=null,++A===g?(x=ot,(r=q(r))(null,w)):k?it(x):(k=!0,x()),k=!1}}r=r||at;var g,_,m,v,y,b,j,x,k=!1,w={},C=0,A=0;if(ut(t)?(g=t.length,x=3===i.length?l:s):t&&(pt&&t[pt]?(g=t.size,b=t[pt](),x=3===i.length?d:c):(void 0===t?"undefined":o(t))===dt&&(y=ft(t),g=y.length,x=3===i.length?u:h)),!g||isNaN(n)||n<1)return r(null,{});p(n>g?g:n,x)}}function ne(e,t,n,i){function r(t){n(t,e[v],h)}function s(t){n(t,e[v],v,h)}function a(){n(t,g.next().value,h)}function l(){n(t,g.next().value,v,h)}function c(t){n(t,e[p[v]],h)}function d(t){f=p[v],n(t,e[f],f,h)}function h(e,t){e?i(e,t):++v===u?(n=ot,i(null,t)):m?it(function(){_(t)}):(m=!0,_(t)),m=!1}i=q(i||at);var u,f,p,g,_,m=!1,v=0;if(ut(e)?(u=e.length,_=4===n.length?s:r):e&&(pt&&e[pt]?(u=e.size,g=e[pt](),_=4===n.length?l:a):(void 0===e?"undefined":o(e))===dt&&(p=ft(e),u=p.length,_=4===n.length?d:c)),!u)return i(null,t);_(t)}function ie(e,t,n,i){function r(t){n(t,e[--d],c)}function s(t){n(t,e[--d],d,c)}function a(t){n(t,e[f[--d]],c)}function l(t){u=f[--d],n(t,e[u],u,c)}function c(e,t){e?i(e,t):0===d?(m=ot,i(null,t)):v?it(function(){m(t)}):(v=!0,m(t)),v=!1}i=q(i||at);var d,h,u,f,p,g,_,m,v=!1;if(ut(e))d=e.length,m=4===n.length?s:r;else if(e)if(pt&&e[pt]){for(d=e.size,_=Array(d),p=e[pt](),h=-1;!1===(g=p.next()).done;)_[++h]=g.value;e=_,m=4===n.length?s:r}else(void 0===e?"undefined":o(e))===dt&&(f=ft(e),d=f.length,m=4===n.length?l:a);else;if(!d)return i(null,t);m(t)}function re(e,t,n,i){function r(){n(m,e[y],h)}function s(){n(m,e[y],y,h)}function a(){n(m,g.next().value,h)}function l(){n(m,g.next().value,y,h)}function c(){n(m,e[p[y]],h)}function d(){f=p[y],n(m,e[f],f,h)}function h(e,t){e?i(e,m):++y===u?(_=ot,i(null,m)):!1===t?(_=ot,i(null,m)):v?it(_):(v=!0,_()),v=!1}3===arguments.length&&(i=n,n=t,t=void 0),i=q(i||at);var u,f,p,g,_,m,v=!1,y=0;if(ut(e)?(u=e.length,m=void 0!==t?t:[],_=4===n.length?s:r):e&&(pt&&e[pt]?(u=e.size,g=e[pt](),m=void 0!==t?t:{},_=4===n.length?l:a):(void 0===e?"undefined":o(e))===dt&&(p=ft(e),u=p.length,m=void 0!==t?t:{},_=4===n.length?d:c)),!u)return i(null,void 0!==t?t:m||{});_()}function se(e,t,n,i,s){function l(){(m=C++)<_&&i(k,e[m],q(g))}function c(){(m=C++)<_&&i(k,e[m],m,q(g))}function d(){!1===(j=b.next()).done&&i(k,j.value,q(g))}function h(){!1===(j=b.next()).done&&i(k,j.value,C++,q(g))}function u(){(m=C++)<_&&i(k,e[y[m]],q(g))}function f(){(m=C++)<_&&(v=y[m],i(k,e[v],v,q(g)))}function g(e,t){e?(x=at,s(e,ut(k)?r(k):a(k)),s=at):++A===_?s(null,k):!1===t?(x=at,s(null,ut(k)?r(k):a(k)),s=at):w?it(x):(w=!0,x()),w=!1}4===arguments.length&&(s=i,i=n,n=void 0),s=s||at;var _,m,v,y,b,j,x,k,w=!1,C=0,A=0;if(ut(e)?(_=e.length,k=void 0!==n?n:[],x=4===i.length?c:l):e&&(pt&&e[pt]?(_=e.size,b=e[pt](),k=void 0!==n?n:{},x=4===i.length?h:d):(void 0===e?"undefined":o(e))===dt&&(y=ft(e),_=y.length,k=void 0!==n?n:{},x=4===i.length?f:u)),!_||isNaN(t)||t<1)return s(null,void 0!==n?n:k||{});p(t>_?_:t,x)}function ae(e,t,n){function i(){f=e[j],t(f,d)}function r(){f=e[j],t(f,j,d)}function s(){f=m.next().value,t(f,d)}function a(){f=m.next().value,t(f,j,d)}function l(){f=e[p[j]],t(f,d)}function c(){u=p[j],f=e[u],t(f,u,d)}function d(e,t){v[j]={value:f,criteria:t},e?n(e):++j===h?(y=ot,v.sort(_),n(null,g(v,"value"))):b?it(y):(b=!0,y()),b=!1}n=q(n||at);var h,u,f,p,m,v,y,b=!1,j=0;if(ut(e)?(h=e.length,y=3===t.length?r:i):e&&(pt&&e[pt]?(h=e.size,m=e[pt](),y=3===t.length?a:s):(void 0===e?"undefined":o(e))===dt&&(p=ft(e),h=p.length,y=3===t.length?c:l)),!h)return n(null,[]);v=Array(h),y()}function oe(e,t,n,i){function r(){C<u&&(v=e[C++],n(v,h(v)))}function s(){(f=C++)<u&&(v=e[f],n(v,f,h(v)))}function a(){!1===(j=b.next()).done&&(v=j.value,n(v,h(v)))}function l(){!1===(j=b.next()).done&&(v=j.value,n(v,C++,h(v)))}function c(){C<u&&(v=e[y[C++]],n(v,h(v)))}function d(){C<u&&(m=y[C++],v=e[m],n(v,m,h(v)))}function h(e){var t=!1;return function(n,r){t&&ot(),t=!0,x[A]={value:e,criteria:r},n?(k=at,i(n),i=at):++A===u?(x.sort(_),i(null,g(x,"value"))):w?it(k):(w=!0,k()),w=!1}}i=i||at;var u,f,m,v,y,b,j,x,k,w=!1,C=0,A=0;if(ut(e)?(u=e.length,k=3===n.length?s:r):e&&(pt&&e[pt]?(u=e.size,b=e[pt](),k=3===n.length?l:a):(void 0===e?"undefined":o(e))===dt&&(y=ft(e),u=y.length,k=3===n.length?d:c)),!u||isNaN(t)||t<1)return i(null,[]);x=Array(u),p(t>u?u:t,k)}function le(e,t,n){function i(e,t){if(e)return n(e);n(null,!!t)}n=n||at,wt(e,t,i)}function ce(e,t,n){function i(e,t){if(e)return n(e);n(null,!!t)}n=n||at,Ct(e,t,i)}function de(e,t,n,i){function r(e,t){if(e)return i(e);i(null,!!t)}i=i||at,At(e,t,n,r)}function he(e,t,n){function i(){t(e[y],d)}function r(){t(e[y],y,d)}function s(){t(p.next().value,d)}function a(){g=p.next().value,t(g,y,d)}function l(){t(e[f[y]],d)}function c(){u=f[y],t(e[u],u,d)}function d(e,t){t&&Array.prototype.push.apply(v,ut(t)?t:[t]),e?n(e,v):++y===h?(_=ot,n(null,v)):m?it(_):(m=!0,_()),m=!1}n=q(n||at);var h,u,f,p,g,_,m=!1,v=[],y=0;if(ut(e)?(h=e.length,_=3===t.length?r:i):e&&(pt&&e[pt]?(h=e.size,p=e[pt](),_=3===t.length?a:s):(void 0===e?"undefined":o(e))===dt&&(f=ft(e),h=f.length,_=3===t.length?c:l)),!h)return n(null,v);_()}function ue(e,t,n,i){function r(){j<u&&n(e[j++],q(h))}function s(){(f=j++)<u&&n(e[f],f,q(h))}function a(){!1===(m=_.next()).done&&n(m.value,q(h))}function l(){!1===(m=_.next()).done&&n(m.value,j++,q(h))}function c(){j<u&&n(e[k[j++]],q(h))}function d(){j<u&&(g=k[j++],n(e[g],g,q(h)))}function h(e,t){t&&Array.prototype.push.apply(y,ut(t)?t:[t]),e?(v=at,(i=z(i))(e,y)):++x===u?(v=ot,(i=q(i))(null,y)):b?it(v):(b=!0,v()),b=!1}i=i||at;var u,f,g,_,m,v,y=[],b=!1,j=0,x=0;if(ut(e))u=e.length,v=3===n.length?s:r;else if(e){if(pt&&e[pt])u=e.size,_=e[pt](),v=3===n.length?l:a;else if((void 0===e?"undefined":o(e))===dt){var k=ft(e);u=k.length,v=3===n.length?d:c}}else;if(!u||isNaN(t)||t<1)return i(null,y);p(t>u?u:t,v)}function fe(e,t,n){function i(){p=e[y],t(p,h)}function r(){p=e[y],t(p,y,h)}function s(){p=_.next().value,t(p,h)}function l(){p=_.next().value,t(p,y,h)}function c(){p=e[g[y]],t(p,h)}function d(){f=g[y],p=e[f],t(p,f,h)}function h(e,t){if(e)return m=ot,void(n=q(n))(e,a(b));var i=b[t];i?i.push(p):i=b[t]=[p],++y===u?(m=ot,n(null,b)):v?it(m):(v=!0,m()),v=!1}n=q(n||at);var u,f,p,g,_,m,v=!1,y=0,b={};if(ut(e)?(u=e.length,m=3===t.length?r:i):e&&(pt&&e[pt]?(u=e.size,_=e[pt](),m=3===t.length?l:s):(void 0===e?"undefined":o(e))===dt&&(g=ft(e),u=g.length,m=3===t.length?d:c)),!u)return n(null,b);m()}function pe(e,t,n,i){function r(){k<f&&(m=e[k++],n(m,u(m)))}function s(){(g=k++)<f&&(m=e[g],n(m,g,u(m)))}function l(){!1===(b=y.next()).done&&(m=b.value,n(m,u(m)))}function c(){!1===(b=y.next()).done&&(m=b.value,n(m,k++,u(m)))}function d(){k<f&&(m=e[v[k++]],n(m,u(m)))}function h(){k<f&&(_=v[k++],m=e[_],n(m,_,u(m)))}function u(e){var t=!1;return function(n,r){if(t&&ot(),t=!0,n)return j=at,void(i=z(i))(n,a(C));var s=C[r];s?s.push(e):C[r]=[e],++w===f?i(null,C):x?it(j):(x=!0,j()),x=!1}}i=i||at;var f,g,_,m,v,y,b,j,x=!1,k=0,w=0,C={};if(ut(e)?(f=e.length,j=3===n.length?s:r):e&&(pt&&e[pt]?(f=e.size,y=e[pt](),j=3===n.length?c:l):(void 0===e?"undefined":o(e))===dt&&(v=ft(e),f=v.length,j=3===n.length?h:d)),!f||isNaN(t)||t<1)return i(null,C);p(t>f?f:t,j)}function ge(e,t){function n(){l=f,e[f](r)}function i(){l=c[f],e[l](r)}function r(e,n){if(e)return h=ot,void(t=q(t))(e,d);d[l]=arguments.length<=2?n:s(arguments,1),++f===a?(h=ot,t(null,d)):u?it(h):(u=!0,h()),u=!1}t=t||at;var a,l,c,d,h,u=!1,f=0;if(ut(e))a=e.length,d=Array(a),h=n;else{if(!e||(void 0===e?"undefined":o(e))!==dt)return t(null);c=ft(e),a=c.length,d={},h=i}if(!a)return t(null,d);h()}function _e(e,t,n){function i(){(c=_++)<l&&e[c](a(c))}function r(){_<l&&(d=h[_++],e[d](a(d)))}function a(e){return function(t,i){if(null===e&&ot(),t)return e=null,f=at,void(n=z(n))(t,u);u[e]=arguments.length<=2?i:s(arguments,1),e=null,++m===l?n(null,u):g?it(f):(g=!0,f()),g=!1}}n=n||at;var l,c,d,h,u,f,g=!1,_=0,m=0;if(ut(e)?(l=e.length,u=Array(l),f=i):e&&(void 0===e?"undefined":o(e))===dt&&(h=ft(e),l=h.length,u={},f=r),!l||isNaN(t)||t<1)return n(null,u);p(t>l?l:t,f)}function me(e,t){return ut(e)?0!==e.length||(t(null),!1):(t(new Error("First argument to waterfall must be an array of functions")),!1)}function ve(e,t){function n(){switch(o=!1,u.length){case 0:case 1:return h(i);case 2:return h(u[1],i);case 3:return h(u[1],u[2],i);case 4:return h(u[1],u[2],u[3],i);case 5:return h(u[1],u[2],u[3],u[4],i);case 6:return h(u[1],u[2],u[3],u[4],u[5],i);default:return u=s(u,1),u.push(i),h.apply(null,u)}}function i(i,s){return o&&ot(),o=!0,i?(a=t,t=ot,void a(i)):++c===d?(a=t,t=ot,void(arguments.length<=2?a(i,s):a.apply(null,r(arguments)))):(u=arguments,h=e[c]||ot,l?it(n):(l=!0,n()),void(l=!1))}if(t=t||at,me(e,t)){var a,o,l,c=0,d=e.length,h=e[c],u=[];n()}}function ye(e,t){function n(n,s){if(n)return d=ot,void(t=q(t))(n);if(++i===o){d=ot;var h=t;return t=ot,void(2===arguments.length?h(n,s):h.apply(null,r(arguments)))}l=e[i],c=arguments,a?it(d):(a=!0,d()),a=!1}if(t=t||at,me(e,t)){var i=0,a=!1,o=e.length,l=e[i],c=[],d=function(){switch(l.length){case 0:try{n(null,l())}catch(e){n(e)}return;case 1:return l(n);case 2:return l(c[1],n);case 3:return l(c[1],c[2],n);case 4:return l(c[1],c[2],c[3],n);case 5:return l(c[1],c[2],c[3],c[4],n);default:return c=s(c,1),c[l.length-1]=n,l.apply(null,c)}};d()}}function be(e,t,n){function i(){o?it(r):(o=!0,t(a)),o=!1}function r(){t(a)}function a(t,r){return t?n(t):arguments.length<=2?void(e(r)?i():n(null,r)):(r=s(arguments,1),void(e.apply(null,r)?i():n.apply(null,[null].concat(r))))}n=n||at;var o=!1;e()?i():n(null)}function je(e,t,n){function i(){o?it(r):(o=!0,e(a)),o=!1}function r(){e(a)}function a(e,r){return e?n(e):arguments.length<=2?void(t(r)?i():n(null,r)):(r=s(arguments,1),void(t.apply(null,r)?i():n.apply(null,[null].concat(r))))}n=n||at;var o=!1;r()}function xe(e,t,n){function i(){o?it(r):(o=!0,t(a)),o=!1}function r(){t(a)}function a(t,r){return t?n(t):arguments.length<=2?void(e(r)?n(null,r):i()):(r=s(arguments,1),void(e.apply(null,r)?n.apply(null,[null].concat(r)):i()))}n=n||at;var o=!1;e()?n(null):i()}function ke(e,t,n){function i(){o?it(r):(o=!0,e(a)),o=!1}function r(){e(a)}function a(e,r){return e?n(e):arguments.length<=2?void(t(r)?n(null,r):i()):(r=s(arguments,1),void(t.apply(null,r)?n.apply(null,[null].concat(r)):i()))}n=n||at;var o=!1;r()}function we(e,t,n){function i(){e(r)}function r(e,i){if(e)return n(e);i?t(s):n(null)}function s(e){if(e)return n(e);i()}n=n||at,i()}function Ce(e,t,n){function i(t,i){if(t)return n(t);i?e(r):n(null)}function r(e,r){if(e)return n(e);switch(arguments.length){case 0:case 1:t(i);break;case 2:t(r,i);break;default:var a=s(arguments,1);a.push(i),t.apply(null,a)}}n=n||at,i(null,!0)}function Ae(e,t){function n(){e(i)}function i(e){if(e){if(t)return t(e);throw e}r?it(n):(r=!0,n()),r=!1}var r=!1;n()}function Te(){return Ee.apply(null,c(arguments))}function Ee(){var e=r(arguments);return function(){function t(e,t,n){var r=function(e){var t=s(arguments,1);n(e,t)};e.push(r),t.apply(i,e)}function n(e,t){t=ut(t)?t:[t],t.unshift(e),l.apply(i,t)}var i=this,a=r(arguments),l=a[a.length-1];(void 0===l?"undefined":o(l))===ht?a.pop():l=at,ne(e,a,t,n)}}function $e(e){return function(t){var n=function(){function n(e,t){e.apply(i,s.concat([t]))}var i=this,s=r(arguments),a=s.pop()||at;return e(t,n,a)};if(arguments.length>1){return n.apply(this,s(arguments,1))}return n}}function Se(){this.head=null,this.tail=null,this.length=0}function Oe(e,t,n,i){function s(e,t){l(e,t)}function a(e,t){l(e,t,!0)}function o(e){var t={data:e,callback:x};k?A._tasks.unshift(t):A._tasks.push(t),it(A.process)}function l(e,t,n){if(null==t)t=at;else if("function"!=typeof t)throw new Error("task callback must be a function");A.started=!0;var i=ut(e)?e:[e];if(void 0===e||!i.length)return void(A.idle()&&it(A.drain));k=n,x=t,u(i,o)}function c(){A.drain=at,A._tasks.empty()}function d(e,t){var n=!1;return function(i,s){n&&ot(),n=!0,w--;for(var a,o=-1,l=C.length,c=-1,d=t.length,h=arguments.length>2,u=h&&r(arguments);++c<d;){for(a=t[c];++o<l;)C[o]===a&&(C.splice(o,1),o=l,l--);o=-1,h?a.callback.apply(a,u):a.callback(i,s),i&&e.error(i,a.data)}w<=e.concurrency-e.buffer&&e.unsaturated(),e._tasks.length+w===0&&e.drain(),e.process()}}function h(){for(;!A.paused&&w<A.concurrency&&A._tasks.length;){var e=A._tasks.shift();0===A._tasks.length&&A.empty(),w++,C.push(e),w===A.concurrency&&A.saturated();var n=d(A,[e]);t(e.data,n)}}function f(){for(;!A.paused&&w<A.concurrency&&A._tasks.length;){for(var e=A._tasks.splice(A.payload||A._tasks.length),n=-1,i=e.length,r=Array(i);++n<i;)r[n]=e[n].data;0===A._tasks.length&&A.empty(),w++,Array.prototype.push.apply(C,e),w===A.concurrency&&A.saturated();var s=d(A,e);t(r,s)}}function g(){return A._tasks.length}function _(){return w}function m(){return C}function v(){return A.length()+w===0}function y(){A.paused=!0}function b(){it(A.process)}function j(){if(!1!==A.paused){A.paused=!1;p(A.concurrency<A._tasks.length?A.concurrency:A._tasks.length,b)}}if(void 0===n)n=1;else if(isNaN(n)||n<1)throw new Error("Concurrency must not be zero");var x,k,w=0,C=[],A={_tasks:new Se,concurrency:n,payload:i,saturated:at,unsaturated:at,buffer:n/4,empty:at,drain:at,error:at,started:!1,paused:!1,push:s,kill:c,unshift:a,process:e?h:f,length:g,running:_,workersList:m,idle:v,pause:y,resume:j,_worker:t};return A}function Ne(e,t){return Oe(!0,e,t)}function Le(e,t){function n(e,t,n){i.started=!0,t=t||0;var r=ut(e)?e:[e],s=r.length;if(void 0===e||0===s)return void(i.idle()&&it(i.drain));n=(void 0===n?"undefined":o(n))===ht?n:at;for(var a=i._tasks.head;a&&t>=a.priority;)a=a.next;for(;s--;){var l={data:r[s],priority:t,callback:n};a?i._tasks.insertBefore(a,l):i._tasks.push(l),it(i.process)}}var i=Oe(!0,e,t);return i.push=n,delete i.unshift,i}function Pe(e,t){return Oe(!1,e,1,t)}function De(e,t,n){function i(e,t){function i(e,i){if(null===t&&ot(),g--,d--,i=arguments.length<=2?i:s(arguments,1),e){var r=a(p);r[t]=i,t=null;var o=n;return n=at,void o(e,r)}p[t]=i,l(t),t=null}function r(){0==--f&&_.push([o,u,i])}var o,u;if(!ut(e))return o=e,u=0,void _.push([o,u,i]);var f=e.length-1;if(o=e[f],u=f,0===f)return void _.push([o,u,i]);for(var v=-1;++v<f;){var y=e[v];if(h(c,y)){var b="async.auto task `"+y+"` has non-existent dependency in "+e.join(", ");throw new Error(b)}var j=m[y];j||(j=m[y]=[]),j.push(r)}}function r(){if(0===_.length&&0===g){if(0!==d)throw new Error("async.auto task has cyclic dependencies");return n(null,p)}for(;_.length&&g<t&&n!==at;){g++;var e=_.shift();0===e[1]?e[0](e[2]):e[0](p,e[2])}}function l(e){u(m[e]||[],function(e){e()}),r()}(void 0===t?"undefined":o(t))===ht&&(n=t,t=null);var c=ft(e),d=c.length,p={};if(0===d)return n(null,p);var g=0,_=[],m={};n=q(n||at),t=t||d,f(e,i,c),r()}function Ie(e){return e=e.toString().replace(Xt,""),e=e.match(Yt)[2].replace(" ",""),e=e?e.split(Wt):[],e=e.map(function(e){return e.replace(Jt,"").trim()})}function Me(e,t,n){function i(e,t){function n(t,n){switch(a){case 1:e(t[i[0]],n);break;case 2:e(t[i[0]],t[i[1]],n);break;case 3:e(t[i[0]],t[i[1]],t[i[2]],n);break;default:for(var r=-1;++r<a;)i[r]=t[i[r]];i[r]=n,e.apply(null,i)}}var i,a=e.length;if(ut(e)){if(0===a)throw new Error("autoInject task functions require explicit parameters.");if(i=r(e),a=i.length-1,e=i[a],0===a)return void(s[t]=e)}else{if(1===a)return void(s[t]=e);if(i=Ie(e),0===a&&0===i.length)throw new Error("autoInject task functions require explicit parameters.");a=i.length-1}i[a]=n,s[t]=i}var s={};f(e,i,ft(e)),De(s,t,n)}function qe(e,t,n){function i(){t(s)}function s(e,t){if(++u===c||!e||h&&!h(e)){if(arguments.length<=2)return n(e,t);var s=r(arguments);return n.apply(null,s)}i()}function a(){t(l)}function l(e,t){if(++u===c||!e||h&&!h(e)){if(arguments.length<=2)return n(e,t);var i=r(arguments);return n.apply(null,i)}setTimeout(a,d(u))}var c,d,h,u=0;if(arguments.length<3&&(void 0===e?"undefined":o(e))===ht)n=t||at,t=e,e=null,c=lt;else switch(n=n||at,void 0===e?"undefined":o(e)){case"object":o(e.errorFilter)===ht&&(h=e.errorFilter);var f=e.interval;switch(void 0===f?"undefined":o(f)){case ht:d=f;break;case"string":case"number":f=+f,d=f?function(){return f}:function(){return ct}}c=+e.times||lt;break;case"number":c=e||lt;break;case"string":c=+e||lt;break;default:throw new Error("Invalid arguments for async.retry")}if("function"!=typeof t)throw new Error("Invalid arguments for async.retry");t(d?l:s)}function ze(e,t){function n(){function n(e){t(e)}function i(e){t(l[0],e)}function s(e){t(l[0],l[1],e)}function a(e){l[c]=e,t.apply(null,l)}var o,l=r(arguments),c=l.length-1,d=l[c];switch(t.length){case 1:o=n;break;case 2:o=i;break;case 3:o=s;break;default:o=a}e?qe(e,o,d):qe(o,d)}return t||(t=e,e=null),n}function He(e){function t(s){var a=function t(){if(n){var a=i[s]||s;e[a].apply(null,r(arguments))}return t.next()};return a.next=function(){return s<n-1?t(s+1):null},a}var n=0,i=[];return ut(e)?n=e.length:(i=ft(e),n=i.length),t(0)}function Ke(e){switch(arguments.length){case 0:case 1:return e;case 2:return e.bind(null,arguments[1]);case 3:return e.bind(null,arguments[1],arguments[2]);case 4:return e.bind(null,arguments[1],arguments[2],arguments[3]);case 5:return e.bind(null,arguments[1],arguments[2],arguments[3],arguments[4]);default:var t=arguments.length,n=0,i=Array(t);for(i[n]=null;++n<t;)i[n]=arguments[n];return e.bind.apply(e,i)}}function Fe(e,t,n){function i(){c=setTimeout(s,t);var n=r(arguments),i=n.length-1;l=n[i],n[i]=a,o(e,n)}function s(){var t=e.name||"anonymous",i=new Error('Callback function "'+t+'" timed out.');i.code="ETIMEDOUT",n&&(i.info=n),c=null,l(i)}function a(){null!==c&&(o(l,r(arguments)),clearTimeout(c))}function o(e,t){switch(t.length){case 0:e();break;case 1:e(t[0]);break;case 2:e(t[0],t[1]);break;default:e.apply(null,t)}}var l,c;return i}function Re(e,t,n){function i(e){t(e,r(e))}function r(t){return function(i,r){null===t&&ot(),s[t]=r,t=null,i?(n(i),n=at):0==--e&&n(null,s)}}if(n=n||at,e=+e,isNaN(e)||e<1)return n(null,[]);var s=Array(e);p(e,i)}function Ue(e,t,n){function i(){t(o,r)}function r(t,r){s[o]=r,t?(n(t),n=ot):++o>=e?(n(null,s),n=ot):a?it(i):(a=!0,i()),a=!1}if(n=n||at,e=+e,isNaN(e)||e<1)return n(null,[]);var s=Array(e),a=!1,o=0;i()}function Be(e,t,n,i){function r(){var t=l++;t<e&&n(t,s(t))}function s(t){return function(n,s){null===t&&ot(),a[t]=s,t=null,n?(i(n),i=at):++c>=e?(i(null,a),i=ot):o?it(r):(o=!0,r()),o=!1}}if(i=i||at,e=+e,isNaN(e)||e<1||isNaN(t)||t<1)return i(null,[]);var a=Array(e),o=!1,l=0,c=0;p(t>e?e:t,r)}function Ye(e,t){t=z(t||at);var n,i,r=-1;if(ut(e))for(n=e.length;++r<n;)e[r](t);else{if(!e||(void 0===e?"undefined":o(e))!==dt)return t(new TypeError("First argument to race must be a collection of functions"));for(i=ft(e),n=i.length;++r<n;)e[i[r]](t)}n||t(null)}function We(e,t){t=t||function(e){return e};var n={},i={},s=function(){function s(){var e=r(arguments);n[l]=e;var t=i[l];delete i[l];for(var s=-1,a=t.length;++s<a;)t[s].apply(null,e)}var a=r(arguments),o=a.pop(),l=t.apply(null,a);return d(n,l)?void it(function(){o.apply(null,n[l])}):d(i,l)?i[l].push(o):(i[l]=[o],a.push(s),void e.apply(null,a))};return s.memo=n,s.unmemoized=e,s}function Je(e){return function(){return(e.unmemoized||e).apply(null,arguments)}}function Xe(e){return function(){function t(){var e=r(arguments);a?it(function(){s.apply(null,e)}):s.apply(null,e)}var n=r(arguments),i=n.length-1,s=n[i],a=!0;n[i]=t,e.apply(this,n),a=!1}}function Ge(){var e=[null].concat(r(arguments));return function(t){t=arguments[arguments.length-1],t.apply(this,e)}}function Ve(e){return function(){var t,n=r(arguments),i=n.pop();try{t=e.apply(this,n)}catch(e){return i(e)}t&&(void 0===t?"undefined":o(t))===dt&&o(t.then)===ht?t.then(function(e){i(null,e)},function(e){i(e.message?e:new Error(e))}):i(null,t)}}function Ze(e){return function(){function t(e,t){if(e)return n(null,{error:e});arguments.length>2&&(t=s(arguments,1)),n(null,{value:t})}var n;switch(arguments.length){case 1:return n=arguments[0],e(t);case 2:return n=arguments[1],e(arguments[0],t);default:var i=r(arguments),a=i.length-1;n=i[a],i[a]=t,e.apply(this,i)}}}function Qe(e){function t(e,t){i[t]=Ze(e)}var n,i,r;return ut(e)?(n=e.length,i=Array(n),u(e,t)):e&&(void 0===e?"undefined":o(e))===dt&&(r=ft(e),n=r.length,i={},f(e,t,r)),i}function et(e){function t(t){if(("undefined"==typeof console?"undefined":o(console))===dt){if(t)return void(console.error&&console.error(t));if(console[e]){u(s(arguments,1),function(t){console[e](t)})}}}return function(e){var n=s(arguments,1);n.push(t),e.apply(null,n)}}function tt(){return t(),e}function nt(){return t(!1),e}var it,rt,st,at=function(){},ot=function(){throw new Error("Callback was already called.")},lt=5,ct=0,dt="object",ht="function",ut=Array.isArray,ft=Object.keys,pt=("undefined"==typeof Symbol?"undefined":o(Symbol))===ht&&Symbol.iterator;t();var gt=function(e,t,n){return function(i,r,s){function a(e,t){e?(s=z(s))(e):++d===l?s(null):!1===t&&(s=z(s))(null)}s=s||at;var l,c,d=0;ut(i)?(l=i.length,e(i,r,a)):i&&(pt&&i[pt]?(l=i.size,n(i,r,a)):(void 0===i?"undefined":o(i))===dt&&(c=ft(i),l=c.length,t(i,r,a,c))),l||s(null)}}(m,v,y),_t=H(C,A,T,!0),mt=H(C,E,$,!1),vt=K(L,P,D,!0),yt=F(!0),bt=R(!0),jt=K(L,P,D,!1),xt=F(!1),kt=R(!1),wt=G(S,O,N,!0),Ct=V(!0),At=Z(!0),Tt=function(e,t,n){var i=G(e,t,n,!1);return function(e,t,n){function r(e,t){if(e)return n(e);n(null,!t)}n=n||at,i(e,t,r)}}(S,O,N),Et=function(){var e=V(!1);return function(t,n,i){function r(e,t){if(e)return i(e);i(null,!t)}i=i||at,e(t,n,r)}}(),$t=function(){var e=Z(!1);return function(t,n,i,r){function s(e,t){if(e)return r(e);r(null,!t)}r=r||at,e(t,n,i,s)}}(),St=Q(L,I,M,!0),Ot=ee(!0),Nt=te(!0),Lt=Q(L,I,M,!1),Pt=ee(!1),Dt=te(!1),It=function(e,t,n){return function(i,s,l,c){function d(e,t){e?(c=z(c))(e,ut(f)?r(f):a(f)):++p===h?c(null,f):!1===t&&(c=z(c))(null,ut(f)?r(f):a(f))}3===arguments.length&&(c=l,l=s,s=void 0),c=c||at;var h,u,f,p=0;ut(i)?(h=i.length,f=void 0!==s?s:[],e(i,f,l,d)):i&&(pt&&i[pt]?(h=i.size,f=void 0!==s?s:{},n(i,f,l,d)):(void 0===i?"undefined":o(i))===dt&&(u=ft(i),h=u.length,f=void 0!==s?s:{},t(i,f,l,d,u))),h||c(null,void 0!==s?s:f||{})}}(b,j,x),Mt=function(e,t,n){return function(i,r,s){function a(e){var t=!1;return function(n,i){t&&ot(),t=!0,c[d]={value:e,criteria:i},n?(s=z(s))(n):++d===l&&(c.sort(_),s(null,g(c,"value")))}}s=s||at;var l,c,d=0;if(ut(i))l=i.length,c=Array(l),e(i,r,a);else if(i){if(pt&&i[pt])l=i.size,c=Array(l),n(i,r,a);else if((void 0===i?"undefined":o(i))===dt){var h=ft(i);l=h.length,c=Array(l),t(i,r,a,h)}}else;l||s(null,[])}}(S,O,N),qt=function(e,t,n){return function(i,s,a){function l(e,t){t&&Array.prototype.push.apply(h,ut(t)?t:[t]),e?(a=z(a))(e,r(h)):++d===c&&a(null,h)}a=a||at;var c,d=0,h=[];if(ut(i))c=i.length,e(i,s,l);else if(i){if(pt&&i[pt])c=i.size,n(i,s,l);else if((void 0===i?"undefined":o(i))===dt){var u=ft(i);c=u.length,t(i,s,l,u)}}else;c||a(null,h)}}(m,v,y),zt=function(e,t,n){return function(i,r,s){function l(e){var t=!1;return function(n,i){if(t&&ot(),t=!0,n)return void(s=z(s))(n,a(h));var r=h[i];r?r.push(e):r=h[i]=[e],++d===c&&s(null,h)}}s=s||at;var c,d=0,h={};if(ut(i))c=i.length,e(i,r,l);else if(i){if(pt&&i[pt])c=i.size,n(i,r,l);else if((void 0===i?"undefined":o(i))===dt){var u=ft(i);c=u.length,t(i,r,l,u)}}else;c||s(null,{})}}(S,O,N),Ht=function(e,t){return function(n,i){function r(e){return function(t,n){if(null===e&&ot(),t)return e=null,void(i=z(i))(t,c);c[e]=arguments.length<=2?n:s(arguments,1),e=null,++d===a&&i(null,c)}}i=i||at;var a,l,c,d=0;ut(n)?(a=n.length,c=Array(a),e(n,r)):n&&(void 0===n?"undefined":o(n))===dt&&(l=ft(n),a=l.length,c={},t(n,r,l)),a||i(null,c)}}(k,w),Kt=$e(_t),Ft=$e(Y),Rt=et("log"),Ut=et("dir"),Bt={VERSION:"2.1.0",each:gt,eachSeries:U,eachLimit:B,forEach:gt,forEachSeries:U,forEachLimit:B,eachOf:gt,eachOfSeries:U,eachOfLimit:B,forEachOf:gt,forEachOfSeries:U,forEachOfLimit:B,map:_t,mapSeries:Y,mapLimit:W,mapValues:mt,mapValuesSeries:J,mapValuesLimit:X,filter:vt,filterSeries:yt,filterLimit:bt,select:vt,selectSeries:yt,selectLimit:bt,reject:jt,rejectSeries:xt,rejectLimit:kt,detect:wt,detectSeries:Ct,detectLimit:At,find:wt,findSeries:Ct,findLimit:At,pick:St,pickSeries:Ot,pickLimit:Nt,omit:Lt,omitSeries:Pt,omitLimit:Dt,reduce:ne,inject:ne,foldl:ne,reduceRight:ie,foldr:ie,transform:It,transformSeries:re,transformLimit:se,sortBy:Mt,sortBySeries:ae,sortByLimit:oe,some:le,someSeries:ce,someLimit:de,any:le,anySeries:ce,anyLimit:de,every:Tt,everySeries:Et,everyLimit:$t,all:Tt,allSeries:Et,allLimit:$t,concat:qt,concatSeries:he,concatLimit:ue,groupBy:zt,groupBySeries:fe,groupByLimit:pe,parallel:Ht,series:ge,parallelLimit:_e,waterfall:ve,angelFall:ye,angelfall:ye,whilst:be,doWhilst:je,until:xe,doUntil:ke,during:we,doDuring:Ce,forever:Ae,compose:Te,seq:Ee,applyEach:Kt,applyEachSeries:Ft,queue:Ne,priorityQueue:Le,cargo:Pe,auto:De,autoInject:Me,retry:qe,retryable:ze,iterator:He,times:Re,timesSeries:Ue,timesLimit:Be,race:Ye,apply:Ke,nextTick:rt,setImmediate:st,memoize:We,unmemoize:Je,ensureAsync:Xe,constant:Ge,asyncify:Ve,wrapSync:Ve,log:Rt,dir:Ut,reflect:Ze,reflectAll:Qe,timeout:Fe,createLogger:et,safe:tt,fast:nt};e.default=Bt,f(Bt,function(t,n){e[n]=t},ft(Bt)),Se.prototype._removeLink=function(e){return this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=null,e.next=null,this.length--,e},Se.prototype.empty=Se,Se.prototype._setInitial=function(e){this.length=1,this.head=this.tail=e},Se.prototype.insertBefore=function(e,t){t.prev=e.prev,t.next=e,e.prev?e.prev.next=t:this.head=t,e.prev=t,this.length++},Se.prototype.unshift=function(e){this.head?this.insertBefore(this.head,e):this._setInitial(e)},Se.prototype.push=function(e){var t=this.tail;t?(e.prev=t,e.next=t.next,this.tail=e,t.next=e,this.length++):this._setInitial(e)},Se.prototype.shift=function(){return this.head&&this._removeLink(this.head)},Se.prototype.splice=function(e){for(var t,n=[];e--&&(t=this.shift());)n.push(t);return n};var Yt=/^(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,Wt=/,/,Jt=/(=.+)?(\s*)$/,Xt=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm})}).call(t,n(19).setImmediate,n(3))},function(e,t,n){"use strict";(function(e,t){!function(e,n){function i(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return c[l]=i,o(l),l++}function r(e){delete c[e]}function s(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}function a(e){if(d)setTimeout(a,0,e);else{var t=c[e];if(t){d=!0;try{s(t)}finally{r(e),d=!1}}}}if(!e.setImmediate){var o,l=1,c={},d=!1,h=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?function(){o=function(e){t.nextTick(function(){a(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&a(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),o=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){a(e.data)},o=function(t){e.port2.postMessage(t)}}():h&&"onreadystatechange"in h.createElement("script")?function(){var e=h.documentElement;o=function(t){var n=h.createElement("script");n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){o=function(e){setTimeout(a,0,e)}}(),u.setImmediate=i,u.clearImmediate=r}}("undefined"==typeof self?void 0===e?void 0:e:self)}).call(t,n(2),n(3))},function(e,t,n){"use strict";function i(e,t){this._id=e,this._clearFn=t}var r=Function.prototype.apply;t.setTimeout=function(){return new i(r.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new i(r.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(18),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate}]);